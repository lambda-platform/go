import{u as oe,_ as te}from"./BZFRk66G.js";import{aV as ie}from"./BNUQ0oDs.js";import{K as ne,c as re}from"./C--okKoB.js";import{c as d,o as a,q as l,x as ae,z as n,u as e,A as C,y as i,O as w,B as v,C as p}from"./Bb3cLOD_.js";import"./DTdGTy9U.js";import"./BYTvHWBW.js";import"./CU0CZyNU.js";import"./BscJb5-W.js";import"./CByKS65z.js";const se={class:"krud-canvas"},ce={class:"offcanvas-template"},de={class:"crud-page"},le={class:"crud-page-body"},ue={id:"drawer-container"},Oe={__name:"canvas",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(o){const{t:x}=ie(),u=o,m=d(null),f=d(null),t=d(!1);function s(){t.value=!1,r.value=!1}function E(){h()}function D(){s()}function R(){}const{closeByBtn:me,gridSrc:fe,formSrc:ge,editMode:r,searchModel:he,form_width:b,exportLoading:U,isPrint:k,isExcel:I,isRefresh:y,isSave:B,rowId:c,cloneID:Se,visibleDataForm:Ce,isExcelUpload:N,excelUploadCustomUrl:L,showID:A,hasVNavSlot:we,hasNavSlot:ve,hasLeftSlot:pe,url:g,lang:xe,view:F,edit:_,clone:M,quickEdit:O,refresh:V,search:P,stopLoading:Ee,exportExcel:j,print:K,excelUploadMethod:T,save:$,onReady:q,onSuccess:z,onError:G,mediaRecorder:De,recordedChunks:Re,showScreenRecordConfirm:be,startRecording:Ue,stopRecording:ke,recordAndDoAction:H,changeKrudTool:Q}=oe(u,m,f,E,D,R,x,u.CRUD_ID);async function h(){await H()&&(t.value=!0)}return(J,S)=>{const W=a("portal"),X=a("datagrid"),Y=a("dataform"),Z=a("a-drawer");return l(),ae("div",se,[n(e(te),{parent:o.parent,title:o.title,addAction:h,permissions:o.permissions,CRUD_ID:o.CRUD_ID},null,8,["parent","title","permissions","CRUD_ID"]),n(W,{to:"header-right"},{default:C(()=>[n(e(ne),{search:e(P),refresh:e(V),exportExcel:e(j),exportLoading:e(U),print:e(K),save:e($),isPrint:e(k),isExcel:e(I),isExcelUpload:e(N),excelUploadCustomUrl:e(L),excelUploadMethod:e(T),isRefresh:e(y),isSave:e(B),isSearch:!1},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),i("section",ce,[i("div",de,[i("div",le,[i("div",ue,[i("div",{class:w(t.value?"dg-flex open-drawer":"dg-flex")},[o.permissions&&o.permissions.r?(l(),v(X,{key:0,ref_key:"dataGrid",ref:f,url:e(g),schemaID:o.grid,paginate:50,fnClone:e(M),fnEdit:e(_),fnQuickEdit:e(O),fnView:e(F),actions:o.actions,dblClick:o.dbClickAction,onRowSelect:o.onRowSelect,permissions:o.permissions,page_id:o.page_id,custom_condition:o.custom_condition?o.custom_condition:null,user_condition:o.user_condition?o.user_condition.gridCondition:null,changeKrudTool:e(Q)},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition","changeKrudTool"])):p("",!0)],2)])])])]),n(Z,{open:t.value,"onUpdate:open":S[0]||(S[0]=ee=>t.value=ee),class:"canvas-drawer",maskClosable:!1,forceRender:!0,title:o.withCrudLog&&e(c)&&e(A)?`${o.title} : ${e(c)}`:o.title,width:e(b),placement:"right",onClose:s},{default:C(()=>[i("div",{class:w(o.withCrudLog&&e(r)?"with-crud-log":"crud-form")},[n(Y,{ref_key:"dataForm",ref:m,hideTitle:!0,schemaID:o.form,title:o.title,url:e(g),editMode:e(r),onSuccess:e(z),onReady:e(q),do_render:t.value,permissions:o.permissions,page_id:o.page_id,user_condition:o.user_condition?o.user_condition.formCondition:null,onError:e(G),close:s},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError"]),o.withCrudLog&&e(r)?(l(),v(e(re),{key:0,form:o.form,rowId:e(c),grid:o.grid},null,8,["form","rowId","grid"])):p("",!0)],2)]),_:1},8,["open","title","width"])])}}};export{Oe as default};
