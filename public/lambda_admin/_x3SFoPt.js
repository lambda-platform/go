import{T,c as S,e as k,V as c,M as s,a as u,S as d,C as z,F as i,b as n,d as v,f as F,g as _,h as j}from"./DvEm5K3n.js";import{j as L,P as G,E as P,F as C,G as o}from"./DXHvmmg6.js";import"./CYxtEuKL.js";class E extends T{constructor(e){e=e||{};const l=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:S({extent:k(l),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:l,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const M={__name:"khan-map",setup(m){const e=L(null);return G(()=>{const l=new c({format:new s,url:"http://127.0.0.1:8080/tiles/{z}/{x}/{y}.pbf"}),r=new u({source:l,style:t=>new d({stroke:new n({color:"#ffcc33",width:2}),fill:new i({color:"rgba(255, 255, 0, 0.1)"}),image:new z({radius:5,fill:new i({color:"red"}),stroke:new n({color:"black",width:1})})})}),p=new c({format:new s,url:"http://127.0.0.1:8080/buildings/{z}/{x}/{y}.pbf"}),f=new u({source:p,style:t=>new d({stroke:new n({color:"#333dff",width:2}),fill:new i({color:"rgba(61,140,244,0.1)"})})});new v({source:new E({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})});const a=new F({target:e.value,layers:[r,f],view:new _({center:j([106.91736415028574,47.91876971846709]),zoom:16})});function w(t,g){g.forEachFeatureAtPixel(t.pixel,(h,x)=>{if(x){const b=h.getProperties(),y=t.coordinate;console.log(b),console.log(y)}})}a.once("rendercomplete",()=>{a.on("singleclick",t=>w(t,a))})}),(l,r)=>(C(),P("div",null,[o("div",{ref_key:"mapContainer",ref:e,class:"map-container"},null,512),r[0]||(r[0]=o("div",{id:"popup",class:"ol-popup text-[13px]"},[o("a",{href:"#",id:"popup-closer",class:"ol-popup-closer"}),o("div",{id:"popup-content"})],-1))]))}};export{M as default};
