import{_ as v,j as w}from"./C_206FfQ.js";import{y as u,z as a,A as c,B as e,H as r,am as m,a9 as g,an as h,C as _,D as p,I as f,F as b,aB as x}from"./BsiC3VYZ.js";import"./BgMGjKYI.js";import"./BYTvHWBW.js";const k={props:["lambda","onSuccess"],name:"login",data(){return{loading:!1,isSuccess:!1,isError:!1,credentials:{login:null,password:null}}},computed:{lang(){const l=["loginTitle","username","password","remember","login","forgot","loginSuccess","loginError"];return l.reduce((t,i,d)=>(t[i]=this.$t("user."+l[d]),t),{})}},methods:{onSubmit(){this.isSuccess=!1,this.isError=!1,this.loading||(this.loading=!0,w.post("/auth/login",this.credentials).then(({data:l})=>{l.status?this.onSuccess(l):(this.isError=!0,this.loading=!1)}).catch(l=>{this.loading=!1,this.isError=!0}))}}},E={class:"form-wrap"},V={class:"form-content"},B={class:"form-element input"},C=["disabled","placeholder"],N=e("span",{class:"icon user"},null,-1),T={class:"form-element input"},D=["disabled","placeholder"],F=e("span",{class:"icon pass"},null,-1),M={class:"form-element"},U=e("input",{type:"checkbox",class:"checkbox",id:"remember_me"},null,-1),z={for:"remember_me"},A={class:"form-element action"},H={id:"msg"},I={key:0,class:"success"},j={key:1,class:"error"},q={class:"copyright",style:{width:"70%","text-align":"center"}};function G(l,t,i,d,o,s){const S=u("a-button"),y=u("router-link");return a(),c("div",E,[e("div",V,[e("h2",null,r(s.lang.loginTitle),1),e("form",{onSubmit:[t[2]||(t[2]=m((...n)=>s.onSubmit&&s.onSubmit(...n),["prevent"])),t[3]||(t[3]=m((...n)=>s.onSubmit&&s.onSubmit(...n),["prevent"]))],id:"authForm",method:"post",class:"login-form"},[e("div",B,[g(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>o.credentials.login=n),disabled:o.loading,placeholder:s.lang.username},null,8,C),[[h,o.credentials.login]]),N]),e("div",T,[g(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=n=>o.credentials.password=n),disabled:o.loading,placeholder:s.lang.password},null,8,D),[[h,o.credentials.password]]),F]),e("div",M,[U,e("label",z,r(s.lang.remember),1)]),e("div",A,[_(S,{type:"primary",loading:o.loading,"html-type":"submit"},{default:p(()=>[f(r(s.lang.login),1)]),_:1},8,["loading"]),e("p",null,[_(y,{class:"forgot",to:"/auth/forgot"},{default:p(()=>[f(r(s.lang.forgot),1)]),_:1})])])],32),e("div",H,[o.isSuccess?(a(),c("span",I,r(s.lang.loginSuccess),1)):b("",!0),o.isError?(a(),c("span",j,r(s.lang.loginError),1)):b("",!0)])]),e("div",q,r(i.lambda.copyright),1),x(l.$slots,"copyright")])}const P=v(k,[["render",G]]);export{P as default};
