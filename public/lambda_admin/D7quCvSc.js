const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BMw634Et.js","./DugTeqwv.js","./2tDPZFmp.js","./C_206FfQ.js","./BsiC3VYZ.js","./BgMGjKYI.js","./BYTvHWBW.js","./entry.s4LH81U_.css","./DI_YBKfs.js","./BCAJUAsr.js","./DhHhqd_G.js","./itkf8INL.js","./C5km_867.js","./Bsy1Mvgc.js","./Ds1lc8d-.js","./BHcF-zQ5.js","./t-RgEeSz.js","./yojwP1Ai.js","./xyTMQVKM.js","./DsAggExp.js","./Bfegjd5j.js","./BXhCRRyx.js","./exAhXe_V.js","./yNV4IkSm.js","./2WT9vfDf.js","./Bb2MPv2w.js","./Dos7ag1H.js","./Bg9FPR_G.js","./B4jHpLmZ.js","./CK.DD9acDcL.css","./EaVEjEkh.js","./Qm0kQ4LG.js","./CAipavOs.js","./cVsNkD9S.js","./CffjY82w.js","./Geographic.Bzaw58bc.css","./DjoCVqnv.js","./RIUcpfEl.js","./px4T0zNl.js","./Bd4JjCXt.js","./CsIQdGwN.js","./W-qRHnuZ.js","./Nfap3A2H.js","./DK810I8j.js","./D9WAgI69.js","./CMlR0Dx8.js","./Ds1098Ov.js","./BYYiNixu.js","./BxCIKNdQ.js","./Ca_nXh_X.js","./bOzAY_Rs.js","./N4ymJ6Qa.js","./C4p1QlNq.js","./Bz1Q8ASI.js","./BX5PaIXN.js","./CGVnormi.js","./BkKCYVDz.js","./DijRc9pD.js","./X8qJBm9S.js","./Bjhgopnq.js","./BYejM6Ac.js","./CsFp_7X6.js","./DOa0fHwO.js"])))=>i.map(i=>d[i]);
import{p as f,j as A,_ as Q}from"./C_206FfQ.js";import{i as re,x as p,y as k,z as a,A as n,E as m,D as d,I as B,F as y,G as v,aj as M,B as T,a8 as V,a0 as z,H as E,C as I,o as P,ag as $}from"./BsiC3VYZ.js";import{e as le,i as se}from"./2tDPZFmp.js";import{i as ie,g as de,a as q}from"./CsFp_7X6.js";import{d as L}from"./Ds1lc8d-.js";import{g as K}from"./BHcF-zQ5.js";const G=[{element:"Text",component:p(()=>f(()=>import("./BMw634Et.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url))},{element:"Select",component:p(()=>f(()=>import("./DI_YBKfs.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url))},{element:"ISelect",component:p(()=>f(()=>import("./DI_YBKfs.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url))},{element:"TreeSelect",component:p(()=>f(()=>import("./BCAJUAsr.js"),__vite__mapDeps([9,1,2,3,4,5,6,7]),import.meta.url))},{element:"Number",component:p(()=>f(()=>import("./DhHhqd_G.js"),__vite__mapDeps([10,1,2,3,4,5,6,7]),import.meta.url))},{element:"Textarea",component:p(()=>f(()=>import("./itkf8INL.js"),__vite__mapDeps([11,1,2,3,4,5,6,7]),import.meta.url))},{element:"Date",component:p(()=>f(()=>import("./C5km_867.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,13,14,15]),import.meta.url))},{element:"DateTime",component:p(()=>f(()=>import("./t-RgEeSz.js"),__vite__mapDeps([16,1,2,13,3,4,5,6,7]),import.meta.url))},{element:"Divider",component:p(()=>f(()=>import("./yojwP1Ai.js"),__vite__mapDeps([17,3,4,5,6,7]),import.meta.url))},{element:"Image",component:p(()=>f(()=>import("./xyTMQVKM.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"ImageSubform",component:p(()=>f(()=>import("./BXhCRRyx.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"TextareaByte",component:p(()=>f(()=>import("./exAhXe_V.js"),__vite__mapDeps([22,1,2,3,4,5,6,7]),import.meta.url))},{element:"HTML",component:p(()=>f(()=>import("./yNV4IkSm.js"),__vite__mapDeps([23,1,2,3,4,5,6,7]),import.meta.url))},{element:"ImageDrag",component:p(()=>f(()=>import("./2WT9vfDf.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"Checkbox",component:p(()=>f(()=>import("./Bb2MPv2w.js"),__vite__mapDeps([25,1,2,3,4,5,6,7]),import.meta.url))},{element:"CK",component:p(()=>f(()=>import("./Dos7ag1H.js"),__vite__mapDeps([26,27,4,5,28,1,2,3,6,7,29]),import.meta.url))},{element:"CKByte",component:p(()=>f(()=>import("./EaVEjEkh.js"),__vite__mapDeps([30,27,4,5,28,1,2,3,6,7]),import.meta.url))},{element:"File",component:p(()=>f(()=>import("./Qm0kQ4LG.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"FileSubform",component:p(()=>f(()=>import("./CAipavOs.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"Download",component:p(()=>f(()=>import("./cVsNkD9S.js"),__vite__mapDeps([33,1,2,3,4,5,6,7]),import.meta.url))},{element:"Geographic",component:p(()=>f(()=>import("./CffjY82w.js"),__vite__mapDeps([34,3,4,5,6,7,1,2,35]),import.meta.url))},{element:"CkOld",component:p(()=>f(()=>import("./DjoCVqnv.js"),__vite__mapDeps([36,27,4,5,37,1,2,3,6,7]),import.meta.url))},{element:"CkOldPhp7",component:p(()=>f(()=>import("./px4T0zNl.js"),__vite__mapDeps([38,27,4,5,37,1,2,3,6,7]),import.meta.url))},{element:"ColorPicker",component:p(()=>f(()=>import("./Bd4JjCXt.js"),__vite__mapDeps([39,1,2,4,5,3,6,7]),import.meta.url))},{element:"Email",component:p(()=>f(()=>import("./BMw634Et.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url))},{element:"Hidden",component:p(()=>f(()=>import("./CsIQdGwN.js"),__vite__mapDeps([40,3,4,5,6,7]),import.meta.url))},{element:"Map",component:p(()=>f(()=>import("./W-qRHnuZ.js"),__vite__mapDeps([41,1,2,3,4,5,6,7]),import.meta.url))},{element:"Money",component:p(()=>f(()=>import("./Nfap3A2H.js"),__vite__mapDeps([42,1,2,3,4,5,6,7]),import.meta.url))},{element:"MoneyWithoutCurrency",component:p(()=>f(()=>import("./DK810I8j.js"),__vite__mapDeps([43,1,2,3,4,5,6,7]),import.meta.url))},{element:"NumberGenerate",component:p(()=>f(()=>import("./D9WAgI69.js"),__vite__mapDeps([44,1,2,3,4,5,6,7]),import.meta.url))},{element:"Password",component:p(()=>f(()=>import("./CMlR0Dx8.js"),__vite__mapDeps([45,1,2,3,4,5,6,7]),import.meta.url))},{element:"PasswordGenerate",component:p(()=>f(()=>import("./Ds1098Ov.js"),__vite__mapDeps([46,1,2,3,4,5,6,7]),import.meta.url))},{element:"Radio",component:p(()=>f(()=>import("./BYYiNixu.js"),__vite__mapDeps([47,1,2,3,4,5,6,7]),import.meta.url))},{element:"RadioWithThumb",component:p(()=>f(()=>import("./BxCIKNdQ.js"),__vite__mapDeps([48,1,2,3,4,5,6,7]),import.meta.url))},{element:"FooterButton",component:p(()=>f(()=>import("./Ca_nXh_X.js"),__vite__mapDeps([49,1,2,3,4,5,6,7]),import.meta.url))},{element:"RadioWithTextInput",component:p(()=>f(()=>import("./bOzAY_Rs.js"),__vite__mapDeps([50,1,2,3,4,5,6,7]),import.meta.url))},{element:"Register",component:p(()=>f(()=>import("./N4ymJ6Qa.js"),__vite__mapDeps([51,1,2,3,4,5,6,7]),import.meta.url))},{element:"Search",component:p(()=>f(()=>import("./C4p1QlNq.js"),__vite__mapDeps([52,3,4,5,6,7]),import.meta.url))},{element:"Switch",component:p(()=>f(()=>import("./Bz1Q8ASI.js"),__vite__mapDeps([53,1,2,3,4,5,6,7]),import.meta.url))},{element:"Time",component:p(()=>f(()=>import("./BX5PaIXN.js"),__vite__mapDeps([54,1,2,3,4,5,6,7]),import.meta.url))},{element:"JsonEditor",component:p(()=>f(()=>import("./CGVnormi.js"),__vite__mapDeps([55,4,5,1,2,3,6,7]),import.meta.url))},{element:"QGis",component:p(()=>f(()=>import("./BkKCYVDz.js"),__vite__mapDeps([56,3,4,5,6,7,1,2]),import.meta.url))},{element:"AdminMenu",component:p(()=>f(()=>import("./DijRc9pD.js"),__vite__mapDeps([57,1,2,3,4,5,6,7]),import.meta.url))},{element:"GridSelector",component:p(()=>f(()=>import("./X8qJBm9S.js"),__vite__mapDeps([58,3,4,5,6,7,1,2,15]),import.meta.url))},{element:"subform/Grid",component:p(()=>f(()=>import("./Bjhgopnq.js"),__vite__mapDeps([59,60,61,3,4,5,6,7,2,14,15]),import.meta.url))},{element:"subform/Form",component:p(()=>f(()=>import("./DOa0fHwO.js"),__vite__mapDeps([62,60,61,3,4,5,6,7,2,14,15]),import.meta.url))}],ne=e=>{if(e!==null&&typeof e<"u"){const t=G.findIndex(o=>o.element===e);if(t>=0)return G[t].component;{const o=re("customElementList");if(o&&o.length>=1){const r=o.findIndex(h=>h.element===e);if(r>=0)return o[r].component}}}return p(()=>f(()=>import("./DijRc9pD.js"),__vite__mapDeps([57,1,2,3,4,5,6,7]),import.meta.url))};let X=null,Z=null,x=null;const me=e=>{X=e},U=(e,t)=>{x=t,Z=e},ue=async(e,t,o)=>{try{const r=await A.post(`${o}/lambda/krud/unique`,{table:X,identityColumn:Z,identity:x,field:e.field,val:t});return r.data.status?Promise.resolve():Promise.reject(r.data.msg)}catch(r){return Promise.reject(r.response.data.msg)}},he=async(e,t,o)=>{try{return(await A.post(`${o}/lambda/check`,{value:t})).data.status?Promise.resolve():Promise.reject(`'${t} Давхацсан утга оруулсан байна!'`)}catch{return Promise.reject(`'${t} Давхацсан утга оруулсан байна!'`)}},fe=async(e,t,o)=>{var r=/^[a-zA-Z0-9!@#\$%\^\&*\s*)\(+=._,-]+$/;return t.match(r)?Promise.resolve():Promise.reject("Зөвхөн латин үсэг оруулна уу")},pe=(e,t,o)=>{var r=/^[а-яөүёА-ЯӨҮЁ0-9!@#\$%\^\&*\s*)\(+=.,_-]+$/;return t.match(r)?Promise.resolve():Promise.reject("Зөвхөн кирилл үсэг оруулна уу!")};function ye(e,t,o){const r=/^[а-яөүёА-ЯӨҮЁ0]{2}\d{8}$/;return t.match(r)?Promise.resolve():Promise.reject(e.msg)}const be=(e,t,o)=>{var r=/^[0-9]{8}$/;return t.toString().match(r)?Promise.resolve():Promise.reject("8 оронтой утасны дугаар оруулна уу!")},ce=async(e,t,o)=>{try{const r=await A.post(`${o}/lambda/krud/check_current_password`,{password:t});return r.data.status?Promise.resolve():Promise.reject(r.data.msg)}catch(r){return Promise.reject(r.response.data.msg)}},ge=e=>{if(typeof e!="string")throw new Error("Invalid input. Input must be a string");var t=e.match(/(\/?)(.+)\1([a-z]*)/i);return t[3]&&!/^(?!.*?(.).*?\1)[gmixXsuUAJ]+$/.test(t[3])?RegExp(e):new RegExp(t[2],t[3])},ve=async(e,t,o)=>t.toString().match(ge(o))?Promise.resolve():Promise.reject(e.msg),H=(e,t)=>{switch(t||(t=""),e.type){case"custom":return{validator:async(o,r)=>await ve(o,r,e.regex),trigger:"blur",message:e.msg};case"required":return{required:!0,message:e.msg};case"array":return{type:"array",required:e.required,message:e.message};case"min":return{type:"string",min:parseInt(e.val,10),message:e.msg};case"max":return{type:"string",max:parseInt(e.val,10),message:e.msg};case"email":return{type:"email",trigger:"blur",message:e.msg};case"number":return{type:"number",message:e.msg};case"mongolianMobileNumber":return{validator:be,trigger:"blur"};case"unique":return{validator:async(o,r)=>await ue(o,r,t),trigger:"blur"};case"lambda-account":return{validator:async(o,r)=>await he(o,r,t),trigger:"blur"};case"englishAlphabet":return{validator:fe,trigger:"blur",message:e.msg};case"mongolianCyrillic":return{validator:pe,trigger:"blur"};case"register":return console.log(e.msg),{validator:ye,trigger:"blur",message:e.msg};case"check_current_password":return{validator:async(o,r)=>await ce(o,r,t),trigger:"blur"};default:return null}};var Me=/\{ *([\w_-]+) *\}/g;function Fe(e,t){return e.replace(Me,function(o,r){let h=t[r];return h===void 0?"":(typeof h=="function"&&(h=h(t)),h)})}var Se=/\{ *([\w_-]+) *\}/g,j=null;function De(e,t){return e.replace(Se,function(o,r){let h=t[r];return h===void 0?"":(typeof h=="function"&&(h=h(t)),h)})}function we(e){return new Function("return "+e)()}function Ie(e,t,o,r,h,F){if(e.length>=1){let b=e.findIndex(g=>g.model==t);b<=-1?e.map(g=>{g.template.includes(t)&&J(g,t,o,r,h,F)}):J(e[b],t,o,r,h,F)}}function J(e,t,o,r,h,F){let b=!1;if(e.form?F?e.form===F&&(b=!0):e.form=="main"&&(b=!0):b=!0,b){let g=De(e.template,o);if(g)try{let c=we(g);e.targets.map(w=>{let R=W(r,w.field);R>=0&&(w.prop=="value"?o[w.field]=c:(w.prop=="hidden"&&h&&h[w.field]&&h[w.field].length>0&&h[w.field][0].hasOwnProperty("required")&&(h[w.field][0].required=!c),r[R][w.prop]=c))})}catch(c){console.log(c)}}}function _e(e,t,o,r,h,F,b){if(t||t===0){let g=W(r,e);g>=0&&r[g].trigger&&(j&&clearTimeout(j),j=setTimeout(()=>{Ee(r[g].trigger,o,r,h,F,b)},r[g].triggerTimeout!=null&&r[g].triggerTimeout!==null&&r[g].triggerTimeout!=""?r[g].triggerTimeout:0))}}function Y(e,t,o,r,h){if(h){let F=W(o,h);if(F>=0){let b=W(o[F].schema,e.field);b>=0&&Object.keys(e.props).forEach(g=>{o[F].schema[b][g]=e.props[g]})}}else{let F=W(o,e.field);if(F>=0){if("value"in e){let b=o[F];b.formType==="Date"||b.formType==="DateTime"?t[e.field]=e.value:b.formType==="SubForm"?(t[e.field]=e.value,r[`sf${e.field}`][0].fillData(e.value)):t[e.field]=e.value}e.props&&Object.keys(e.props).forEach(b=>{o[F][b]=e.props[b]})}}}function Ee(e,t,o,r,h,F){e.split(",").forEach(g=>{A.post(g,{model:{...t},editMode:F}).then(({data:c})=>{c.schema&&c.schema.forEach(w=>{Y(w,t,o,r)}),c.schema_sub&&c.schema_sub.forEach(w=>{w.schema.forEach(R=>{Y(R,t,o,r,w.model)})}),c.message&&(c.message.type=="success"?h.success({duration:3,message:c.message.message,description:c.message.message}):h.error({duration:3,message:c.message.message,description:c.message.message})),c.info&&c.info.forEach(w=>{document.getElementById(w.target).innerHTML=w.html})})})}function W(e,t){return e.findIndex(o=>o.model==t)}const Te={name:"formFooter",props:["withBackButton","save_btn_text","asyncMode","lang","extraButtons","schemaID","editMode","disableReset","handleReset","getFooterButtons","setAndSend","createWithTemplate"]},$e={key:0},Be={key:1},ke={class:"extra-buttons"};function Re(e,t,o,r,h,F){const b=k("a-button"),g=k("a-popconfirm");return a(),n(v,null,[o.withBackButton?(a(),m(b,{key:0,onClick:e.close,style:{"margin-right":"8px"}},{default:d(()=>[B(" Буцах ")]),_:1},8,["onClick"])):y("",!0),(a(!0),n(v,null,M(o.extraButtons,c=>(a(),m(b,{key:c.index,disabled:!o.editMode,to:o.createWithTemplate(c.url),target:"_blank",style:z(o.editMode?`margin-right: 8px; color:${c.color}; border-color:${c.color}`:"margin-right: 8px;"),type:"primary",ghost:""},{default:d(()=>[T("i",{class:V(c.icon),style:z(o.editMode?`color:${c.color}`:"")},null,6),B(" "+E(c.title),1)]),_:2},1032,["disabled","to","style"]))),128)),I(b,{type:"primary",loading:o.asyncMode,"html-type":"submit"},{default:d(()=>[o.asyncMode?(a(),n("span",Be,E(o.lang.pleaseWait),1)):(a(),n("span",$e,E(o.save_btn_text!=="Хадгалах"&&o.save_btn_text!==""?o.save_btn_text:o.lang.save),1))]),_:1},8,["loading"]),!o.editMode&&!o.disableReset?(a(),m(b,{key:1,onClick:o.handleReset,style:{"margin-left":"8px"}},{default:d(()=>[B(E(o.lang.reset),1)]),_:1},8,["onClick"])):y("",!0),(a(!0),n(v,null,M(o.getFooterButtons(),c=>(a(),n("span",ke,[(a(!0),n(v,null,M(c.options,w=>(a(),m(g,{title:"Энэ үйлдлийг хийх үү?","ok-text":"Тийм","cancel-text":"Үгүй",onConfirm:R=>o.setAndSend(c.model,w.value),key:c.index},{default:d(()=>[I(b,{loading:o.asyncMode,type:"primary",ghost:""},{default:d(()=>[B(E(w.label),1)]),_:2},1032,["loading"])]),_:2},1032,["onConfirm"]))),128))]))),256))],64)}const Pe=Q(Te,[["render",Re]]),Ae={name:"dataform",props:["projectID","schemaID","editMode","onReady","onSuccess","onError","permissions","user_condition","formCustomData","do_render","isSubForm","url","page_id","public","title","close","hideTitle","hideSuccessDialog","hideErrorDialog","hideFooter","hideLoader"],components:{fromFooter:Pe},data(){return{formTitle:"",loadConfig:!0,use2ColumnLayout:!1,viewMode:!1,asyncMode:!1,save_btn_text:"",formValidationCustomText:"",meta:{model:"",option:{}},model:{},schema:[],ui:{},formula:[],rule:{},identity:null,dataID:null,relations:{},showInfo:!1,infoUrl:"",infoTitle:"",showID:window.init&&window.init.showID?window.init.showID:void 0,subFormValidations:[],extraButtons:[],disableReset:!1,withBackButton:!1,tabIndex:0,noFooter:!1}},computed:{baseUrl(){return this.$props.url?this.$props.url:""},submitUrl(){return this.editMode?this.page_id?`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/update/${this.dataID}?page_id=${this.page_id}`:`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/update/${this.dataID}`:this.page_id?`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/store?page_id=${this.page_id}`:`${this.baseUrl}/lambda/krud${this.optionUrl}/${this.$props.schemaID}/store`},optionUrl(){return this.public===!0?"-public":""},lang(){const e=["save","pleaseWait","reset","close","pleaseEnterPasswordYouUCurrentlyUsing","pleaseReEnterYourPassword","passwordConfirmError","informationIsIncomplete","trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder","successfullySaved","errorSaving","error"];return e.reduce((t,o,r)=>(t[o]=this.$t("dataForm."+e[r]),t),{})}},created(){window.showInformationModal=this.showInformationModal,this.schemaID&&this.initForm()},watch:{src(e,t){this.initForm()},editMode(e){e||this.handleReset(this.meta.model+"-"+this.schemaID)},do_render(e){e||(this.handleReset(this.meta.model+"-"+this.schemaID),this.viewMode=!1)},schemaID(e){e&&this.initForm()}},methods:{moveByRight(e){this.tabIndex=e+1},moveByLeft(e){this.tabIndex=e-1},createWithTemplate(e){return Fe(e,this.model)},isVisibleSection(e){let t=this.showAbleFields(e.children);return e.type=="section"&&t?e.visibleUserRoles&&t&&Array.isArray(e.visibleUserRoles)&&t&&e.visibleUserRoles.length>=1&&window.init.user&&t?!!(e.visibleUserRoles.findIndex(o=>o==window.init.user.role)>=0&&t):!0:!1},getStepData(e){if(typeof e=="object"&&e!==null&&e.hasOwnProperty("children")){const t=e.children.filter(r=>this.isVisibleSection(r));let o=[];return t.forEach((r,h)=>{o.push({index:h})}),o}return[]},showAbleFields(e){for(let t of e){if(t.type=="form"||t.type=="Form")return!!this.isShow(t.model);if(t.formType=="SubForm")return!0;if(t.type=="row"){let o=!1;for(let r of t.children)this.showAbleFields(r.children)&&(o=!0);return o}else return t.hasOwnProperty("children")?!!this.showAbleFields(t.children):!!this.isShow(t.model)}},element:ne,evalstr:le,isValid:se,isShow(e){let t=this.schema.findIndex(o=>o.model==e);return t>=0?!this.schema[t].hidden:!0},afterChange(e,t,o){_e(e,t,this.model,this.schema,this.$refs,P,this.editMode),this.do_render&&t!=o&&Ie(this.formula,e,this.model,this.schema,this.rule,!1)},clearConfig(){this.model={},this.schema=[],this.ui={},this.formula=[],this.rule={},this.dataID=null},async initFromServerData(e){let t=this.baseUrl+`/lambda/puzzle/schema${this.optionUrl}/form/${this.$props.schemaID}`;this.projectID&&(t=this.baseUrl+`/lambda/puzzle/project/${this.projectID}/form/${this.$props.schemaID}`),t+=e.length==0?"":`/${e}`;try{let o=await A.get(t),r=JSON.parse(o.data.data.schema);return r.form_id=o.data.data.id,r.form_name=o.data.data.name,r}catch(o){console.error(o.message);return}},async initForm(){let e=[];this.user_condition&&(e=JSON.stringify(this.user_condition));let t={};window.init?window.init.formSchemas?window.init.formSchemas[this.$props.schemaID]?t=window.init.formSchemas[this.$props.schemaID]:t=await this.initFromServerData(e):t=await this.initFromServerData(e):t=await this.initFromServerData(e),this.identity=t.identity,this.schema=t.schema,this.ui=t.ui,t.save_btn_text&&(this.save_btn_text=t.save_btn_text),t.formValidationCustomText&&(this.formValidationCustomText=t.formValidationCustomText),t.formula&&(this.formula=t.formula),t.extraButtons&&(this.extraButtons=t.extraButtons),t.disableReset&&(this.disableReset=t.disableReset),t.withBackButton&&(this.withBackButton=t.withBackButton),t.use2ColumnLayout&&(ie.value||(this.use2ColumnLayout=t.use2ColumnLayout)),this.formTitle=t.form_name,this.meta={model:t.model,option:{labelPosition:t.labelPosition,labelWidth:t.labelWidth}},this.relations=await de(t.schema,this.setSchemaByModel,this.optionUrl),this.setUiSchemaFormItem(t.ui.schema),this.setHiddenItemModel(t.schema),me(t.model),this.setUserConditionValues(!0),this.setCustomData(),this.loadConfig=!1,this.$props.onReady&&this.$props.onReady(t,this.schema)},setHiddenItemModel(e){e.forEach(t=>{if((t.hidden||t.disabled)&&(this.isValid(t.default)&&this.setModel(t.model,t.default,t.formType),t.hasUserId&&this.setModel(t.model,window.init.user.id*1,t.formType),t.fillByUserField!==null&&t.fillByUserField!==""&&t.fillByUserField!==void 0&&this.setModel(t.model,window.init.user[t.fillByUserField],t.formType),this.isValid(t.param))){if(t.param in this.$route.params){let r=this.$route.params[t.param];r!=="null"&&(this.isNumberString(r)?this.$data.model[t.model]=r*1:this.$data.model[t.model]=r)}let o=this.$route.query[t.param];o!=="null"&&(this.isNumberString(o)?this.$data.model[t.model]=o*1:this.$data.model[t.model]=o)}t.source_hidden=t.hidden,t.source_disabled=t.disabled})},validatePassCheck(e,t,o,r){let h=o||"",F=this.model[e]?this.model[e]:"";o===""&&!this.editMode?r(new Error(this.lang.pleaseReEnterYourPassword)):h!==F?r(new Error(this.lang.passwordConfirmError)):r()},isNumberString(e){return/^-?\d+(\.\d+)?$/.test(e)},setUiSchemaFormItem(e){e.forEach(t=>{if(t.type=="form"){if(this.setModel(t.model,t.default,t.formType),this.model.hasOwnProperty(t.model)&&this.$watch("model."+t.model,{handler:(o,r)=>{this.do_render&&o!==r&&this.afterChange(t.model,o,r)},deep:!0}),t.rules||(t.rules=[]),t.custom_regex&&t.custom_regex_msg&&t.rules.push({type:"custom",regex:t.custom_regex,msg:t.custom_regex_msg}),this.setRule(t.model,t.rules),t.formType=="Password"&&t.passwordOption&&(t.passwordOption.confirm&&(this.setModel("password_confirm","","password"),this.$data.rule.password_confirm=[{validator:(o,r,h)=>this.validatePassCheck(t.model,o,r,h),trigger:"blur"}]),t.passwordOption.edit_with_old_password)){this.setModel("current_password","","password");let o=[];[{type:"required",msg:this.lang.pleaseEnterPasswordYouUCurrentlyUsing},{type:"check_current_password",msg:null}].forEach(h=>{let F=H(h,this.url);o.push(F)}),this.$data.rule.current_password=o}t.formType==="process_status"&&t.model==="status"&&(this.noFooter=!0)}else t.formType=="SubForm"?(this.setModel(t.model,[],"SubForm"),t.checkEmpty&&this.subFormValidations.push({model:t.model,emptyErrorMsg:t.EmptyErrorMsg?t.EmptyErrorMsg:`${t.name}-д мэдээлэл бүртгэнэ үү`}),t.trigger!=""&&this.$watch("model."+t.model,{handler:(o,r)=>{this.do_render&&this.afterChange(t.model,o,r)},deep:!0})):_.isArray(t.children)&&this.setUiSchemaFormItem(t.children)})},setModel(e,t,o){switch(o){case"Switch":let r=!1;(t==="true"||t===1)&&(r=!0),this.$data.model[e]=r;break;case"Checkbox":let h=0;(t==="true"||t===1)&&(h=1),this.$data.model[e]=h;break;case"CK":let F="";t!==""&&t!==null&&(F=t),this.$data.model[e]=F;break;case"SubForm":this.$data.model[e]=[];break;case"Select":t===""||t===null?this.$data.model[e]=null:!isNaN(t)&&!/^0\d+$/.test(t)?this.$data.model[e]=t*1:this.$data.model[e]=t;break;case"Number":t!==null?this.$data.model[e]=t*1:this.$data.model[e]=t;break;case"Date":t===null&&A.get("/lambda/krud/today").then(({data:b})=>{window.withTimezone?this.$data.model[e]=L(b.today):this.$data.model[e]=K(b.today)});break;case"DateTime":t===null&&A.get("/lambda/krud/now").then(({data:b})=>{window.withTimezone?this.$data.model[e]=L(b.today):this.$data.model[e]=K(b.today)});break;case"ISelect":this.$data.model[e]=t;case"TreeSelect":this.$data.model[e]=t;break;default:this.$data.model[e]=t}},setRule(e,t){this.$data.rule[e]=[],t.forEach(o=>{let r=H(o,this.url);this.$data.rule[e].push(r)})},setMeta(e,t){let o=this.schema.findIndex(F=>F.model==e.model),r=o>=0?this.schema[o]:e;t||(delete r.table,delete r.extra,r.schemaID=this.$props.schemaID);const h=this.viewMode?!0:r.disabled;return{...r,disabled:h}},getSchemaByModel(e){let t=this.schema.findIndex(o=>o.model===e);return t>=0?this.schema[t]:null},getSchemaRelationByModel(e){let t=this.schema.findIndex(o=>o.model==e);return t>=0?q(this.schema[t],this.relations):null},setSchemaByModel(e,t,o,r){if(t==="value")this.$data.model[e]=o;else if(t==="sub-value")this.$data.model[e]=o,this.subFormFillData(e);else{let h=this.schema.findIndex(F=>F.model===e);if(h>=0)if(r){if(this.schema[h].formType==="SubForm"){let F=this.schema[h].schema.findIndex(b=>b.model===r);F>=0&&(this.schema[h].schema[F][t]=o)}}else this.schema[h][t]=o}},getSubFormData(e){let t=[];this.model[e].forEach(o=>{t.push(o.data)})},handleSubmit(){this.setIdentityManual(),this.subFormValidations.length>=1?this.validateWithSubForm():this.postData()},async validateDataForm(){try{await this.$refs[this.meta.model+"-"+this.schemaID].validate();let e=!0;return this.subFormValidations.forEach(t=>{let o=_.isArray(this.model[t.model]);(this.model[t.model]===void 0||this.model[t.model]===null||o)&&(o?this.model[t.model].length==0&&(P.error({message:this.lang.informationIsIncomplete,description:t.emptyErrorMsg}),e=!1):(P.error({message:this.lang.informationIsIncomplete,description:t.emptyErrorMsg}),e=!1))}),!!e}catch{return this.finishFailed(),!1}},validateWithSubForm(e){this.$refs[this.meta.model+"-"+this.schemaID].validate().then(()=>{let t=!0;this.subFormValidations.forEach(o=>{let r=_.isArray(this.model[o.model]);(this.model[o.model]===void 0||this.model[o.model]===null||r)&&(r?this.model[o.model].length==0&&(P.error({message:this.lang.informationIsIncomplete,description:o.emptyErrorMsg}),t=!1):(P.error({message:this.lang.informationIsIncomplete,description:o.emptyErrorMsg}),t=!1))}),t&&this.postData(e)}).catch(t=>{this.finishFailed()})},postData(e){this.isSubForm?this.$props.onSuccess(this.$data.model):(this.asyncMode=!0,A.post(this.submitUrl,this.$data.model).then(({data:t})=>{t.status?(this.hideSuccessDialog||P.success({message:this.lang.successfullySaved,description:this.lang.successfullySaved}),e||(this.editMode?this.$props.onSuccess&&this.$props.onSuccess(t.data):(this.$data.model[this.identity]=t[this.identity],this.$props.onSuccess&&this.$props.onSuccess(t.data),this.handleReset(this.meta.model+"-"+this.schemaID)))):(this.hideErrorDialog||P.error({message:this.lang.errorSaving,description:this.lang.errorSaving}),this.$props.onError&&this.$props.onError()),this.asyncMode=!1}).catch(t=>{console.log(t);let o="";t.response?(t.response.data.hasOwnProperty("error")&&(typeof t.response.data.error=="string"||t.response.data.error instanceof String?o=t.response.data.error:t.response.data.error instanceof Object&&Object.keys(t.response.data.error).forEach(r=>{let h=r+": "+t.response.data.error[r].map(F=>F+" ");o!=""?o=o+"<br/>"+h:o=h})),P.error({message:this.lang.errorSaving,description:o})):P.error({message:this.lang.errorSaving,description:t}),this.asyncMode=!1,this.$props.onError&&this.$props.onError()}))},handleReset(){this.model={},this.$refs[this.meta.model+"-"+this.schemaID].resetFields(),U(this.identity,null),this.schema.forEach(e=>{e.formType==="SubForm"&&typeof this.$refs[`sf${e.model}`]<"u"&&this.$refs[`sf${e.model}`].length>=1&&this.$refs[`sf${e.model}`][0].reset(),this.setModel(e.model,e.default,e.formType),e.hidden=e.source_hidden,e.disabled=e.source_disabled}),this.setHiddenItemModel(this.schema),this.setCustomData()},setIdentityManual(){U(this.identity,this.model[this.identity])},setUserConditionValues(e){this.user_condition&&this.user_condition.forEach(t=>{let o=this.getSchemaByModel(t.form_field);o&&(o.default!==""&&o.default!==null&&o.default!==0||e)&&(this.model[o.model]===""||this.model[o.model]===null||this.model[o.model]===0)&&(e?(this.model[o.model]=window.init.user[t.user_field],o.default=window.init.user[t.user_field],o.disabled=!0,o.source_disabled=!0):this.setModel(o.model,o.default,o.formType))})},setCustomData(){this.formCustomData&&Object.keys(this.formCustomData).forEach(e=>{let t=this.schema.findIndex(o=>o.model===e);t>=0&&(this.schema[t].disabled=!0,this.schema[t].default=this.formCustomData[e],this.$data.model[e]=this.formCustomData[e])})},editModel(e,t){t?(this.model={...this.model,...t},this.ui&&this.ui.hasOwnProperty("schema")&&(this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())):(this.dataID=e,U(this.identity,e),A.post(this.page_id?`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/edit/${e}?page_id=${this.page_id}`:`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/edit/${e}`).then(({data:o})=>{o.status&&(this.model={...this.model,...o.data},this.ui&&this.ui.hasOwnProperty("schema")&&this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())}).catch(o=>{o.response.data&&o.response.data.error&&P.error({message:this.lang.error,description:o.response.data.error})}))},setHiddenValues(e){e.map(t=>{this.model[t.key]=t.val})},subFormFillData(e){this.$nextTick(()=>{this.$refs[`sf${e}`]?this.$refs[`sf${e}`].length>=1?this.$refs[`sf${e}`][0].fillData(this.model[e]):setTimeout(()=>{this.subFormFillData(e)},100):setTimeout(()=>{this.subFormFillData(e)},100)})},setEditModel(e){e.forEach(t=>{if(t.type=="form"||t.type=="Form"||t.formType=="SubForm")switch(t.formType){case"SubForm":this.subFormFillData(t.model);break;case"Switch":this.model[t.model]==1||this.model[t.model]=="true"?this.model[t.model]=!0:this.model[t.model]=!1;break;case"CK":this.model[t.model]===null&&(this.model[t.model]="");break;case"Date":this.model[t.model]!==null&&(window.withTimezone?this.model[t.model]=L(this.model[t.model]):this.model[t.model]=this.model[t.model]);break;case"DateTime":this.model[t.model]!==null&&(window.withTimezone?this.model[t.model]=L(this.model[t.model]):this.model[t.model]=this.model[t.model]);break;case"Password":this.model[t.model]="",delete this.$data.rule[t.model];break;case"PasswordGenerate":this.model[t.model]="",delete this.$data.rule[t.model];break}else _.isArray(t.children)&&this.setEditModel(t.children)})},cloneModel(e){A.post(`/lambda/krud/${this.$props.schemaID}/edit/${e}`).then(({data:t})=>{t.status&&(this.model={...this.model,...t.data},delete this.model[this.identity],this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())})},showInformationModal(e,t){this.infoTitle=t,this.infoUrl=e,this.showInfo=!0},getRelation(e){let t=this.schema.findIndex(r=>r.model===e.model),o=t>=0?this.schema[t]:e;return q(o,this.relations)},getFooterButtons(){let e=[];return this.schema.forEach(t=>{t.formType==="FooterButton"&&(t.options.length>=1?e.push({...t}):e.push({...t,options:this.getRelation(t)}))}),e},setAndSend(e,t){let o=this.meta.model+"-"+this.schemaID;this.setIdentityManual(),_.isEmpty(this.$data.rule)?this.subFormValidations.length>=1?this.validateWithSubForm():(this.asyncMode=!0,this.$data.model[e]=t,this.postData()):(this.$data.model[e]=t,this.$refs[o].validate().then(()=>{this.$data.model[e]=t,this.subFormValidations.length>=1?this.validateWithSubForm():(this.asyncMode=!0,this.postData())}).catch(r=>{this.finishFailed()}))},finishFailed(){P.error({message:this.lang.informationIsIncomplete,description:this.formValidationCustomText!=""?this.formValidationCustomText:this.lang.trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder})}}},Ce={mixins:[Ae]},Ve={key:0,class:"dataform-header"},We={key:0},Le={key:0},Oe={key:1,class:"dataform-body"},Ue={class:"two-column-form-left"},je={key:0},Ne={class:"svg-icon align-center"},ze={class:"svg-icon align-center"},qe={class:"two-column-form-right"},Ke={class:"two-column-form"},Ge={key:0},He={class:"svg-icon align-center"},Je={class:"svg-icon align-center"},Ye={key:0,class:"two-column-form-footer"},Qe={key:2,class:"dataform-body"},Xe={key:0},Ze={class:"flex w-full pr-2"},xe={class:"pt-3 flex items-center"},et={class:"flex-grow tab-section"},tt={class:"h-5 w-5 flex"},ot={class:"h-5 w-5 flex"},at={key:3},rt={key:4,class:"dataform-footer"},lt=["src"],st={slot:"footer"};function it(e,t,o,r,h,F){const b=k("a-divider"),g=k("a-col"),c=k("a-row"),w=k("a-tab-pane"),R=k("inline-svg"),C=k("a-button"),O=k("a-tabs"),N=k("fromFooter"),ee=k("a-steps"),te=k("a-spin"),oe=k("a-form"),ae=k("a-drawer");return a(),n("div",{class:V(e.viewMode?"dataform view-mode":"dataform")},[I(oe,{ref:e.meta.model+"-"+e.schemaID,model:e.model,"label-position":e.meta.option.labelPosition,layout:e.meta.option.labelPosition==="top"?"vertical":"horizontal",rules:e.rule,onFinish:e.handleSubmit,onFinishFailed:e.finishFailed,id:"data-form"},{default:d(()=>[e.hideTitle?y("",!0):(a(),n("div",Ve,[T("h3",null,[B(E(e.title?e.title:e.formTitle)+E(e.showID),1),e.showID&&e.model[e.identity]?(a(),n("b",We,[e.model[e.identity]?(a(),n("span",Le,": "+E(e.model[e.identity]),1)):y("",!0)])):y("",!0)])])),!e.loadConfig&&e.use2ColumnLayout?(a(),n("div",Oe,[I(c,{gutter:16},{default:d(()=>[I(g,{span:18},{default:d(()=>[T("div",Ue,[(a(!0),n(v,null,M(e.ui.schema.filter(D=>!D.use2ColumnLayout),D=>(a(),m(c,{gutter:10},{default:d(()=>[D.sectionRenderByTab?y("",!0):(a(!0),n(v,{key:0},M(D.children.filter(l=>e.isVisibleSection(l)),l=>(a(),m(g,{xs:l.span.xs,sm:l.span.sm,md:l.span.md,lg:l.span.lg},{default:d(()=>[T("div",{class:V(l.name!=""?"fieldset":"")},[l.name!=""?(a(),n("legend",je,E(l.name),1)):y("",!0),(a(!0),n(v,null,M(l.children,s=>(a(),m(c,{gutter:10},{default:d(()=>[(a(!0),n(v,null,M(s.children,S=>(a(),m(g,{id:S.id,key:S.index,xs:24,sm:24,md:S.span.md,lg:S.span.lg},{default:d(()=>[S.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(S.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(S.children,i=>(a(),n("span",{key:i.index},[e.isShow(i.model)&&i.formType=="SubForm"&&i.subtype?(a(),m($(e.element(`subform/${i.subtype}`)),{key:i.model,ref_for:!0,ref:"sf"+i.model,url:e.url,viewMode:e.viewMode,model:{form:e.model,component:i.model},form:e.setMeta(i,!0),formula:e.formula,relations:e.relations,asyncMode:e.asyncMode,editMode:e.editMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["url","viewMode","model","form","formula","relations","asyncMode","editMode","validateWithSubForm","validateDataForm"])):y("",!0),e.isShow(i.model)&&i.formType!="SubForm"?(a(),m($(e.element(i.formType)),{key:i,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:i.model},disabled:i.disabled?i.disabled:!1,label:i.label?i.label:`[${i.model}]`,meta:e.setMeta(i),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,relation_data:e.getRelation,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["do_render","asyncMode","editMode","model","disabled","label","meta","identity","url","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","relation_data","validateWithSubForm","validateDataForm"])):y("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),256))],2)]),_:2},1032,["xs","sm","md","lg"]))),256)),D.sectionRenderByTab?(a(),m(O,{key:1,activeKey:e.tabIndex,"onUpdate:activeKey":t[2]||(t[2]=l=>e.tabIndex=l)},{leftExtra:d(()=>[I(C,{onClick:t[0]||(t[0]=l=>e.moveByLeft(e.tabIndex)),disabled:e.tabIndex<=0,style:{height:"36px",width:"36px"},shape:"circle",class:"tab-navigation"},{default:d(()=>[T("span",Ne,[I(R,{src:"/assets/icons/duotone/Navigation/Angle-left.svg"})])]),_:1},8,["disabled"])]),rightExtra:d(()=>[I(C,{onClick:t[1]||(t[1]=l=>e.moveByRight(e.tabIndex)),disabled:D.children.filter(l=>e.isVisibleSection(l)).length<=e.tabIndex+1,style:{height:"36px",width:"36px"},shape:"circle"},{default:d(()=>[T("span",ze,[I(R,{src:"/assets/icons/duotone/Navigation/Angle-right.svg"})])]),_:2},1032,["disabled"])]),default:d(()=>[(a(!0),n(v,null,M(D.children.filter(l=>e.isVisibleSection(l)),(l,s)=>(a(),m(w,{tab:l.name,key:s},{default:d(()=>[(a(!0),n(v,null,M(l.children,S=>(a(),m(c,{key:S.index,gutter:10},{default:d(()=>[(a(!0),n(v,null,M(S.children,i=>(a(),m(g,{id:i.id,key:i.index,xs:24,sm:24,md:i.span.md,lg:i.span.lg},{default:d(()=>[i.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(i.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(i.children,u=>(a(),n("span",{key:u.index},[e.isShow(u.model)&&u.formType=="SubForm"&&u.subtype?(a(),m($(e.element(`subform/${u.subtype}`)),{key:0,ref_for:!0,ref:"sf"+u.model,model:{form:e.model,component:u.model},form:e.setMeta(u,!0),formula:e.formula,url:e.url,viewMode:e.viewMode,relations:e.relations,asyncMode:e.asyncMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["model","form","formula","url","viewMode","relations","asyncMode","validateWithSubForm","validateDataForm","editMode"])):y("",!0),e.isShow(u.model)&&u.formType!="SubForm"?(a(),m($(e.element(u.formType)),{key:1,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:u.model},url:e.url,disabled:u.disabled?u.disabled:!1,label:u.label?u.label:`[${u.model}]`,meta:e.setMeta(u),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,relation_data:e.getRelation},null,8,["do_render","asyncMode","editMode","model","url","disabled","label","meta","identity","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","relation_data"])):y("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),128))]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])):y("",!0),(a(!0),n(v,null,M(D.children.filter(l=>l.type==="col"),l=>(a(),m(g,{xs:l.span.xs,sm:l.span.sm,md:l.span.md,lg:l.span.lg},{default:d(()=>[l.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(l.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(l.children,s=>(a(),n("span",{key:s.index},[e.isShow(s.model)&&s.formType==="SubForm"&&s.subtype?(a(),m($(e.element(`subform/${s.subtype}`)),{key:s.model,ref_for:!0,ref:"sf"+s.model,label:s.label?s.label:`[${s.model}]`,model:{form:e.model,component:s.model},form:e.setMeta(s,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,url:e.url,viewMode:e.viewMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["label","model","form","relations","asyncMode","formula","schemaID","url","viewMode","validateWithSubForm","validateDataForm","editMode"])):y("",!0),e.isShow(s.model)&&s.formType!=="SubForm"?(a(),m($(e.element(s.formType)),{key:s.model,do_render:e.do_render,editMode:e.editMode,disabled:s.disabled?s.disabled:!1,model:{form:e.model,component:s.model},label:s.label?s.label:`[${s.model}]`,meta:e.setMeta(s),identity:e.identity,rule:e.rule[s.model],asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,url:e.url,relation_data:e.getRelation},null,8,["do_render","editMode","disabled","model","label","meta","identity","rule","asyncMode","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","url","relation_data"])):y("",!0)]))),128))]),_:2},1032,["xs","sm","md","lg"]))),256))]),_:2},1024))),256))])]),_:1}),I(g,{span:6},{default:d(()=>[T("div",qe,[T("div",Ke,[(a(!0),n(v,null,M(e.ui.schema.filter(D=>D.use2ColumnLayout),D=>(a(),m(c,{gutter:10},{default:d(()=>[D.sectionRenderByTab?y("",!0):(a(!0),n(v,{key:0},M(D.children.filter(l=>e.isVisibleSection(l)),l=>(a(),m(g,{xs:l.span.xs,sm:l.span.sm,md:l.span.md,lg:l.span.lg},{default:d(()=>[T("div",{class:V(l.name!=""?"fieldset":"")},[l.name!=""?(a(),n("legend",Ge,E(l.name),1)):y("",!0),(a(!0),n(v,null,M(l.children,s=>(a(),m(c,{gutter:10},{default:d(()=>[(a(!0),n(v,null,M(s.children,S=>(a(),m(g,{id:S.id,key:S.index,xs:24,sm:24,md:S.span.md,lg:S.span.lg},{default:d(()=>[S.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(S.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(S.children,i=>(a(),n("span",{key:i.index},[e.isShow(i.model)&&i.formType=="SubForm"&&i.subtype?(a(),m($(e.element(`subform/${i.subtype}`)),{key:i.model,ref_for:!0,ref:"sf"+i.model,url:e.url,model:{form:e.model,component:i.model},form:e.setMeta(i,!0),formula:e.formula,relations:e.relations,asyncMode:e.asyncMode,editMode:e.editMode,viewMode:e.viewMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["url","model","form","formula","relations","asyncMode","editMode","viewMode","validateWithSubForm","validateDataForm"])):y("",!0),e.isShow(i.model)&&i.formType!="SubForm"?(a(),m($(e.element(i.formType)),{key:i,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:i.model},disabled:i.disabled?i.disabled:!1,label:i.label?i.label:`[${i.model}]`,meta:e.setMeta(i),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,relation_data:e.getRelation,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["do_render","asyncMode","editMode","model","disabled","label","meta","identity","url","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","relation_data","validateWithSubForm","validateDataForm"])):y("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),256))],2)]),_:2},1032,["xs","sm","md","lg"]))),256)),D.sectionRenderByTab?(a(),m(O,{key:1,activeKey:e.tabIndex,"onUpdate:activeKey":t[5]||(t[5]=l=>e.tabIndex=l)},{leftExtra:d(()=>[I(C,{onClick:t[3]||(t[3]=l=>e.moveByLeft(e.tabIndex)),disabled:e.tabIndex<=0,style:{height:"36px",width:"36px"},shape:"circle",class:"tab-navigation"},{default:d(()=>[T("span",He,[I(R,{src:"/assets/icons/duotone/Navigation/Angle-left.svg"})])]),_:1},8,["disabled"])]),rightExtra:d(()=>[I(C,{onClick:t[4]||(t[4]=l=>e.moveByRight(e.tabIndex)),disabled:D.children.filter(l=>e.isVisibleSection(l)).length<=e.tabIndex+1,style:{height:"36px",width:"36px"},shape:"circle"},{default:d(()=>[T("span",Je,[I(R,{src:"/assets/icons/duotone/Navigation/Angle-right.svg"})])]),_:2},1032,["disabled"])]),default:d(()=>[(a(!0),n(v,null,M(D.children.filter(l=>e.isVisibleSection(l)),(l,s)=>(a(),m(w,{tab:l.name,key:s},{default:d(()=>[(a(!0),n(v,null,M(l.children,S=>(a(),m(c,{key:S.index,gutter:10},{default:d(()=>[(a(!0),n(v,null,M(S.children,i=>(a(),m(g,{id:i.id,key:i.index,xs:24,sm:24,md:i.span.md,lg:i.span.lg},{default:d(()=>[i.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(i.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(i.children,u=>(a(),n("span",{key:u.index},[e.isShow(u.model)&&u.formType=="SubForm"&&u.subtype?(a(),m($(e.element(`subform/${u.subtype}`)),{key:0,ref_for:!0,ref:"sf"+u.model,model:{form:e.model,component:u.model},form:e.setMeta(u,!0),formula:e.formula,url:e.url,relations:e.relations,viewMode:e.viewMode,asyncMode:e.asyncMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["model","form","formula","url","relations","viewMode","asyncMode","validateWithSubForm","validateDataForm","editMode"])):y("",!0),e.isShow(u.model)&&u.formType!="SubForm"?(a(),m($(e.element(u.formType)),{key:1,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:u.model},url:e.url,disabled:u.disabled?u.disabled:!1,label:u.label?u.label:`[${u.model}]`,meta:e.setMeta(u),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,relation_data:e.getRelation},null,8,["do_render","asyncMode","editMode","model","url","disabled","label","meta","identity","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","relation_data"])):y("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),128))]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])):y("",!0),(a(!0),n(v,null,M(D.children.filter(l=>l.type==="col"),l=>(a(),m(g,{xs:l.span.xs,sm:l.span.sm,md:l.span.md,lg:l.span.lg},{default:d(()=>[l.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(l.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(l.children,s=>(a(),n("span",{key:s.index},[e.isShow(s.model)&&s.formType==="SubForm"&&s.subtype?(a(),m($(e.element(`subform/${s.subtype}`)),{key:s.model,ref_for:!0,ref:"sf"+s.model,label:s.label?s.label:`[${s.model}]`,model:{form:e.model,component:s.model},form:e.setMeta(s,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,viewMode:e.viewMode,url:e.url,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["label","model","form","relations","asyncMode","formula","schemaID","viewMode","url","validateWithSubForm","validateDataForm","editMode"])):y("",!0),e.isShow(s.model)&&s.formType!=="SubForm"?(a(),m($(e.element(s.formType)),{key:s.model,do_render:e.do_render,editMode:e.editMode,disabled:s.disabled?s.disabled:!1,model:{form:e.model,component:s.model},label:s.label?s.label:`[${s.model}]`,meta:e.setMeta(s),identity:e.identity,rule:e.rule[s.model],asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,url:e.url,relation_data:e.getRelation},null,8,["do_render","editMode","disabled","model","label","meta","identity","rule","asyncMode","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","url","relation_data"])):y("",!0)]))),128))]),_:2},1032,["xs","sm","md","lg"]))),256))]),_:2},1024))),256))]),e.viewMode?y("",!0):(a(),n("div",Ye,[I(N,{withBackButton:e.withBackButton,save_btn_text:e.save_btn_text,asyncMode:e.asyncMode,lang:e.lang,extraButtons:e.extraButtons,schemaID:e.schemaID,editMode:e.editMode,disableReset:e.disableReset,handleReset:e.handleReset,getFooterButtons:e.getFooterButtons,setAndSend:e.setAndSend,createWithTemplate:e.createWithTemplate},null,8,["withBackButton","save_btn_text","asyncMode","lang","extraButtons","schemaID","editMode","disableReset","handleReset","getFooterButtons","setAndSend","createWithTemplate"])]))])]),_:1})]),_:1})])):y("",!0),!e.loadConfig&&!e.use2ColumnLayout?(a(),n("div",Qe,[(a(!0),n(v,null,M(e.ui.schema,D=>(a(),m(c,{gutter:10},{default:d(()=>[D.sectionRenderByTab?y("",!0):(a(!0),n(v,{key:0},M(D.children.filter(l=>e.isVisibleSection(l)),l=>(a(),m(g,{span:l.span.md},{default:d(()=>[T("div",{class:V(l.name!=""?"fieldset":"")},[l.name!=""?(a(),n("legend",Xe,E(l.name),1)):y("",!0),(a(!0),n(v,null,M(l.children,s=>(a(),m(c,{gutter:10},{default:d(()=>[(a(!0),n(v,null,M(s.children,S=>(a(),m(g,{id:S.id,key:S.index,xs:24,sm:24,md:S.span.md,lg:S.span.lg},{default:d(()=>[S.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(S.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(S.children,i=>(a(),n("span",{key:i.index},[e.isShow(i.model)&&i.formType=="SubForm"&&i.subtype?(a(),m($(e.element(`subform/${i.subtype}`)),{key:i.model,ref_for:!0,ref:"sf"+i.model,url:e.url,model:{form:e.model,component:i.model},form:e.setMeta(i,!0),formula:e.formula,relations:e.relations,viewMode:e.viewMode,asyncMode:e.asyncMode,editMode:e.editMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["url","model","form","formula","relations","viewMode","asyncMode","editMode","validateWithSubForm","validateDataForm"])):y("",!0),e.isShow(i.model)&&i.formType!="SubForm"?(a(),m($(e.element(i.formType)),{key:i,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:i.model},disabled:i.disabled?i.disabled:!1,label:i.label?i.label:`[${i.model}]`,meta:e.setMeta(i),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,relation_data:e.getRelation,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["do_render","asyncMode","editMode","model","disabled","label","meta","identity","url","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","relation_data","validateWithSubForm","validateDataForm"])):y("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),256))],2)]),_:2},1032,["span"]))),256)),D.sectionRenderByTab?(a(),m(g,{key:1},{default:d(()=>[T("div",Ze,[T("div",xe,[T("div",null,[I(ee,{direction:"vertical",size:"small",current:e.tabIndex,"onUpdate:current":t[6]||(t[6]=l=>e.tabIndex=l),items:e.getStepData(D)},null,8,["current","items"])])]),T("div",et,[I(O,{activeKey:e.tabIndex,"onUpdate:activeKey":t[9]||(t[9]=l=>e.tabIndex=l)},{leftExtra:d(()=>[I(C,{onClick:t[7]||(t[7]=l=>e.moveByLeft(e.tabIndex)),disabled:e.tabIndex<=0,shape:"circle",class:"tab-navigation"},{default:d(()=>[T("span",tt,[I(R,{class:"w-full",src:"/assets/icons/duotone/Navigation/Angle-left.svg"})])]),_:1},8,["disabled"])]),rightExtra:d(()=>[I(C,{onClick:t[8]||(t[8]=l=>e.moveByRight(e.tabIndex)),disabled:D.children.filter(l=>e.isVisibleSection(l)).length<=e.tabIndex+1,style:{height:"36px",width:"36px"},shape:"circle"},{default:d(()=>[T("span",ot,[I(R,{class:"w-full",src:"/assets/icons/duotone/Navigation/Angle-right.svg"})])]),_:2},1032,["disabled"])]),default:d(()=>[(a(!0),n(v,null,M(D.children.filter(l=>e.isVisibleSection(l)),(l,s)=>(a(),m(w,{class:"max-w-full",tab:l.name,key:s},{default:d(()=>[(a(!0),n(v,null,M(l.children,S=>(a(),m(c,{key:S.index,gutter:10},{default:d(()=>[(a(!0),n(v,null,M(S.children,i=>(a(),m(g,{id:i.id,key:i.index,xs:24,sm:24,md:i.span.md,lg:i.span.lg},{default:d(()=>[i.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(i.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(i.children,u=>(a(),n("span",{key:u.index},[e.isShow(u.model)&&u.formType=="SubForm"&&u.subtype?(a(),m($(e.element(`subform/${u.subtype}`)),{key:0,ref_for:!0,ref:"sf"+u.model,model:{form:e.model,component:u.model},form:e.setMeta(u,!0),formula:e.formula,url:e.url,relations:e.relations,asyncMode:e.asyncMode,viewMode:e.viewMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["model","form","formula","url","relations","asyncMode","viewMode","validateWithSubForm","validateDataForm","editMode"])):y("",!0),e.isShow(u.model)&&u.formType!="SubForm"?(a(),m($(e.element(u.formType)),{key:1,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:u.model},url:e.url,disabled:u.disabled?u.disabled:!1,label:u.label?u.label:`[${u.model}]`,meta:e.setMeta(u),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,relation_data:e.getRelation},null,8,["do_render","asyncMode","editMode","model","url","disabled","label","meta","identity","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","relation_data"])):y("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),128))]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])])])]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(D.children.filter(l=>l.type==="col"),l=>(a(),m(g,{span:l.span.md},{default:d(()=>[l.name?(a(),m(b,{key:0,orientation:"left",class:"form-divider"},{default:d(()=>[B(E(l.name),1)]),_:2},1024)):y("",!0),(a(!0),n(v,null,M(l.children,s=>(a(),n("span",{key:s.index},[e.isShow(s.model)&&s.formType==="SubForm"&&s.subtype?(a(),m($(e.element(`subform/${s.subtype}`)),{key:s.model,ref_for:!0,ref:"sf"+s.model,label:s.label?s.label:`[${s.model}]`,model:{form:e.model,component:s.model},form:e.setMeta(s,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,viewMode:e.viewMode,url:e.url,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["label","model","form","relations","asyncMode","formula","schemaID","viewMode","url","validateWithSubForm","validateDataForm","editMode"])):y("",!0),e.isShow(s.model)&&s.formType!=="SubForm"?(a(),m($(e.element(s.formType)),{key:s.model,do_render:e.do_render,editMode:e.editMode,disabled:s.disabled?s.disabled:!1,model:{form:e.model,component:s.model},label:s.label?s.label:`[${s.model}]`,meta:e.setMeta(s),identity:e.identity,rule:e.rule[s.model],asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,url:e.url,relation_data:e.getRelation},null,8,["do_render","editMode","disabled","model","label","meta","identity","rule","asyncMode","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","url","relation_data"])):y("",!0)]))),128))]),_:2},1032,["span"]))),256))]),_:2},1024))),256))])):y("",!0),e.loadConfig?(a(),n("div",at,[e.hideLoader?y("",!0):(a(),m(te,{key:0,fix:""}))])):y("",!0),!e.loadConfig&&!e.viewMode&&!e.use2ColumnLayout&&!e.hideFooter&&!e.noFooter?(a(),n("div",rt,[I(N,{withBackButton:e.withBackButton,save_btn_text:e.save_btn_text,asyncMode:e.asyncMode,lang:e.lang,extraButtons:e.extraButtons,schemaID:e.schemaID,editMode:e.editMode,disableReset:e.disableReset,handleReset:e.handleReset,getFooterButtons:e.getFooterButtons,setAndSend:e.setAndSend,createWithTemplate:e.createWithTemplate},null,8,["withBackButton","save_btn_text","asyncMode","lang","extraButtons","schemaID","editMode","disableReset","handleReset","getFooterButtons","setAndSend","createWithTemplate"])])):y("",!0)]),_:1},8,["model","label-position","layout","rules","onFinish","onFinishFailed"]),I(ae,{class:"info-modal",open:e.showInfo,"onUpdate:open":t[11]||(t[11]=D=>e.showInfo=D),title:e.infoTitle,width:"860px"},{default:d(()=>[T("iframe",{src:e.infoUrl,frameborder:"0"},null,8,lt),T("div",st,[I(C,{type:"primary",size:"large",onClick:t[10]||(t[10]=D=>e.showInfo=!1)},{default:d(()=>[B(E(e.lang.close),1)]),_:1})])]),_:1},8,["open","title"])],2)}const dt=Q(Ce,[["render",it]]),yt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));export{yt as D,Ie as a,_e as d,ne as e};
