import{aD as ee,m as te,aE as oe}from"./C_206FfQ.js";import{u as re,_ as ie}from"./BEwySfHS.js";import{K as ae,c as ne}from"./DI_4Y3es.js";import{f as g,k as se,w as de,S as le,y as v,z as l,A as w,C as S,u as e,E as y,D as ce,F as u,B as i,H as ue,a8 as q}from"./BsiC3VYZ.js";import"./BgMGjKYI.js";import"./BYTvHWBW.js";import"./Ds1lc8d-.js";import"./BHcF-zQ5.js";const me={class:"card drawer-wrappper window-crud"},he={class:"offcanvas-template"},fe={class:"crud-page"},pe={class:"crud-page-body"},ge={key:0,class:"ant-drawer"},ve={class:"ant-drawer-content"},we={class:"ant-drawer-wrapper-body"},Se={class:"ant-drawer-header"},ye={class:"ant-drawer-header-title flex p-4 border-b"},Ce={class:"ant-drawer-title flex-grow"},_e=i("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[i("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[i("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1),be=[_e],xe={class:"ant-drawer-body"},Ee={key:1,id:"drawer-container"},et={__name:"window",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(t){const{t:D}=ee(),C=t,_=g(null),b=g(null),n=g(!1),d=te(),r=oe();function U(){}const I=se(()=>r.fullPath),p=()=>{n.value=!1,s.value=!1,d.push({query:m()})},B=()=>{let o=m();o.add=!0,d.push({query:o}),n.value=!0},x=o=>{let a=m();a.edit=!0,a.id=o,r.params.id&&r.query.edit?r.params.id.toString()!==o.toString()&&d.push({query:a}):d.push({query:a})},L=o=>{let a=m();a.clone=!0,a.id=o,r.params.id&&r.query.edit?r.params.id.toString()!==o.toString()&&d.push({query:a}):d.push({query:a})},E=()=>{p()},R=()=>{let o=r.query.add,a=r.query.edit,f=r.query.clone,c=r.query.id;o==="true"||o===!0?n.value=!0:a==="true"||a===!0?(h.value=c,s.value=!0,n.value=!0):f==="true"||f===!0?(h.value=c,V.value=c,s.value=!0,n.value=!0):(h.value=0,s.value=!1,n.value=!1)},m=()=>{let o={};return r.query.sort&&(o.sort=r.query.sort),r.query.order&&(o.order=r.query.order),r.query.paginate&&(o.paginate=r.query.paginate),r.query.currentPage&&(o.currentPage=r.query.currentPage),o},{closeByBtn:Re,gridSrc:ke,formSrc:qe,editMode:s,searchModel:De,form_width:Ue,exportLoading:N,isPrint:P,isExcel:F,isRefresh:M,isSave:O,rowId:h,cloneID:V,visibleDataForm:Ie,isExcelUpload:$,excelUploadCustomUrl:j,showID:Be,hasVNavSlot:Le,hasNavSlot:Ne,hasLeftSlot:Pe,url:k,lang:Fe,view:A,edit:Me,clone:Oe,quickEdit:K,refresh:H,search:T,stopLoading:Ve,exportExcel:z,print:Q,excelUploadMethod:G,save:J,onReady:W,onSuccess:$e,onError:X,mediaRecorder:je,recordedChunks:Ae,showScreenRecordConfirm:Ke,startRecording:He,stopRecording:Te,changeKrudTool:Y}=re(C,_,b,x,E,U,D,C.CRUD_ID);return de(I,()=>{R()}),le(()=>{R()}),(o,a)=>{const f=v("portal"),c=v("dataform"),Z=v("datagrid");return l(),w("div",me,[S(e(ie),{parent:t.parent,title:t.title,addAction:B,"hide-action":n.value,permissions:t.permissions,CRUD_ID:t.CRUD_ID},null,8,["parent","title","hide-action","permissions","CRUD_ID"]),n.value?u("",!0):(l(),y(f,{key:0,to:"header-right"},{default:ce(()=>[S(e(ae),{search:e(T),refresh:e(H),exportExcel:e(z),exportLoading:e(N),print:e(Q),save:e(J),isPrint:e(P),isExcel:e(F),isExcelUpload:e($),excelUploadCustomUrl:e(j),excelUploadMethod:e(G),isRefresh:e(M),isSave:e(O),isSearch:!1},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1})),i("section",he,[i("div",fe,[i("div",pe,[n.value?(l(),w("div",ge,[i("div",ve,[i("div",we,[i("div",Se,[i("div",ye,[i("div",Ce,ue(t.title),1),i("button",{"aria-label":"Close",onClick:p,class:"ant-drawer-close"},be)])]),i("div",xe,[i("div",{class:q(t.withCrudLog&&e(s)?"with-crud-log":"crud-form")},[S(c,{ref_key:"dataForm",ref:_,hideTitle:!0,schemaID:t.form,title:t.title,url:e(k),editMode:e(s),onSuccess:E,onReady:e(W),do_render:n.value,permissions:t.permissions,page_id:t.page_id,user_condition:t.user_condition?t.user_condition.formCondition:null,onError:e(X),close:p,changeKrudTool:e(Y)},null,8,["schemaID","title","url","editMode","onReady","do_render","permissions","page_id","user_condition","onError","changeKrudTool"]),t.withCrudLog&&e(s)?(l(),y(e(ne),{key:0,form:t.form,rowId:e(h),grid:t.grid},null,8,["form","rowId","grid"])):u("",!0)],2)])])])])):u("",!0),n.value?u("",!0):(l(),w("div",Ee,[i("div",{class:q(n.value?"dg-flex open-drawer":"dg-flex")},[t.permissions&&t.permissions.r?(l(),y(Z,{key:0,ref_key:"dataGrid",ref:b,url:e(k),schemaID:t.grid,paginate:50,fnClone:L,fnEdit:x,fnQuickEdit:e(K),fnView:e(A),actions:o.$props.actions,dblClick:o.$props.dbClickAction,onRowSelect:o.$props.onRowSelect,permissions:t.permissions,page_id:t.page_id,custom_condition:o.$props.custom_condition?o.$props.custom_condition:null,user_condition:t.user_condition?t.user_condition.gridCondition:null},null,8,["url","schemaID","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition"])):u("",!0)],2)]))])])])])}}};export{et as default};
