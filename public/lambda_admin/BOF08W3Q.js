import{_ as te,aD as oe}from"./C_206FfQ.js";import{u as ie,_ as ne}from"./BEwySfHS.js";import{K as se,c as ae}from"./DI_4Y3es.js";import{f as r,y as h,z as l,A as C,C as c,u as e,D as re,B as o,a8 as f,E,F as p,H as de,G as le,J as ce,L as ue}from"./BsiC3VYZ.js";import"./BgMGjKYI.js";import"./BYTvHWBW.js";import"./Ds1lc8d-.js";import"./BHcF-zQ5.js";const b=t=>(ce("data-v-82dab718"),t=t(),ue(),t),me={class:"krud-drawer"},he={class:"offcanvas-template"},fe={class:"crud-page"},pe={class:"crud-page-body"},ge={id:"drawer-container"},ve={id:"left_panel"},we=b(()=>o("div",{class:"resizer"},null,-1)),_e={class:"ant-drawer-content-wrapper"},Se={class:"ant-drawer-content"},xe={class:"ant-drawer-wrapper-body"},Ce={class:"ant-drawer-header"},Ee={key:0,class:"ant-drawer-header-title flex p-4 border-b"},be={class:"ant-drawer-title flex-grow"},ye=b(()=>o("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[o("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[o("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1)),Re=[ye],Ie={class:"ant-drawer-body"},De={__name:"drawer",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(t){const{t:y}=oe(),g=t,v=r(null),w=r(null),n=r(!1),a=r(!1),u=r(0);function m(){a.value=!1,d.value=!1,n.value.style.width="0px",n.value.style.flex="0 0 0px"}function _(){if(!a.value){a.value=!0;let i=(window.innerWidth-300)/100,s=parseInt(i*40);n.value.style.width=s+"px",n.value.style.flex=`0 0 ${s}px`}}function R(){_()}function I(){m()}function D(){}const{closeByBtn:ke,gridSrc:Le,formSrc:Ue,editMode:d,searchModel:Be,form_width:Ne,exportLoading:k,isPrint:L,isExcel:U,isRefresh:B,isSave:N,rowId:F,cloneID:Fe,visibleDataForm:Me,isExcelUpload:M,excelUploadCustomUrl:O,showID:Oe,hasVNavSlot:$e,hasNavSlot:ze,hasLeftSlot:Ae,url:S,lang:Pe,view:$,edit:z,clone:A,quickEdit:P,refresh:V,search:j,stopLoading:Ve,exportExcel:K,print:H,excelUploadMethod:T,save:G,onReady:Q,onSuccess:Z,onError:q,mediaRecorder:je,recordedChunks:Ke,showScreenRecordConfirm:He,startRecording:Te,stopRecording:Ge,changeKrudTool:J}=ie(g,v,w,R,I,D,y,g.CRUD_ID);function x(i){window.getSelection().removeAllRanges();const s=u.value-i.x;u.value=i.x,n.value.style.width=parseInt(getComputedStyle(n.value,"").width)+s+"px",n.value.style.flex=`0 0 ${parseInt(getComputedStyle(n.value,"").width)+s}px`}function W(){n.value.addEventListener("mousedown",s=>{s.offsetX<4&&(u.value=s.x,document.addEventListener("mousemove",x,!1))},!1),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",x,!1)},!1)}return onMounted(()=>{W()}),(i,s)=>{const X=h("portal"),Y=h("datagrid"),ee=h("dataform");return l(),C(le,null,[c(e(ne),{parent:t.parent,title:t.title,addAction:_,permissions:t.permissions,CRUD_ID:t.CRUD_ID},null,8,["parent","title","permissions","CRUD_ID"]),c(X,{to:"header-right"},{default:re(()=>[c(e(se),{search:e(j),refresh:e(V),exportExcel:e(K),exportLoading:e(k),print:e(H),save:e(G),isPrint:e(L),isExcel:e(U),isExcelUpload:e(M),excelUploadCustomUrl:e(O),excelUploadMethod:e(T),isRefresh:e(B),isSave:e(N)},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),o("div",me,[o("section",he,[o("div",fe,[o("div",pe,[o("div",ge,[o("div",ve,[o("div",{class:f(a.value?"dg-flex open-drawer":"dg-flex")},[t.permissions&&t.permissions.r?(l(),E(Y,{key:0,ref_key:"dataGrid",ref:w,url:e(S),schemaID:t.grid,paginate:50,fnClone:e(A),fnEdit:e(z),fnQuickEdit:e(P),fnView:e($),actions:i.$props.actions,dblClick:i.$props.dbClickAction,onRowSelect:i.$props.onRowSelect,permissions:t.permissions,page_id:t.page_id,custom_condition:i.$props.custom_condition?i.$props.custom_condition:null,user_condition:t.user_condition?t.user_condition.gridCondition:null,changeKrudToo:e(J)},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition","changeKrudToo"])):p("",!0)],2)]),o("div",{id:"right_panel",class:f(["ant-drawer",a.value?"show-panel":"hide-panel"]),ref_key:"panel",ref:n},[we,o("div",_e,[o("div",Se,[o("div",xe,[o("div",Ce,[a.value?(l(),C("div",Ee,[o("div",be,de(t.title),1),o("button",{"aria-label":"Close",onClick:m,class:"ant-drawer-close"},Re)])):p("",!0)]),o("div",Ie,[o("div",{class:f(t.withCrudLog&&e(d)?"with-crud-log":"crud-form")},[c(ee,{ref_key:"dataForm",ref:v,hideTitle:!0,schemaID:t.form,title:t.title,url:e(S),editMode:e(d),onSuccess:e(Z),onReady:e(Q),do_render:a.value,permissions:t.permissions,page_id:t.page_id,user_condition:t.user_condition?t.user_condition.formCondition:null,onError:e(q),close:m},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError"]),t.withCrudLog&&e(d)?(l(),E(e(ae),{key:0,form:t.form,rowId:e(F),grid:t.grid},null,8,["form","rowId","grid"])):p("",!0)],2)])])])])],2)])])])])])],64)}}},tt=te(De,[["__scopeId","data-v-82dab718"]]);export{tt as default};
