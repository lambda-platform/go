import{_ as c,s as t,L as d,U as u,Y as r,Z as p,R as m,P as _,M as g,K as f,$ as h,u as S,a0 as b,a1 as v,o as E,k as L,a2 as w,a3 as l}from"./entry.44501f88.js";import{_ as C}from"./dynamic-import-helper.be004503.js";const I={props:["selectedLang"],name:"login",data(){return{lambda:t.get(d)}},beforeCreate(){},methods:{onSuccess(e){e.status&&(this.isSuccess=!0,e.oauth?window.location.replace("/oauth2/authorize"):(t.set(u,{...e.data,jwt:void 0}),window.init={user:e.data,firebase_config:this.lambda.notify.firebaseConfig,microserviceSettings:[]},t.set(r,e.token,7*24*60*60*1e3),p(e.token),e.data.role===1?window.location.replace(e.path):m.get("/get-permissions").then(s=>{if(s.data.status){t.set(_,s.data.permission.permissions),t.set(g,s.data.permission.menu),t.set(f,s.data.permission.kruds);let i=h(s.data.permission.menu,null,s.data.permission.kruds);t.set(S,i),s.data.permission.microserviceSettings&&(t.set(b,s.data.permission.microserviceSettings),window.init.microserviceSettings=s.data.permission.microserviceSettings);let o=e.path.replaceAll("#","");if(o.includes("/p/")){let a=o.split("/");a[a.length-1],this.$router.replace("/admin")}else this.$router.replace("/admin")}})))},renderTheme(){return v(()=>C(Object.assign({"../../../node_modules/@lambda-platform/lambda-vue/src/modules/agent/views/theme/aside/auth/login.vue":()=>l(()=>import("./login.159e3b27.js"),["./login.159e3b27.js","./nuxt-link.296568ef.js","./entry.44501f88.js","./entry.74218030.css"],import.meta.url),"../../../node_modules/@lambda-platform/lambda-vue/src/modules/agent/views/theme/default/auth/login.vue":()=>l(()=>import("./login.9612a603.js"),["./login.9612a603.js","./entry.44501f88.js","./entry.74218030.css"],import.meta.url)}),`../../../node_modules/@lambda-platform/lambda-vue/src/modules/agent/views/theme/${this.lambda.theme}/auth/login.vue`))}},mounted(){t.get(r)&&m.get("/get-permissions").then(({data:e})=>{e.status&&this.$router.replace("/admin")}).catch(e=>{console.log(e)})}};function R(e,s,i,o,a,n){return E(),L(w(n.renderTheme()),{onSuccess:n.onSuccess,selectedLang:i.selectedLang,lambda:a.lambda},null,40,["onSuccess","selectedLang","lambda"])}const O=c(I,[["render",R]]);export{O as default};
