import{_ as v,h as f,j as h}from"./BGcy_aHF.js";import{E as o,F as d,G as e,N as c,al as g,aa as a,am as n,L as u,ak as k}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";const _={props:["selectedLang"],name:"aside-password-reset",data(){return{loading:!1,isSuccess:!1,isError:!1,errorMsg:"",successMsg:"",credentials:{code:null,email:null,password:null,password_confirm:null}}},mounted(){(this._.provides[h]||this.$route).query.email&&(this.credentials.email=(this._.provides[h]||this.$route).query.email)},computed:{lang(){const r=["passwordReset","passwordResetCode","email","password","passwordConfirm"];return r.reduce((s,p,m)=>(s[p]=this.$t("user."+r[m]),s),{})}},methods:{onSubmit(){this.isSuccess=!1,this.isError=!1,this.loading||(this.loading=!0,f.post("/auth/password-reset",{...this.credentials,lang:this.selectedLang}).then(({data:r})=>{setTimeout(()=>{this.loading=!1,r.status?(this.isSuccess=!0,this.successMsg=r.msg,setTimeout(()=>{this.$router.push("login")},2e3)):(this.isError=!0,this.errorMsg=this.lang.emailSendError)},1e3)}).catch(r=>{this.errorMsg=r.response.data.error,setTimeout(()=>{this.loading=!1,this.isError=!0},1e3)}))}}},w={class:"form-wrap"},b={class:"form-content"},y={class:"form-element input"},S=["placeholder"],M={class:"form-element input"},x=["placeholder"],E={class:"form-element input"},R=["disabled","placeholder"],V={class:"form-element input"},C=["disabled","placeholder"],T={class:"form-element"},N=["disabled"],U={id:"submitTxt"},B={class:"loader"},L={key:0,class:"sk-fading-circle"},q={id:"msg"},D={key:0,class:"success"},F={key:1,class:"error"};function G(r,s,p,m,i,t){return d(),o("div",w,[e("div",b,[e("h2",null,c(t.lang.passwordReset),1),e("form",{onSubmit:s[4]||(s[4]=g((...l)=>t.onSubmit&&t.onSubmit(...l),["prevent"])),method:"post",class:"login-form"},[e("div",y,[a(e("input",{type:"text",id:"email","onUpdate:modelValue":s[0]||(s[0]=l=>i.credentials.email=l),name:"email",autocomplete:"off",placeholder:t.lang.email},null,8,S),[[n,i.credentials.email]]),s[5]||(s[5]=e("span",{class:"icon user"},null,-1))]),e("div",M,[a(e("input",{type:"text",id:"code","onUpdate:modelValue":s[1]||(s[1]=l=>i.credentials.code=l),name:"code",autocomplete:"off",placeholder:t.lang.passwordResetCode},null,8,x),[[n,i.credentials.code]]),s[6]||(s[6]=e("span",{class:"icon pass"},null,-1))]),e("div",E,[a(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=l=>i.credentials.password=l),disabled:i.loading,placeholder:t.lang.password},null,8,R),[[n,i.credentials.password]]),s[7]||(s[7]=e("span",{class:"icon pass"},null,-1))]),e("div",V,[a(e("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=l=>i.credentials.password_confirm=l),disabled:i.loading,placeholder:t.lang.passwordConfirm},null,8,C),[[n,i.credentials.password_confirm]]),s[8]||(s[8]=e("span",{class:"icon pass"},null,-1))]),e("div",T,[e("button",{id:"submit",class:"button",disabled:i.loading,style:{width:"100%"}},[e("span",U,c(t.lang.passwordReset),1),e("span",B,[i.loading?(d(),o("div",L,s[9]||(s[9]=[k('<div class="sk-circle1 sk-circle"></div><div class="sk-circle2 sk-circle"></div><div class="sk-circle3 sk-circle"></div><div class="sk-circle4 sk-circle"></div><div class="sk-circle5 sk-circle"></div><div class="sk-circle6 sk-circle"></div><div class="sk-circle7 sk-circle"></div><div class="sk-circle8 sk-circle"></div><div class="sk-circle9 sk-circle"></div><div class="sk-circle10 sk-circle"></div><div class="sk-circle11 sk-circle"></div><div class="sk-circle12 sk-circle"></div>',12)]))):u("",!0)])],8,N)])],32),e("div",q,[i.isSuccess?(d(),o("span",D,c(i.successMsg),1)):u("",!0),i.isError?(d(),o("span",F,c(i.errorMsg),1)):u("",!0)])])])}const H=v(_,[["render",G]]);export{H as default};
