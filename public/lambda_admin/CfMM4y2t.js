const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DaALNWcr.js","./DugTeqwv.js","./2tDPZFmp.js","./3ncfVO38.js","./DXHvmmg6.js","./CYxtEuKL.js","./BYTvHWBW.js","./entry.B7UzjX_6.css","./E-vCJoGW.js","./DB_Q19hh.js","./C_b9hiEn.js","./DEm_64i2.js","./D8NYqBdQ.js","./Bsy1Mvgc.js","./B4FiMg9Z.js","./CByKS65z.js","./D57VkClh.js","./iIsG8wCV.js","./Bwt4r9gx.js","./CcGgegwE.js","./IzM-PG-_.js","./BG8ERpbo.js","./CMeUi3dk.js","./CxnZSiA4.js","./BxVzkwQr.js","./B3K6t1bN.js","./B0vOKLtE.js","./BBhUD-zQ.js","./BsIQGUYT.js","./CK.DqvfHUNw.css","./DR5euW2w.js","./B10-oDmZ.js","./rVq9QEKD.js","./Cavzshjs.js","./DwEy7tSK.js","./Geographic.DNKWWFuc.css","./BqOYy08_.js","./CP37YqLZ.js","./BvOIBocS.js","./DODUxKlZ.js","./DboFlFlw.js","./CeqpqK5b.js","./DgtPSQKQ.js","./DcWILxfe.js","./csDd2HkO.js","./D5lQ99ZA.js","./BBPtxV6d.js","./B4Hf38nZ.js","./W2YyJjOD.js","./iMV5sZSd.js","./D2DJA0mz.js","./MGeqJhhR.js","./UiEPkKXc.js","./Bg_jtIqt.js","./DKVppfui.js","./BSeMM-4A.js","./qu4CTJNJ.js","./Biz2k3go.js","./D_lJPBGm.js","./Cea23zzz.js","./CdwMn0UZ.js","./CG47GrTb.js","./B9YQo4Ut.js"])))=>i.map(i=>d[i]);
import{d as p,h as A,_ as X}from"./3ncfVO38.js";import{C as y,i as ie,D as k,E as m,F as r,J as u,L as b,H as I,I as n,O as R,M,U as F,G as T,a2 as z,V,N as E,A as P,ah as B}from"./DXHvmmg6.js";import{i as se,e as le}from"./2tDPZFmp.js";import{a as q,i as de,g as ne}from"./CG47GrTb.js";import{d as W}from"./B4FiMg9Z.js";import{g as K}from"./CByKS65z.js";const G=[{element:"Text",component:y(()=>p(()=>import("./DaALNWcr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url))},{element:"Select",component:y(()=>p(()=>import("./E-vCJoGW.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url))},{element:"ISelect",component:y(()=>p(()=>import("./E-vCJoGW.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url))},{element:"TreeSelect",component:y(()=>p(()=>import("./DB_Q19hh.js"),__vite__mapDeps([9,1,2,3,4,5,6,7]),import.meta.url))},{element:"Number",component:y(()=>p(()=>import("./C_b9hiEn.js"),__vite__mapDeps([10,1,2,3,4,5,6,7]),import.meta.url))},{element:"Textarea",component:y(()=>p(()=>import("./DEm_64i2.js"),__vite__mapDeps([11,1,2,3,4,5,6,7]),import.meta.url))},{element:"Date",component:y(()=>p(()=>import("./D8NYqBdQ.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,13,14,15]),import.meta.url))},{element:"DateTime",component:y(()=>p(()=>import("./D57VkClh.js"),__vite__mapDeps([16,1,2,13,3,4,5,6,7]),import.meta.url))},{element:"Divider",component:y(()=>p(()=>import("./iIsG8wCV.js"),__vite__mapDeps([17,3,4,5,6,7]),import.meta.url))},{element:"Image",component:y(()=>p(()=>import("./Bwt4r9gx.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"ImageSubform",component:y(()=>p(()=>import("./BG8ERpbo.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"TextareaByte",component:y(()=>p(()=>import("./CMeUi3dk.js"),__vite__mapDeps([22,1,2,3,4,5,6,7]),import.meta.url))},{element:"HTML",component:y(()=>p(()=>import("./CxnZSiA4.js"),__vite__mapDeps([23,1,2,3,4,5,6,7]),import.meta.url))},{element:"ImageDrag",component:y(()=>p(()=>import("./BxVzkwQr.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"Checkbox",component:y(()=>p(()=>import("./B3K6t1bN.js"),__vite__mapDeps([25,1,2,3,4,5,6,7]),import.meta.url))},{element:"CK",component:y(()=>p(()=>import("./B0vOKLtE.js"),__vite__mapDeps([26,27,4,5,28,1,2,3,6,7,29]),import.meta.url))},{element:"CKByte",component:y(()=>p(()=>import("./DR5euW2w.js"),__vite__mapDeps([30,27,4,5,28,1,2,3,6,7]),import.meta.url))},{element:"File",component:y(()=>p(()=>import("./B10-oDmZ.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"FileSubform",component:y(()=>p(()=>import("./rVq9QEKD.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,19,20]),import.meta.url))},{element:"Download",component:y(()=>p(()=>import("./Cavzshjs.js"),__vite__mapDeps([33,1,2,3,4,5,6,7]),import.meta.url))},{element:"Geographic",component:y(()=>p(()=>import("./DwEy7tSK.js"),__vite__mapDeps([34,3,4,5,6,7,1,2,35]),import.meta.url))},{element:"CkOld",component:y(()=>p(()=>import("./BqOYy08_.js"),__vite__mapDeps([36,27,4,5,37,1,2,3,6,7]),import.meta.url))},{element:"CkOldPhp7",component:y(()=>p(()=>import("./BvOIBocS.js"),__vite__mapDeps([38,27,4,5,37,1,2,3,6,7]),import.meta.url))},{element:"ColorPicker",component:y(()=>p(()=>import("./DODUxKlZ.js"),__vite__mapDeps([39,1,2,4,5,3,6,7]),import.meta.url))},{element:"Email",component:y(()=>p(()=>import("./DaALNWcr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url))},{element:"Hidden",component:y(()=>p(()=>import("./DboFlFlw.js"),__vite__mapDeps([40,3,4,5,6,7]),import.meta.url))},{element:"Map",component:y(()=>p(()=>import("./CeqpqK5b.js"),__vite__mapDeps([41,1,2,3,4,5,6,7]),import.meta.url))},{element:"Money",component:y(()=>p(()=>import("./DgtPSQKQ.js"),__vite__mapDeps([42,1,2,3,4,5,6,7]),import.meta.url))},{element:"MoneyWithoutCurrency",component:y(()=>p(()=>import("./DcWILxfe.js"),__vite__mapDeps([43,1,2,3,4,5,6,7]),import.meta.url))},{element:"NumberGenerate",component:y(()=>p(()=>import("./csDd2HkO.js"),__vite__mapDeps([44,1,2,3,4,5,6,7]),import.meta.url))},{element:"Password",component:y(()=>p(()=>import("./D5lQ99ZA.js"),__vite__mapDeps([45,1,2,3,4,5,6,7]),import.meta.url))},{element:"PasswordGenerate",component:y(()=>p(()=>import("./BBPtxV6d.js"),__vite__mapDeps([46,1,2,3,4,5,6,7]),import.meta.url))},{element:"Radio",component:y(()=>p(()=>import("./B4Hf38nZ.js"),__vite__mapDeps([47,1,2,3,4,5,6,7]),import.meta.url))},{element:"RadioWithThumb",component:y(()=>p(()=>import("./W2YyJjOD.js"),__vite__mapDeps([48,1,2,3,4,5,6,7]),import.meta.url))},{element:"FooterButton",component:y(()=>p(()=>import("./iMV5sZSd.js"),__vite__mapDeps([49,1,2,3,4,5,6,7]),import.meta.url))},{element:"RadioWithTextInput",component:y(()=>p(()=>import("./D2DJA0mz.js"),__vite__mapDeps([50,1,2,3,4,5,6,7]),import.meta.url))},{element:"Register",component:y(()=>p(()=>import("./MGeqJhhR.js"),__vite__mapDeps([51,1,2,3,4,5,6,7]),import.meta.url))},{element:"Search",component:y(()=>p(()=>import("./UiEPkKXc.js"),__vite__mapDeps([52,3,4,5,6,7]),import.meta.url))},{element:"Switch",component:y(()=>p(()=>import("./Bg_jtIqt.js"),__vite__mapDeps([53,1,2,3,4,5,6,7]),import.meta.url))},{element:"Time",component:y(()=>p(()=>import("./DKVppfui.js"),__vite__mapDeps([54,1,2,3,4,5,6,7]),import.meta.url))},{element:"JsonEditor",component:y(()=>p(()=>import("./BSeMM-4A.js"),__vite__mapDeps([55,4,5,1,2,3,6,7]),import.meta.url))},{element:"QGis",component:y(()=>p(()=>import("./qu4CTJNJ.js"),__vite__mapDeps([56,3,4,5,6,7,1,2]),import.meta.url))},{element:"AdminMenu",component:y(()=>p(()=>import("./Biz2k3go.js"),__vite__mapDeps([57,1,2,3,4,5,6,7]),import.meta.url))},{element:"GridSelector",component:y(()=>p(()=>import("./D_lJPBGm.js"),__vite__mapDeps([58,3,4,5,6,7,1,2,15]),import.meta.url))},{element:"subform/Grid",component:y(()=>p(()=>import("./Cea23zzz.js"),__vite__mapDeps([59,60,61,3,4,5,6,7,2,14,15]),import.meta.url))},{element:"subform/Form",component:y(()=>p(()=>import("./B9YQo4Ut.js"),__vite__mapDeps([62,60,61,3,4,5,6,7,2,14,15]),import.meta.url))}],me=e=>{if(e!==null&&typeof e<"u"){const t=G.findIndex(o=>o.element===e);if(t>=0)return G[t].component;{const o=ie("customElementList");if(o&&o.length>=1){const a=o.findIndex(d=>d.element===e);if(a>=0)return o[a].component}}}return y(()=>p(()=>import("./Biz2k3go.js"),__vite__mapDeps([57,1,2,3,4,5,6,7]),import.meta.url))};let Z=null,x=null,ee=null;const ue=e=>{Z=e},U=(e,t)=>{ee=t,x=e},he=async(e,t,o)=>{try{const a=await A.post(`${o}/lambda/krud/unique`,{table:Z,identityColumn:x,identity:ee,field:e.field,val:t});return a.data.status?Promise.resolve():Promise.reject(a.data.msg)}catch(a){return Promise.reject(a.response.data.msg)}},fe=async(e,t,o)=>{try{return(await A.post(`${o}/lambda/check`,{value:t})).data.status?Promise.resolve():Promise.reject(`'${t} Давхацсан утга оруулсан байна!'`)}catch{return Promise.reject(`'${t} Давхацсан утга оруулсан байна!'`)}},pe=async(e,t,o)=>{var a=/^[a-zA-Z0-9!@#\$%\^\&*\s*)\(+=._,-]+$/;return t.match(a)?Promise.resolve():Promise.reject("Зөвхөн латин үсэг оруулна уу")},ye=(e,t,o)=>{var a=/^[а-яөүёА-ЯӨҮЁ0-9!@#\$%\^\&*\s*)\(+=.,_-]+$/;return t.match(a)?Promise.resolve():Promise.reject("Зөвхөн кирилл үсэг оруулна уу!")};function be(e,t,o){const a=/^[а-яөүёА-ЯӨҮЁ0]{2}\d{8}$/;return t.match(a)?Promise.resolve():Promise.reject(e.msg)}const ge=(e,t,o)=>{var a=/^[0-9]{8}$/;return t.toString().match(a)?Promise.resolve():Promise.reject("8 оронтой утасны дугаар оруулна уу!")},ce=async(e,t,o)=>{try{const a=await A.post(`${o}/lambda/krud/check_current_password`,{password:t});return a.data.status?Promise.resolve():Promise.reject(a.data.msg)}catch(a){return Promise.reject(a.response.data.msg)}},ve=e=>{if(typeof e!="string")throw new Error("Invalid input. Input must be a string");var t=e.match(/(\/?)(.+)\1([a-z]*)/i);return t[3]&&!/^(?!.*?(.).*?\1)[gmixXsuUAJ]+$/.test(t[3])?RegExp(e):new RegExp(t[2],t[3])},Me=async(e,t,o)=>t.toString().match(ve(o))?Promise.resolve():Promise.reject(e.msg),H=(e,t)=>{switch(t||(t=""),e.type){case"custom":return{validator:async(o,a)=>await Me(o,a,e.regex),trigger:"blur",message:e.msg};case"required":return{required:!0,message:e.msg};case"array":return{type:"array",required:e.required,message:e.message};case"min":return{type:"string",min:parseInt(e.val,10),message:e.msg};case"max":return{type:"string",max:parseInt(e.val,10),message:e.msg};case"email":return{type:"email",trigger:"blur",message:e.msg};case"number":return{type:"number",message:e.msg};case"mongolianMobileNumber":return{validator:ge,trigger:"blur"};case"unique":return{validator:async(o,a)=>await he(o,a,t),trigger:"blur"};case"lambda-account":return{validator:async(o,a)=>await fe(o,a,t),trigger:"blur"};case"englishAlphabet":return{validator:pe,trigger:"blur",message:e.msg};case"mongolianCyrillic":return{validator:ye,trigger:"blur"};case"register":return console.log(e.msg),{validator:be,trigger:"blur",message:e.msg};case"check_current_password":return{validator:async(o,a)=>await ce(o,a,t),trigger:"blur"};default:return null}};var Fe=/\{ *([\w_-]+) *\}/g;function Se(e,t){return e.replace(Fe,function(o,a){let d=t[a];return d===void 0?"":(typeof d=="function"&&(d=d(t)),d)})}var De=/\{ *([\w_-]+) *\}/g,N=null;function we(e,t){return e.replace(De,function(o,a){let d=t[a];return d===void 0?"":(typeof d=="function"&&(d=d(t)),d)})}function Ie(e){return new Function("return "+e)()}function Ee(e,t,o,a,d,v){if(e.length>=1){let f=e.findIndex(c=>c.model==t);f<=-1?e.map(c=>{c.template.includes(t)&&J(c,t,o,a,d,v)}):J(e[f],t,o,a,d,v)}}function J(e,t,o,a,d,v){let f=!1;if(e.form?v?e.form===v&&(f=!0):e.form=="main"&&(f=!0):f=!0,f){let c=we(e.template,o);if(c)try{let g=Ie(c);e.targets.map(w=>{let $=C(a,w.field);$>=0&&(w.prop=="value"?o[w.field]=g:(w.prop=="hidden"&&d&&d[w.field]&&d[w.field].length>0&&d[w.field][0].hasOwnProperty("required")&&(d[w.field][0].required=!g),a[$][w.prop]=g))})}catch(g){console.log(g)}}}function Te(e,t,o,a,d,v,f){if(t||t===0){let c=C(a,e);c>=0&&a[c].trigger&&(N&&clearTimeout(N),N=setTimeout(()=>{_e(a[c].trigger,o,a,d,v,f)},a[c].triggerTimeout!=null&&a[c].triggerTimeout!==null&&a[c].triggerTimeout!=""?a[c].triggerTimeout:0))}}function Y(e,t,o,a,d){if(d){let v=C(o,d);if(v>=0){let f=C(o[v].schema,e.field);f>=0&&Object.keys(e.props).forEach(c=>{o[v].schema[f][c]=e.props[c]})}}else{let v=C(o,e.field);if(v>=0){if("value"in e){let f=o[v];f.formType==="Date"||f.formType==="DateTime"?t[e.field]=e.value:f.formType==="SubForm"?(t[e.field]=e.value,a[`sf${e.field}`][0].fillData(e.value)):t[e.field]=e.value}e.props&&Object.keys(e.props).forEach(f=>{o[v][f]=e.props[f]})}}}function _e(e,t,o,a,d,v){e.split(",").forEach(c=>{A.post(c,{model:{...t},editMode:v}).then(({data:g})=>{g.schema&&g.schema.forEach(w=>{Y(w,t,o,a)}),g.schema_sub&&g.schema_sub.forEach(w=>{w.schema.forEach($=>{Y($,t,o,a,w.model)})}),g.message&&Q(g,d),g.info&&g.info.forEach(w=>{document.getElementById(w.target).innerHTML=w.html})}).catch(g=>{g.response&&g.response.data&&g.response.data.message&&Q(g.response.data,d)})})}function C(e,t){return e.findIndex(o=>o.model==t)}function Q(e,t){e.message.type==="success"?t.success({duration:3,message:e.message.message,description:e.message.message}):t.error({duration:3,message:e.message.message,description:e.message.message})}const Be={name:"formFooter",props:["withBackButton","save_btn_text","asyncMode","lang","extraButtons","schemaID","editMode","disableReset","handleReset","getFooterButtons","setAndSend","createWithTemplate"]},Re={key:0},ke={key:1},$e={class:"extra-buttons"};function Pe(e,t,o,a,d,v){const f=k("a-button"),c=k("a-popconfirm");return r(),m(M,null,[o.withBackButton?(r(),u(f,{key:0,onClick:e.close,style:{"margin-right":"8px"}},{default:n(()=>t[0]||(t[0]=[R(" Буцах ")])),_:1,__:[0]},8,["onClick"])):b("",!0),(r(!0),m(M,null,F(o.extraButtons,g=>(r(),u(f,{key:g.index,disabled:!o.editMode,to:o.createWithTemplate(g.url),target:"_blank",style:z(o.editMode?`margin-right: 8px; color:${g.color}; border-color:${g.color}`:"margin-right: 8px;"),type:"primary",ghost:""},{default:n(()=>[T("i",{class:V(g.icon),style:z(o.editMode?`color:${g.color}`:"")},null,6),R(" "+E(g.title),1)]),_:2},1032,["disabled","to","style"]))),128)),I(f,{type:"primary",loading:o.asyncMode,"html-type":"submit"},{default:n(()=>[o.asyncMode?(r(),m("span",ke,E(o.lang.pleaseWait),1)):(r(),m("span",Re,E(o.save_btn_text!=="Хадгалах"&&o.save_btn_text!==""?o.save_btn_text:o.lang.save),1))]),_:1},8,["loading"]),!o.editMode&&!o.disableReset?(r(),u(f,{key:1,onClick:o.handleReset,style:{"margin-left":"8px"}},{default:n(()=>[R(E(o.lang.reset),1)]),_:1},8,["onClick"])):b("",!0),(r(!0),m(M,null,F(o.getFooterButtons(),g=>(r(),m("span",$e,[(r(!0),m(M,null,F(g.options,w=>(r(),u(c,{title:"Энэ үйлдлийг хийх үү?","ok-text":"Тийм","cancel-text":"Үгүй",onConfirm:$=>o.setAndSend(g.model,w.value),key:g.index},{default:n(()=>[I(f,{loading:o.asyncMode,type:"primary",ghost:""},{default:n(()=>[R(E(w.label),1)]),_:2},1032,["loading"])]),_:2},1032,["onConfirm"]))),128))]))),256))],64)}const Ae=X(Be,[["render",Pe]]),Le={name:"dataform",props:["projectID","schemaID","editMode","onReady","onSuccess","onError","permissions","user_condition","formCustomData","do_render","isSubForm","url","page_id","public","title","close","hideTitle","hideSuccessDialog","hideErrorDialog","hideFooter","hideLoader"],components:{fromFooter:Ae},data(){return{formTitle:"",loadConfig:!0,use2ColumnLayout:!1,viewMode:!1,asyncMode:!1,save_btn_text:"",formValidationCustomText:"",meta:{model:"",option:{}},model:{},schema:[],ui:{},formula:[],rule:{},identity:null,dataID:null,relations:{},showInfo:!1,infoUrl:"",infoTitle:"",showID:window.init&&window.init.showID?window.init.showID:void 0,subFormValidations:[],extraButtons:[],disableReset:!1,withBackButton:!1,tabIndex:0,noFooter:!1}},computed:{baseUrl(){return this.$props.url?this.$props.url:""},submitUrl(){return this.editMode?this.page_id?`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/update/${this.dataID}?page_id=${this.page_id}`:`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/update/${this.dataID}`:this.page_id?`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/store?page_id=${this.page_id}`:`${this.baseUrl}/lambda/krud${this.public?"-public":""}/${this.$props.schemaID}/store`},optionUrl(){return this.public===!0?"-public":""},lang(){const e=["save","pleaseWait","reset","close","pleaseEnterPasswordYouUCurrentlyUsing","pleaseReEnterYourPassword","passwordConfirmError","informationIsIncomplete","trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder","successfullySaved","errorSaving","error"];return e.reduce((t,o,a)=>(t[o]=this.$t("dataForm."+e[a]),t),{})}},created(){window.showInformationModal=this.showInformationModal,this.schemaID&&this.initForm()},watch:{src(e,t){this.initForm()},editMode(e){e||this.handleReset(this.meta.model+"-"+this.schemaID)},do_render(e){e||(this.handleReset(this.meta.model+"-"+this.schemaID),this.viewMode=!1)},schemaID(e){e&&this.initForm()}},methods:{moveByRight(e){this.tabIndex=e+1},moveByLeft(e){this.tabIndex=e-1},createWithTemplate(e){return Se(e,this.model)},isVisibleSection(e){let t=this.showAbleFields(e.children);return e.type=="section"&&t?e.visibleUserRoles&&t&&Array.isArray(e.visibleUserRoles)&&t&&e.visibleUserRoles.length>=1&&window.init.user&&t?!!(e.visibleUserRoles.findIndex(o=>o==window.init.user.role)>=0&&t):!0:!1},getStepData(e){if(typeof e=="object"&&e!==null&&e.hasOwnProperty("children")){const t=e.children.filter(a=>this.isVisibleSection(a));let o=[];return t.forEach((a,d)=>{o.push({index:d})}),o}return[]},showAbleFields(e){for(let t of e){if(t.type=="form"||t.type=="Form")return!!this.isShow(t.model);if(t.formType=="SubForm")return!0;if(t.type=="row"){let o=!1;for(let a of t.children)this.showAbleFields(a.children)&&(o=!0);return o}else return t.hasOwnProperty("children")?!!this.showAbleFields(t.children):!!this.isShow(t.model)}},element:me,evalstr:le,isValid:se,isShow(e){let t=this.schema.findIndex(o=>o.model==e);return t>=0?!this.schema[t].hidden:!0},afterChange(e,t,o){Te(e,t,this.model,this.schema,this.$refs,P,this.editMode),this.do_render&&t!=o&&Ee(this.formula,e,this.model,this.schema,this.rule,!1)},clearConfig(){this.model={},this.schema=[],this.ui={},this.formula=[],this.rule={},this.dataID=null},async initFromServerData(e){let t=this.baseUrl+`/lambda/puzzle/schema${this.optionUrl}/form/${this.$props.schemaID}`;this.projectID&&(t=this.baseUrl+`/lambda/puzzle/project/${this.projectID}/form/${this.$props.schemaID}`),t+=e.length==0?"":`/${e}`;try{let o=await A.get(t),a=JSON.parse(o.data.data.schema);return a.form_id=o.data.data.id,a.form_name=o.data.data.name,a}catch(o){console.error(o.message);return}},async initForm(){let e=[];this.user_condition&&(e=JSON.stringify(this.user_condition));let t={};window.init?window.init.formSchemas?window.init.formSchemas[this.$props.schemaID]?t=window.init.formSchemas[this.$props.schemaID]:t=await this.initFromServerData(e):t=await this.initFromServerData(e):t=await this.initFromServerData(e),this.identity=t.identity,this.schema=t.schema,this.ui=t.ui,t.save_btn_text&&(this.save_btn_text=t.save_btn_text),t.formValidationCustomText&&(this.formValidationCustomText=t.formValidationCustomText),t.formula&&(this.formula=t.formula),t.extraButtons&&(this.extraButtons=t.extraButtons),t.disableReset&&(this.disableReset=t.disableReset),t.withBackButton&&(this.withBackButton=t.withBackButton),t.use2ColumnLayout&&(de.value||(this.use2ColumnLayout=t.use2ColumnLayout)),this.formTitle=t.form_name,this.meta={model:t.model,option:{labelPosition:t.labelPosition,labelWidth:t.labelWidth}},this.relations=await ne(this.schemaID,this.optionUrl,!1,t.schema),this.setUiSchemaFormItem(t.ui.schema),this.setHiddenItemModel(t.schema),ue(t.model),this.setUserConditionValues(!0),this.setCustomData(),this.loadConfig=!1,this.$props.onReady&&this.$props.onReady(t,this.schema)},setHiddenItemModel(e){e.forEach(t=>{if((t.hidden||t.disabled)&&(this.isValid(t.default)&&this.setModel(t.model,t.default,t.formType),t.hasUserId&&this.setModel(t.model,window.init.user.id*1,t.formType),t.fillByUserField!==null&&t.fillByUserField!==""&&t.fillByUserField!==void 0&&this.setModel(t.model,window.init.user[t.fillByUserField],t.formType),this.isValid(t.param))){if(t.param in this.$route.params){let a=this.$route.params[t.param];a!=="null"&&(this.isNumberString(a)?this.$data.model[t.model]=a*1:this.$data.model[t.model]=a)}let o=this.$route.query[t.param];o!=="null"&&(this.isNumberString(o)?this.$data.model[t.model]=o*1:this.$data.model[t.model]=o)}t.source_hidden=t.hidden,t.source_disabled=t.disabled})},validatePassCheck(e,t,o,a){let d=o||"",v=this.model[e]?this.model[e]:"";o===""&&!this.editMode?a(new Error(this.lang.pleaseReEnterYourPassword)):d!==v?a(new Error(this.lang.passwordConfirmError)):a()},isNumberString(e){return/^-?\d+(\.\d+)?$/.test(e)},setUiSchemaFormItem(e){e.forEach(t=>{if(t.type=="form"){if(this.setModel(t.model,t.default,t.formType),this.model.hasOwnProperty(t.model)&&this.$watch("model."+t.model,{handler:(o,a)=>{this.do_render&&o!==a&&this.afterChange(t.model,o,a)},deep:!0}),t.rules||(t.rules=[]),t.custom_regex&&t.custom_regex_msg&&t.rules.push({type:"custom",regex:t.custom_regex,msg:t.custom_regex_msg}),this.setRule(t.model,t.rules),t.formType=="Password"&&t.passwordOption&&(t.passwordOption.confirm&&(this.setModel("password_confirm","","password"),this.$data.rule.password_confirm=[{validator:(o,a,d)=>this.validatePassCheck(t.model,o,a,d),trigger:"blur"}]),t.passwordOption.edit_with_old_password)){this.setModel("current_password","","password");let o=[];[{type:"required",msg:this.lang.pleaseEnterPasswordYouUCurrentlyUsing},{type:"check_current_password",msg:null}].forEach(d=>{let v=H(d,this.url);o.push(v)}),this.$data.rule.current_password=o}t.formType==="process_status"&&t.model==="status"&&(this.noFooter=!0)}else t.formType=="SubForm"?(this.setModel(t.model,[],"SubForm"),t.checkEmpty&&this.subFormValidations.push({model:t.model,emptyErrorMsg:t.EmptyErrorMsg?t.EmptyErrorMsg:`${t.name}-д мэдээлэл бүртгэнэ үү`}),t.trigger!=""&&this.$watch("model."+t.model,{handler:(o,a)=>{this.do_render&&this.afterChange(t.model,o,a)},deep:!0})):_.isArray(t.children)&&this.setUiSchemaFormItem(t.children)})},setModel(e,t,o){switch(o){case"Switch":let a=!1;(t==="true"||t===1)&&(a=!0),this.$data.model[e]=a;break;case"Checkbox":let d=0;(t==="true"||t===1)&&(d=1),this.$data.model[e]=d;break;case"CK":let v="";t!==""&&t!==null&&(v=t),this.$data.model[e]=v;break;case"SubForm":this.$data.model[e]=[];break;case"Select":t===""||t===null?this.$data.model[e]=null:!isNaN(t)&&!/^0\d+$/.test(t)?this.$data.model[e]=t*1:this.$data.model[e]=t;break;case"Number":t!==null?this.$data.model[e]=t*1:this.$data.model[e]=t;break;case"Date":t===null&&A.get("/lambda/krud/today").then(({data:f})=>{window.withTimezone?this.$data.model[e]=W(f.today):this.$data.model[e]=K(f.today)});break;case"DateTime":t===null&&A.get("/lambda/krud/now").then(({data:f})=>{window.withTimezone?this.$data.model[e]=W(f.today):this.$data.model[e]=K(f.today)});break;case"ISelect":this.$data.model[e]=t;case"TreeSelect":this.$data.model[e]=t;break;default:this.$data.model[e]=t}},setRule(e,t){this.$data.rule[e]=[],t.forEach(o=>{let a=H(o,this.url);this.$data.rule[e].push(a)})},setMeta(e,t){let o=this.schema.findIndex(v=>v.model==e.model),a=o>=0?this.schema[o]:e;t||(delete a.table,delete a.extra,a.schemaID=this.$props.schemaID);const d=this.viewMode?!0:a.disabled;return{...a,disabled:d}},getLabel(e){let t=this.schema.findIndex(o=>o.model===e.model);return t>=0?this.schema[t].label?this.schema[t].label:`[${this.schema[t].model}]`:""},getSchemaByModel(e){let t=this.schema.findIndex(o=>o.model===e);return t>=0?this.schema[t]:null},getSchemaRelationByModel(e){let t=this.schema.findIndex(o=>o.model==e);return t>=0?q(this.schema[t],this.relations):null},setSchemaByModel(e,t,o,a){if(t==="value")this.$data.model[e]=o;else if(t==="sub-value")this.$data.model[e]=o,this.subFormFillData(e);else{let d=this.schema.findIndex(v=>v.model===e);if(d>=0)if(a){if(this.schema[d].formType==="SubForm"){let v=this.schema[d].schema.findIndex(f=>f.model===a);v>=0&&(this.schema[d].schema[v][t]=o,this.subFormFillData(e))}}else this.schema[d][t]=o}},getSubFormData(e){let t=[];this.model[e].forEach(o=>{t.push(o.data)})},handleSubmit(){this.setIdentityManual(),this.subFormValidations.length>=1?this.validateWithSubForm():this.postData()},async validateDataForm(){try{await this.$refs[this.meta.model+"-"+this.schemaID].validate();let e=!0;return this.subFormValidations.forEach(t=>{let o=_.isArray(this.model[t.model]);(this.model[t.model]===void 0||this.model[t.model]===null||o)&&(o?this.model[t.model].length==0&&(P.error({message:this.lang.informationIsIncomplete,description:t.emptyErrorMsg}),e=!1):(P.error({message:this.lang.informationIsIncomplete,description:t.emptyErrorMsg}),e=!1))}),!!e}catch{return this.finishFailed(),!1}},validateWithSubForm(e,t,o){this.$refs[this.meta.model+"-"+this.schemaID].validate().then(()=>{let a=!0;this.subFormValidations.forEach(d=>{let v=_.isArray(this.model[d.model]);(this.model[d.model]===void 0||this.model[d.model]===null||v)&&(v?this.model[d.model].length==0&&(P.error({message:this.lang.informationIsIncomplete,description:d.emptyErrorMsg}),a=!1):(P.error({message:this.lang.informationIsIncomplete,description:d.emptyErrorMsg}),a=!1))}),a&&this.postData(e,t,o)}).catch(a=>{o&&o(a),this.finishFailed()})},postData(e,t,o){this.isSubForm?this.$props.onSuccess(this.$data.model):(this.asyncMode=!0,A.post(this.submitUrl,this.$data.model).then(({data:a})=>{a.status?(this.hideSuccessDialog||P.success({message:this.lang.successfullySaved,description:this.lang.successfullySaved}),e||(this.editMode?(this.$props.onSuccess&&this.$props.onSuccess(a.data),t&&t(a.data,a.data[this.identity])):(this.$data.model[this.identity]=a.data[this.identity],this.$props.onSuccess&&this.$props.onSuccess(a.data),t&&t(a.data,a.data[this.identity]),this.handleReset(this.meta.model+"-"+this.schemaID)))):(this.hideErrorDialog||P.error({message:this.lang.errorSaving,description:this.lang.errorSaving}),this.$props.onError&&this.$props.onError()),this.asyncMode=!1}).catch(a=>{o&&o(a);let d="";a.response?(a.response.data.hasOwnProperty("error")&&(typeof a.response.data.error=="string"||a.response.data.error instanceof String?d=a.response.data.error:a.response.data.error instanceof Object&&Object.keys(a.response.data.error).forEach(v=>{let f=v+": "+a.response.data.error[v].map(c=>c+" ");d!=""?d=d+"<br/>"+f:d=f})),P.error({message:this.lang.errorSaving,description:d})):P.error({message:this.lang.errorSaving,description:a}),this.asyncMode=!1,this.$props.onError&&this.$props.onError()}))},handleReset(){this.model={},this.$refs[this.meta.model+"-"+this.schemaID].resetFields(),U(this.identity,null),this.schema.forEach(e=>{e.formType==="SubForm"&&typeof this.$refs[`sf${e.model}`]<"u"&&this.$refs[`sf${e.model}`].length>=1&&this.$refs[`sf${e.model}`][0].reset(),this.setModel(e.model,e.default,e.formType),e.hidden=e.source_hidden,e.disabled=e.source_disabled}),this.setHiddenItemModel(this.schema),this.setCustomData()},setIdentityManual(){U(this.identity,this.model[this.identity])},setUserConditionValues(e){this.user_condition&&this.user_condition.forEach(t=>{let o=this.getSchemaByModel(t.form_field);o&&(o.default!==""&&o.default!==null&&o.default!==0||e)&&(this.model[o.model]===""||this.model[o.model]===null||this.model[o.model]===0)&&(e?(this.model[o.model]=window.init.user[t.user_field],o.default=window.init.user[t.user_field],o.disabled=!0,o.source_disabled=!0):this.setModel(o.model,o.default,o.formType))})},setCustomData(){this.formCustomData&&Object.keys(this.formCustomData).forEach(e=>{let t=this.schema.findIndex(o=>o.model===e);t>=0&&(this.schema[t].disabled=!0,this.schema[t].default=this.formCustomData[e],this.$data.model[e]=this.formCustomData[e])})},editModel(e,t){t?(this.model={...this.model,...t},this.ui&&this.ui.hasOwnProperty("schema")&&(this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())):(this.dataID=e,U(this.identity,e),A.post(this.page_id?`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/edit/${e}?page_id=${this.page_id}`:`${this.baseUrl}/lambda/krud/${this.$props.schemaID}/edit/${e}`).then(({data:o})=>{o.status&&(this.model={...this.model,...o.data},this.ui&&this.ui.hasOwnProperty("schema")&&this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())}).catch(o=>{o.response.data&&o.response.data.error&&P.error({message:this.lang.error,description:o.response.data.error})}))},setHiddenValues(e){e.map(t=>{this.model[t.key]=t.val})},subFormFillData(e){this.$nextTick(()=>{this.$refs[`sf${e}`]?this.$refs[`sf${e}`].length>=1?this.$refs[`sf${e}`][0].fillData(this.model[e]):setTimeout(()=>{this.subFormFillData(e)},100):setTimeout(()=>{this.subFormFillData(e)},100)})},setEditModel(e){e.forEach(t=>{if(t.type=="form"||t.type=="Form"||t.formType=="SubForm")switch(t.formType){case"SubForm":this.subFormFillData(t.model);break;case"Switch":this.model[t.model]==1||this.model[t.model]=="true"?this.model[t.model]=!0:this.model[t.model]=!1;break;case"CK":this.model[t.model]===null&&(this.model[t.model]="");break;case"Date":this.model[t.model]!==null&&(window.withTimezone?this.model[t.model]=W(this.model[t.model]):this.model[t.model]=this.model[t.model]);break;case"DateTime":this.model[t.model]!==null&&(window.withTimezone?this.model[t.model]=W(this.model[t.model]):this.model[t.model]=this.model[t.model]);break;case"Password":this.model[t.model]="",delete this.$data.rule[t.model];break;case"PasswordGenerate":this.model[t.model]="",delete this.$data.rule[t.model];break}else _.isArray(t.children)&&this.setEditModel(t.children)})},cloneModel(e){A.post(`/lambda/krud/${this.$props.schemaID}/edit/${e}$?page_id=${this.page_id}`,{}).then(({data:t})=>{t.status&&(this.model={...this.model,...t.data},delete this.model[this.identity],this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())})},showInformationModal(e,t){this.infoTitle=t,this.infoUrl=e,this.showInfo=!0},getRelation(e){let t=this.schema.findIndex(a=>a.model===e.model),o=t>=0?this.schema[t]:e;return q(o,this.relations)},getFooterButtons(){let e=[];return this.schema.forEach(t=>{t.formType==="FooterButton"&&(t.options.length>=1?e.push({...t}):e.push({...t,options:this.getRelation(t)}))}),e},setAndSend(e,t){let o=this.meta.model+"-"+this.schemaID;this.setIdentityManual(),_.isEmpty(this.$data.rule)?this.subFormValidations.length>=1?this.validateWithSubForm():(this.asyncMode=!0,this.$data.model[e]=t,this.postData()):(this.$data.model[e]=t,this.$refs[o].validate().then(()=>{this.$data.model[e]=t,this.subFormValidations.length>=1?this.validateWithSubForm():(this.asyncMode=!0,this.postData())}).catch(a=>{this.finishFailed()}))},finishFailed(){P.error({message:this.lang.informationIsIncomplete,description:this.formValidationCustomText!=""?this.formValidationCustomText:this.lang.trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder})}}},Ve={mixins:[Le]},Ce={key:0,class:"dataform-header"},We={key:0},Oe={key:0},Ue={key:1,class:"dataform-body"},Ne={class:"two-column-form-left"},je={key:0},ze={class:"svg-icon align-center"},qe={class:"svg-icon align-center"},Ke={class:"two-column-form-right"},Ge={class:"two-column-form"},He={key:0},Je={class:"svg-icon align-center"},Ye={class:"svg-icon align-center"},Qe={key:0,class:"two-column-form-footer"},Xe={key:2,class:"dataform-body"},Ze={key:0},xe={class:"flex w-full pr-2"},et={class:"pt-3 flex items-center"},tt={class:"flex-grow tab-section"},ot={class:"h-5 w-5 flex"},at={class:"h-5 w-5 flex"},rt={key:3},it={key:4,class:"dataform-footer"},st=["src"],lt={slot:"footer"};function dt(e,t,o,a,d,v){const f=k("a-divider"),c=k("a-col"),g=k("a-row"),w=k("a-tab-pane"),$=k("inline-svg"),L=k("a-button"),O=k("a-tabs"),j=k("fromFooter"),te=k("a-steps"),oe=k("a-spin"),ae=k("a-form"),re=k("a-drawer");return r(),m("div",{class:V(e.viewMode?"dataform view-mode":"dataform")},[I(ae,{ref:e.meta.model+"-"+e.schemaID,model:e.model,"label-position":e.meta.option.labelPosition,layout:e.meta.option.labelPosition==="top"?"vertical":"horizontal",rules:e.rule,onFinish:e.handleSubmit,onFinishFailed:e.finishFailed,id:"data-form"},{default:n(()=>[e.hideTitle?b("",!0):(r(),m("div",Ce,[T("h3",null,[R(E(e.title?e.title:e.formTitle)+E(e.showID),1),e.showID&&e.model[e.identity]?(r(),m("b",We,[e.model[e.identity]?(r(),m("span",Oe,": "+E(e.model[e.identity]),1)):b("",!0)])):b("",!0)])])),!e.loadConfig&&e.use2ColumnLayout?(r(),m("div",Ue,[I(g,{gutter:16},{default:n(()=>[I(c,{span:18},{default:n(()=>[T("div",Ne,[(r(!0),m(M,null,F(e.ui.schema.filter(D=>!D.use2ColumnLayout),D=>(r(),u(g,{gutter:10},{default:n(()=>[D.sectionRenderByTab?b("",!0):(r(!0),m(M,{key:0},F(D.children.filter(i=>e.isVisibleSection(i)),i=>(r(),u(c,{xs:i.span.xs,sm:i.span.sm,md:i.span.md,lg:i.span.lg},{default:n(()=>[T("div",{class:V(i.name!=""?"fieldset":"")},[i.name!=""?(r(),m("legend",je,E(i.name),1)):b("",!0),(r(!0),m(M,null,F(i.children,l=>(r(),u(g,{gutter:10},{default:n(()=>[(r(!0),m(M,null,F(l.children,S=>(r(),u(c,{id:S.id,key:S.index,xs:24,sm:24,md:S.span.md,lg:S.span.lg},{default:n(()=>[S.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(S.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(S.children,s=>(r(),m("span",{key:s.index},[e.isShow(s.model)&&s.formType=="SubForm"&&s.subtype?(r(),u(B(e.element(`subform/${s.subtype}`)),{key:s.model,ref_for:!0,ref:"sf"+s.model,url:e.url,viewMode:e.viewMode,model:{form:e.model,component:s.model},form:e.setMeta(s,!0),formula:e.formula,relations:e.relations,asyncMode:e.asyncMode,editMode:e.editMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["url","viewMode","model","form","formula","relations","asyncMode","editMode","validateWithSubForm","validateDataForm"])):b("",!0),e.isShow(s.model)&&s.formType!="SubForm"?(r(),u(B(e.element(s.formType)),{key:s,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:s.model},disabled:s.disabled?s.disabled:!1,label:e.getLabel(s),meta:e.setMeta(s),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,relation_data:e.getRelation,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["do_render","asyncMode","editMode","model","disabled","label","meta","identity","url","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","relation_data","validateWithSubForm","validateDataForm"])):b("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),256))],2)]),_:2},1032,["xs","sm","md","lg"]))),256)),D.sectionRenderByTab?(r(),u(O,{key:1,activeKey:e.tabIndex,"onUpdate:activeKey":t[2]||(t[2]=i=>e.tabIndex=i)},{leftExtra:n(()=>[I(L,{onClick:t[0]||(t[0]=i=>e.moveByLeft(e.tabIndex)),disabled:e.tabIndex<=0,style:{height:"36px",width:"36px"},shape:"circle",class:"tab-navigation"},{default:n(()=>[T("span",ze,[I($,{src:"/assets/icons/duotone/Navigation/Angle-left.svg"})])]),_:1},8,["disabled"])]),rightExtra:n(()=>[I(L,{onClick:t[1]||(t[1]=i=>e.moveByRight(e.tabIndex)),disabled:D.children.filter(i=>e.isVisibleSection(i)).length<=e.tabIndex+1,style:{height:"36px",width:"36px"},shape:"circle"},{default:n(()=>[T("span",qe,[I($,{src:"/assets/icons/duotone/Navigation/Angle-right.svg"})])]),_:2},1032,["disabled"])]),default:n(()=>[(r(!0),m(M,null,F(D.children.filter(i=>e.isVisibleSection(i)),(i,l)=>(r(),u(w,{tab:i.name,key:l},{default:n(()=>[(r(!0),m(M,null,F(i.children,S=>(r(),u(g,{key:S.index,gutter:10},{default:n(()=>[(r(!0),m(M,null,F(S.children,s=>(r(),u(c,{id:s.id,key:s.index,xs:24,sm:24,md:s.span.md,lg:s.span.lg},{default:n(()=>[s.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(s.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(s.children,h=>(r(),m("span",{key:h.index},[e.isShow(h.model)&&h.formType=="SubForm"&&h.subtype?(r(),u(B(e.element(`subform/${h.subtype}`)),{key:0,ref_for:!0,ref:"sf"+h.model,model:{form:e.model,component:h.model},form:e.setMeta(h,!0),formula:e.formula,url:e.url,viewMode:e.viewMode,relations:e.relations,asyncMode:e.asyncMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["model","form","formula","url","viewMode","relations","asyncMode","validateWithSubForm","validateDataForm","editMode"])):b("",!0),e.isShow(h.model)&&h.formType!="SubForm"?(r(),u(B(e.element(h.formType)),{key:1,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:h.model},url:e.url,disabled:h.disabled?h.disabled:!1,label:e.getLabel(h),meta:e.setMeta(h),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,relation_data:e.getRelation},null,8,["do_render","asyncMode","editMode","model","url","disabled","label","meta","identity","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","relation_data"])):b("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),128))]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])):b("",!0),(r(!0),m(M,null,F(D.children.filter(i=>i.type==="col"),i=>(r(),u(c,{xs:i.span.xs,sm:i.span.sm,md:i.span.md,lg:i.span.lg},{default:n(()=>[i.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(i.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(i.children,l=>(r(),m("span",{key:l.index},[e.isShow(l.model)&&l.formType==="SubForm"&&l.subtype?(r(),u(B(e.element(`subform/${l.subtype}`)),{key:l.model,ref_for:!0,ref:"sf"+l.model,label:e.getLabel(l),model:{form:e.model,component:l.model},form:e.setMeta(l,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,url:e.url,viewMode:e.viewMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["label","model","form","relations","asyncMode","formula","schemaID","url","viewMode","validateWithSubForm","validateDataForm","editMode"])):b("",!0),e.isShow(l.model)&&l.formType!=="SubForm"?(r(),u(B(e.element(l.formType)),{key:l.model,do_render:e.do_render,editMode:e.editMode,disabled:l.disabled?l.disabled:!1,model:{form:e.model,component:l.model},label:e.getLabel(l),meta:e.setMeta(l),identity:e.identity,rule:e.rule[l.model],asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,url:e.url,relation_data:e.getRelation},null,8,["do_render","editMode","disabled","model","label","meta","identity","rule","asyncMode","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","url","relation_data"])):b("",!0)]))),128))]),_:2},1032,["xs","sm","md","lg"]))),256))]),_:2},1024))),256))])]),_:1}),I(c,{span:6},{default:n(()=>[T("div",Ke,[T("div",Ge,[(r(!0),m(M,null,F(e.ui.schema.filter(D=>D.use2ColumnLayout),D=>(r(),u(g,{gutter:10},{default:n(()=>[D.sectionRenderByTab?b("",!0):(r(!0),m(M,{key:0},F(D.children.filter(i=>e.isVisibleSection(i)),i=>(r(),u(c,{xs:i.span.xs,sm:i.span.sm,md:i.span.md,lg:i.span.lg},{default:n(()=>[T("div",{class:V(i.name!=""?"fieldset":"")},[i.name!=""?(r(),m("legend",He,E(i.name),1)):b("",!0),(r(!0),m(M,null,F(i.children,l=>(r(),u(g,{gutter:10},{default:n(()=>[(r(!0),m(M,null,F(l.children,S=>(r(),u(c,{id:S.id,key:S.index,xs:24,sm:24,md:S.span.md,lg:S.span.lg},{default:n(()=>[S.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(S.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(S.children,s=>(r(),m("span",{key:s.index},[e.isShow(s.model)&&s.formType=="SubForm"&&s.subtype?(r(),u(B(e.element(`subform/${s.subtype}`)),{key:s.model,ref_for:!0,ref:"sf"+s.model,url:e.url,model:{form:e.model,component:s.model},form:e.setMeta(s,!0),formula:e.formula,relations:e.relations,asyncMode:e.asyncMode,editMode:e.editMode,viewMode:e.viewMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["url","model","form","formula","relations","asyncMode","editMode","viewMode","validateWithSubForm","validateDataForm"])):b("",!0),e.isShow(s.model)&&s.formType!="SubForm"?(r(),u(B(e.element(s.formType)),{key:s,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:s.model},disabled:s.disabled?s.disabled:!1,label:e.getLabel(s),meta:e.setMeta(s),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,relation_data:e.getRelation,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["do_render","asyncMode","editMode","model","disabled","label","meta","identity","url","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","relation_data","validateWithSubForm","validateDataForm"])):b("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),256))],2)]),_:2},1032,["xs","sm","md","lg"]))),256)),D.sectionRenderByTab?(r(),u(O,{key:1,activeKey:e.tabIndex,"onUpdate:activeKey":t[5]||(t[5]=i=>e.tabIndex=i)},{leftExtra:n(()=>[I(L,{onClick:t[3]||(t[3]=i=>e.moveByLeft(e.tabIndex)),disabled:e.tabIndex<=0,style:{height:"36px",width:"36px"},shape:"circle",class:"tab-navigation"},{default:n(()=>[T("span",Je,[I($,{src:"/assets/icons/duotone/Navigation/Angle-left.svg"})])]),_:1},8,["disabled"])]),rightExtra:n(()=>[I(L,{onClick:t[4]||(t[4]=i=>e.moveByRight(e.tabIndex)),disabled:D.children.filter(i=>e.isVisibleSection(i)).length<=e.tabIndex+1,style:{height:"36px",width:"36px"},shape:"circle"},{default:n(()=>[T("span",Ye,[I($,{src:"/assets/icons/duotone/Navigation/Angle-right.svg"})])]),_:2},1032,["disabled"])]),default:n(()=>[(r(!0),m(M,null,F(D.children.filter(i=>e.isVisibleSection(i)),(i,l)=>(r(),u(w,{tab:i.name,key:l},{default:n(()=>[(r(!0),m(M,null,F(i.children,S=>(r(),u(g,{key:S.index,gutter:10},{default:n(()=>[(r(!0),m(M,null,F(S.children,s=>(r(),u(c,{id:s.id,key:s.index,xs:24,sm:24,md:s.span.md,lg:s.span.lg},{default:n(()=>[s.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(s.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(s.children,h=>(r(),m("span",{key:h.index},[e.isShow(h.model)&&h.formType=="SubForm"&&h.subtype?(r(),u(B(e.element(`subform/${h.subtype}`)),{key:0,ref_for:!0,ref:"sf"+h.model,model:{form:e.model,component:h.model},form:e.setMeta(h,!0),formula:e.formula,url:e.url,relations:e.relations,viewMode:e.viewMode,asyncMode:e.asyncMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["model","form","formula","url","relations","viewMode","asyncMode","validateWithSubForm","validateDataForm","editMode"])):b("",!0),e.isShow(h.model)&&h.formType!="SubForm"?(r(),u(B(e.element(h.formType)),{key:1,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:h.model},url:e.url,disabled:h.disabled?h.disabled:!1,label:e.getLabel(h),meta:e.setMeta(h),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,relation_data:e.getRelation},null,8,["do_render","asyncMode","editMode","model","url","disabled","label","meta","identity","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","relation_data"])):b("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),128))]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])):b("",!0),(r(!0),m(M,null,F(D.children.filter(i=>i.type==="col"),i=>(r(),u(c,{xs:i.span.xs,sm:i.span.sm,md:i.span.md,lg:i.span.lg},{default:n(()=>[i.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(i.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(i.children,l=>(r(),m("span",{key:l.index},[e.isShow(l.model)&&l.formType==="SubForm"&&l.subtype?(r(),u(B(e.element(`subform/${l.subtype}`)),{key:l.model,ref_for:!0,ref:"sf"+l.model,label:e.getLabel(l),model:{form:e.model,component:l.model},form:e.setMeta(l,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,viewMode:e.viewMode,url:e.url,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["label","model","form","relations","asyncMode","formula","schemaID","viewMode","url","validateWithSubForm","validateDataForm","editMode"])):b("",!0),e.isShow(l.model)&&l.formType!=="SubForm"?(r(),u(B(e.element(l.formType)),{key:l.model,do_render:e.do_render,editMode:e.editMode,disabled:l.disabled?l.disabled:!1,model:{form:e.model,component:l.model},label:e.getLabel(l),meta:e.setMeta(l),identity:e.identity,rule:e.rule[l.model],asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,url:e.url,relation_data:e.getRelation},null,8,["do_render","editMode","disabled","model","label","meta","identity","rule","asyncMode","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","url","relation_data"])):b("",!0)]))),128))]),_:2},1032,["xs","sm","md","lg"]))),256))]),_:2},1024))),256))]),e.viewMode?b("",!0):(r(),m("div",Qe,[I(j,{withBackButton:e.withBackButton,save_btn_text:e.save_btn_text,asyncMode:e.asyncMode,lang:e.lang,extraButtons:e.extraButtons,schemaID:e.schemaID,editMode:e.editMode,disableReset:e.disableReset,handleReset:e.handleReset,getFooterButtons:e.getFooterButtons,setAndSend:e.setAndSend,createWithTemplate:e.createWithTemplate},null,8,["withBackButton","save_btn_text","asyncMode","lang","extraButtons","schemaID","editMode","disableReset","handleReset","getFooterButtons","setAndSend","createWithTemplate"])]))])]),_:1})]),_:1})])):b("",!0),!e.loadConfig&&!e.use2ColumnLayout?(r(),m("div",Xe,[(r(!0),m(M,null,F(e.ui.schema,D=>(r(),u(g,{gutter:10},{default:n(()=>[D.sectionRenderByTab?b("",!0):(r(!0),m(M,{key:0},F(D.children.filter(i=>e.isVisibleSection(i)),i=>(r(),u(c,{span:i.span.md},{default:n(()=>[T("div",{class:V(i.name!=""?"fieldset":"")},[i.name!=""?(r(),m("legend",Ze,E(i.name),1)):b("",!0),(r(!0),m(M,null,F(i.children,l=>(r(),u(g,{gutter:10},{default:n(()=>[(r(!0),m(M,null,F(l.children,S=>(r(),u(c,{id:S.id,key:S.index,xs:24,sm:24,md:S.span.md,lg:S.span.lg},{default:n(()=>[S.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(S.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(S.children,s=>(r(),m("span",{key:s.index},[e.isShow(s.model)&&s.formType=="SubForm"&&s.subtype?(r(),u(B(e.element(`subform/${s.subtype}`)),{key:s.model,ref_for:!0,ref:"sf"+s.model,url:e.url,model:{form:e.model,component:s.model},form:e.setMeta(s,!0),formula:e.formula,relations:e.relations,viewMode:e.viewMode,asyncMode:e.asyncMode,editMode:e.editMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["url","model","form","formula","relations","viewMode","asyncMode","editMode","validateWithSubForm","validateDataForm"])):b("",!0),e.isShow(s.model)&&s.formType!="SubForm"?(r(),u(B(e.element(s.formType)),{key:s,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:s.model},disabled:s.disabled?s.disabled:!1,label:e.getLabel(s),meta:e.setMeta(s),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,relation_data:e.getRelation,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm},null,8,["do_render","asyncMode","editMode","model","disabled","label","meta","identity","url","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","relation_data","validateWithSubForm","validateDataForm"])):b("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),256))],2)]),_:2},1032,["span"]))),256)),D.sectionRenderByTab?(r(),u(c,{key:1},{default:n(()=>[T("div",xe,[T("div",et,[T("div",null,[I(te,{direction:"vertical",size:"small",current:e.tabIndex,"onUpdate:current":t[6]||(t[6]=i=>e.tabIndex=i),items:e.getStepData(D)},null,8,["current","items"])])]),T("div",tt,[I(O,{activeKey:e.tabIndex,"onUpdate:activeKey":t[9]||(t[9]=i=>e.tabIndex=i)},{leftExtra:n(()=>[I(L,{onClick:t[7]||(t[7]=i=>e.moveByLeft(e.tabIndex)),disabled:e.tabIndex<=0,shape:"circle",class:"tab-navigation"},{default:n(()=>[T("span",ot,[I($,{class:"w-full",src:"/assets/icons/duotone/Navigation/Angle-left.svg"})])]),_:1},8,["disabled"])]),rightExtra:n(()=>[I(L,{onClick:t[8]||(t[8]=i=>e.moveByRight(e.tabIndex)),disabled:D.children.filter(i=>e.isVisibleSection(i)).length<=e.tabIndex+1,style:{height:"36px",width:"36px"},shape:"circle"},{default:n(()=>[T("span",at,[I($,{class:"w-full",src:"/assets/icons/duotone/Navigation/Angle-right.svg"})])]),_:2},1032,["disabled"])]),default:n(()=>[(r(!0),m(M,null,F(D.children.filter(i=>e.isVisibleSection(i)),(i,l)=>(r(),u(w,{class:"max-w-full",tab:i.name,key:l},{default:n(()=>[(r(!0),m(M,null,F(i.children,S=>(r(),u(g,{key:S.index,gutter:10},{default:n(()=>[(r(!0),m(M,null,F(S.children,s=>(r(),u(c,{id:s.id,key:s.index,xs:24,sm:24,md:s.span.md,lg:s.span.lg},{default:n(()=>[s.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(s.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(s.children,h=>(r(),m("span",{key:h.index},[e.isShow(h.model)&&h.formType=="SubForm"&&h.subtype?(r(),u(B(e.element(`subform/${h.subtype}`)),{key:0,ref_for:!0,ref:"sf"+h.model,model:{form:e.model,component:h.model},form:e.setMeta(h,!0),formula:e.formula,url:e.url,relations:e.relations,asyncMode:e.asyncMode,viewMode:e.viewMode,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["model","form","formula","url","relations","asyncMode","viewMode","validateWithSubForm","validateDataForm","editMode"])):b("",!0),e.isShow(h.model)&&h.formType!="SubForm"?(r(),u(B(e.element(h.formType)),{key:1,do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:h.model},url:e.url,disabled:h.disabled?h.disabled:!1,label:e.getLabel(h),meta:e.setMeta(h),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,relation_data:e.getRelation},null,8,["do_render","asyncMode","editMode","model","url","disabled","label","meta","identity","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","relation_data"])):b("",!0)]))),128))]),_:2},1032,["id","md","lg"]))),128))]),_:2},1024))),128))]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])])])]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(D.children.filter(i=>i.type==="col"),i=>(r(),u(c,{span:i.span.md},{default:n(()=>[i.name?(r(),u(f,{key:0,orientation:"left",class:"form-divider"},{default:n(()=>[R(E(i.name),1)]),_:2},1024)):b("",!0),(r(!0),m(M,null,F(i.children,l=>(r(),m("span",{key:l.index},[e.isShow(l.model)&&l.formType==="SubForm"&&l.subtype?(r(),u(B(e.element(`subform/${l.subtype}`)),{key:l.model,ref_for:!0,ref:"sf"+l.model,label:e.getLabel(l),model:{form:e.model,component:l.model},form:e.setMeta(l,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,viewMode:e.viewMode,url:e.url,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,editMode:e.editMode},null,8,["label","model","form","relations","asyncMode","formula","schemaID","viewMode","url","validateWithSubForm","validateDataForm","editMode"])):b("",!0),e.isShow(l.model)&&l.formType!=="SubForm"?(r(),u(B(e.element(l.formType)),{key:l.model,do_render:e.do_render,editMode:e.editMode,disabled:l.disabled?l.disabled:!1,model:{form:e.model,component:l.model},label:e.getLabel(l),meta:e.setMeta(l),identity:e.identity,rule:e.rule[l.model],asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,subFormFillData:e.subFormFillData,validateWithSubForm:e.validateWithSubForm,validateDataForm:e.validateDataForm,url:e.url,relation_data:e.getRelation},null,8,["do_render","editMode","disabled","model","label","meta","identity","rule","asyncMode","getSchemaByModel","getSchemaRelationByModel","setSchemaByModel","subFormFillData","validateWithSubForm","validateDataForm","url","relation_data"])):b("",!0)]))),128))]),_:2},1032,["span"]))),256))]),_:2},1024))),256))])):b("",!0),e.loadConfig?(r(),m("div",rt,[e.hideLoader?b("",!0):(r(),u(oe,{key:0,fix:""}))])):b("",!0),!e.loadConfig&&!e.viewMode&&!e.use2ColumnLayout&&!e.hideFooter&&!e.noFooter?(r(),m("div",it,[I(j,{withBackButton:e.withBackButton,save_btn_text:e.save_btn_text,asyncMode:e.asyncMode,lang:e.lang,extraButtons:e.extraButtons,schemaID:e.schemaID,editMode:e.editMode,disableReset:e.disableReset,handleReset:e.handleReset,getFooterButtons:e.getFooterButtons,setAndSend:e.setAndSend,createWithTemplate:e.createWithTemplate},null,8,["withBackButton","save_btn_text","asyncMode","lang","extraButtons","schemaID","editMode","disableReset","handleReset","getFooterButtons","setAndSend","createWithTemplate"])])):b("",!0)]),_:1},8,["model","label-position","layout","rules","onFinish","onFinishFailed"]),I(re,{class:"info-modal",open:e.showInfo,"onUpdate:open":t[11]||(t[11]=D=>e.showInfo=D),title:e.infoTitle,width:"860px"},{default:n(()=>[T("iframe",{src:e.infoUrl,frameborder:"0"},null,8,st),T("div",lt,[I(L,{type:"primary",size:"large",onClick:t[10]||(t[10]=D=>e.showInfo=!1)},{default:n(()=>[R(E(e.lang.close),1)]),_:1})])]),_:1},8,["open","title"])],2)}const nt=X(Ve,[["render",dt]]),bt=Object.freeze(Object.defineProperty({__proto__:null,default:nt},Symbol.toStringTag,{value:"Module"}));export{bt as D,Ee as a,Te as d,me as e};
