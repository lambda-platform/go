import{_ as y,h as w}from"./3ncfVO38.js";import{D as u,E as a,F as d,G as s,aC as x,N as n,al as m,aa as g,am as p,H as h,I as f,O as _,L as b}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";const E={props:["lambda","onSuccess"],name:"login",data(){return{loading:!1,isSuccess:!1,isError:!1,credentials:{login:null,password:null}}},computed:{lang(){const l=["loginTitle","username","password","remember","login","forgot","loginSuccess","loginError"];return l.reduce((e,i,c)=>(e[i]=this.$t("user."+l[c]),e),{})}},methods:{onSubmit(){this.isSuccess=!1,this.isError=!1,this.loading||(this.loading=!0,w.post("/auth/login",this.credentials).then(({data:l})=>{l.status?this.onSuccess(l):(this.isError=!0,this.loading=!1)}).catch(l=>{this.loading=!1,this.isError=!0}))}}},k={class:"form-wrap"},V={class:"form-content"},N={class:"form-element input"},C=["disabled","placeholder"],T={class:"form-element input"},B=["disabled","placeholder"],D={class:"form-element"},F={for:"remember_me"},M={class:"form-element action"},U={id:"msg"},G={key:0,class:"success"},H={key:1,class:"error"},I={class:"copyright",style:{width:"70%","text-align":"center"}};function L(l,e,i,c,o,t){const S=u("a-button"),v=u("router-link");return d(),a("div",k,[s("div",V,[s("h2",null,n(t.lang.loginTitle),1),s("form",{onSubmit:[e[2]||(e[2]=m((...r)=>t.onSubmit&&t.onSubmit(...r),["prevent"])),e[3]||(e[3]=m((...r)=>t.onSubmit&&t.onSubmit(...r),["prevent"]))],id:"authForm",method:"post",class:"login-form"},[s("div",N,[g(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>o.credentials.login=r),disabled:o.loading,placeholder:t.lang.username},null,8,C),[[p,o.credentials.login]]),e[4]||(e[4]=s("span",{class:"icon user"},null,-1))]),s("div",T,[g(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=r=>o.credentials.password=r),disabled:o.loading,placeholder:t.lang.password},null,8,B),[[p,o.credentials.password]]),e[5]||(e[5]=s("span",{class:"icon pass"},null,-1))]),s("div",D,[e[6]||(e[6]=s("input",{type:"checkbox",class:"checkbox",id:"remember_me"},null,-1)),s("label",F,n(t.lang.remember),1)]),s("div",M,[h(S,{type:"primary",loading:o.loading,"html-type":"submit"},{default:f(()=>[_(n(t.lang.login),1)]),_:1},8,["loading"]),s("p",null,[h(v,{class:"forgot",to:"/auth/forgot"},{default:f(()=>[_(n(t.lang.forgot),1)]),_:1})])])],32),s("div",U,[o.isSuccess?(d(),a("span",G,n(t.lang.loginSuccess),1)):b("",!0),o.isError?(d(),a("span",H,n(t.lang.loginError),1)):b("",!0)])]),s("div",I,n(i.lambda.copyright),1),x(l.$slots,"copyright")])}const J=y(E,[["render",L]]);export{J as default};
