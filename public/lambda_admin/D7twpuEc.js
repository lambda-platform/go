var $e=Object.defineProperty;var We=(e,o,t)=>o in e?$e(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var j=(e,o,t)=>We(e,typeof o!="symbol"?o+"":o,t);import{m as Ve}from"./DugTeqwv.js";import{a as oe,I as le,q as L,x as N,D as Oe,c as h,w as he,o as I,aF as ve,y as g,E as S,a7 as Z,u as R,z as f,A as T,C as Q,F as Ge,N as Ue,S as je,B as q,O as me,r as Ze,a8 as Se}from"./Bb3cLOD_.js";import{r as i}from"./DTdGTy9U.js";import{ah as ye,ai as we,aj as Je,ak as Ye,al as Ke,am as qe,an as Xe,ao as ee,ap as J,aq as te,ar as p,as as $,at as H,au as M,av as X,aw as de,ax as Ae,ay as P,az as se,aA as B,aB as V,aC as ie,aD as Qe,aE as et,aF as Y,aG as tt,aH as ot,aI as lt,aJ as Ee,aK as at,aL as nt,aM as rt,aN as Te,aO as ce,h as st,aP as G,aQ as Fe,_ as Re,aR as it,aS as ge}from"./BNUQ0oDs.js";import{_ as pe}from"./CaJnKDNR.js";import"./2tDPZFmp.js";import"./CU0CZyNU.js";import"./BYTvHWBW.js";var ct={now:function(){return Date.now()},delegate:void 0},ut=function(e){ye(o,e);function o(t,l){return e.call(this)||this}return o.prototype.schedule=function(t,l){return this},o}(we),be={setInterval:function(e,o){for(var t=[],l=2;l<arguments.length;l++)t[l-2]=arguments[l];return setInterval.apply(void 0,Je([e,o],Ye(t)))},clearInterval:function(e){var o=be.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(e)},delegate:void 0},dt=function(e){ye(o,e);function o(t,l){var a=e.call(this,t,l)||this;return a.scheduler=t,a.work=l,a.pending=!1,a}return o.prototype.schedule=function(t,l){var a;if(l===void 0&&(l=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(r,n,l)),this.pending=!0,this.delay=l,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(r,this.id,l),this},o.prototype.requestAsyncId=function(t,l,a){return a===void 0&&(a=0),be.setInterval(t.flush.bind(t,this),a)},o.prototype.recycleAsyncId=function(t,l,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return l;l!=null&&be.clearInterval(l)},o.prototype.execute=function(t,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(t,l);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},o.prototype._execute=function(t,l){var a=!1,n;try{this.work(t)}catch(r){a=!0,n=r||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),n},o.prototype.unsubscribe=function(){if(!this.closed){var t=this,l=t.id,a=t.scheduler,n=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ke(n,this),l!=null&&(this.id=this.recycleAsyncId(a,l,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},o}(ut),Ne=function(){function e(o,t){t===void 0&&(t=e.now),this.schedulerActionCtor=o,this.now=t}return e.prototype.schedule=function(o,t,l){return t===void 0&&(t=0),new this.schedulerActionCtor(this,o).schedule(l,t)},e.now=ct.now,e}(),pt=function(e){ye(o,e);function o(t,l){l===void 0&&(l=Ne.now);var a=e.call(this,t,l)||this;return a.actions=[],a._active=!1,a}return o.prototype.flush=function(t){var l=this.actions;if(this._active){l.push(t);return}var a;this._active=!0;do if(a=t.execute(t.state,t.delay))break;while(t=l.shift());if(this._active=!1,a){for(;t=l.shift();)t.unsubscribe();throw a}},o}(Ne),ht=new pt(dt);function _t(e,o){return o===void 0&&(o=ht),qe(function(t,l){var a=null,n=null,r=null,_=function(){if(a){a.unsubscribe(),a=null;var d=n;n=null,l.next(d)}};function y(){var d=r+e,c=o.now();if(c<d){a=this.schedule(void 0,d-c),l.add(a);return}_()}t.subscribe(Xe(l,function(d){n=d,r=o.now(),a||(a=o.schedule(y,e),l.add(a))},function(){_(),l.complete()},void 0,function(){n=a=null}))})}function ft(e,o={}){const{paper:t}=e.options,{threshold:l=0}=o;let a;function n(){a=e.getVisibleArea().inflate(l)}n(),e.on("scroll",n),t.on("scale",n),t.options.viewport=r=>{const{model:_}=r,y=_.getBBox();return _.isLink()&&y.inflate(1),a.intersect(y)!==null}}const gt={tools:[{type:"undo",name:"undo",group:"undo-redo",attrs:{button:{"data-tooltip":"Үйлдэл буцаах <i>(Ctrl+Z)</i>","data-tooltip-position":"top",type:"button"}}},{type:"redo",name:"redo",group:"undo-redo",attrs:{button:{"data-tooltip":"Дахин хийх <i>(Ctrl+Y)</i>","data-tooltip-position":"top",type:"button"}}},{type:"zoom-in",name:"zoom-in",group:"zoom",max:ee,step:J,attrs:{button:{"data-tooltip":"Томруулах <i>(Ctrl+Plus)</i>","data-tooltip-position":"top",type:"button"}}},{type:"zoom-out",name:"zoom-out",group:"zoom",min:te,step:J,attrs:{button:{"data-tooltip":"Багасгах <i>(Ctrl+Minus)</i>","data-tooltip-position":"top",type:"button"}}},{type:"zoom-to-fit",name:"zoom-to-fit",group:"zoom",max:ee,min:te,step:J,useModelGeometry:!0,attrs:{button:{"data-tooltip":"Үйлдэлрүү очих <i>(Ctrl+0)</i>","data-tooltip-position":"top",type:"button"}}},{type:"button",name:"png",group:"export",text:"Зураг татах",attrs:{button:{id:"btn-png","data-tooltip":"Зураг татах <i>(Ctrl+E)</i>","data-tooltip-position":"top",type:"button"}}}]};var W=(e=>(e.BASE="app.Base",e.MESSAGE="app.Message",e.FLOWCHART_START="app.FlowchartStart",e.FLOWCHART_END="app.FlowchartEnd",e.FLOWCHART_CANCEL="app.FlowchartCancel",e.FLOWCHART_POSTPONE="app.FlowchartPostpone",e.LINK="app.Link",e))(W||{});const mt=(e,o)=>{const t=de+B;return e.map((l,a)=>new i.g.Point({x:p+de/2+a*t,y:o.height}))},ae=i.dia.Element.define("app.Base",{},{getBoundaryPadding:function(){return i.util.normalizeSides(this.boundaryPadding)},toJSON:function(){const e=i.dia.Element.prototype.toJSON.call(this);return delete e.ports.groups,delete e.angle,e}},{fromStencilShape:function(e){const o={subject:{object_type:e.attr(["subject","object_type"]),subject_type:e.attr(["subject","subject_type"]),role_id:e.attr(["subject","role_id"]),user_id:e.attr(["subject","user_id"]),is_read_only:e.attr(["subject","is_read_only"]),is_subject_changeable:e.attr(["subject","is_subject_changeable"]),is_signature_needed:e.attr(["subject","is_signature_needed"])},label:{text:e.attr(["label","text"]),y:e.attr(["label","customY"])},description:{text:e.attr(["description","text"]),y:e.attr(["description","customY"])},body:{stroke:e.attr(["body","stroke"]),fill:e.attr(["body","fill"])},icon:{xlinkHref:e.attr(["icon","xlinkHref"])}},t={items:e.attr(["ports","items"]),groups:e.attr(["ports","groups"])};return new this({attrs:o,ports:t})}}),bt=ae.define("app.Message",{size:{width:368,height:80},ports:{groups:{in:{position:{name:"manual",args:{x:p,y:0}},size:{width:16,height:16},attrs:{portBody:{magnet:"passive",width:"calc(w)",height:"calc(h)",y:"calc(-0.5 * h)",rx:$,ry:$,fill:H,stroke:M,strokeWidth:X}},markup:[{tagName:"rect",selector:"portBody"}]},out:{position:mt,size:{width:de,height:Ae},attrs:{portBody:{magnet:"active",width:"calc(w)",height:"calc(h)",x:"calc(-0.5 * w)",y:"calc(-0.5 * h)",fill:M,ry:$,rx:$},portLabel:{pointerEvents:"none",fontFamily:P,fontWeight:400,fontSize:13,fill:H,textAnchor:"start",textVerticalAnchor:"middle",textWrap:{width:-se-p-B,maxLineCount:1,ellipsis:!0},x:p-de/2},portRemoveButton:{cursor:"pointer",event:"element:port:remove",transform:`translate(calc(0.5 * w - ${p}), 0)`,dataTooltip:"Устгах",dataTooltipPosition:"top"},portRemoveButtonBody:{width:se,height:se,x:-se/2,y:-se/2,fill:H,rx:$,ry:$},portRemoveButtonIcon:{d:"M -4 -4 4 4 M -4 4 4 -4",stroke:M,strokeWidth:X}},markup:[{tagName:"rect",selector:"portBody"},{tagName:"text",selector:"portLabel"},{tagName:"g",selector:"portRemoveButton",children:[{tagName:"rect",selector:"portRemoveButtonBody"},{tagName:"path",selector:"portRemoveButtonIcon"}]}]}},items:[{group:"in"}]},attrs:{body:{width:"calc(w)",height:"calc(h)",fill:H,strokeWidth:X/2,stroke:"#D4D4D4",rx:3,ry:3},label:{x:54,y:p,fontFamily:P,fontWeight:600,fontSize:16,fill:"#322A49",text:"Label",textWrap:{width:-54-p,maxLineCount:1,ellipsis:!0},textVerticalAnchor:"top"},description:{x:54,y:38,fontFamily:P,fontWeight:400,fontSize:13,lineHeight:13,fill:"#655E77",textVerticalAnchor:"top",text:"Тайлбар",textWrap:{width:-54-p,maxLineCount:2,ellipsis:!0}},subject:{object_type:null,subject_type:null,role_id:null,user_id:null,is_read_only:!1,is_subject_changeable:!1,is_signature_needed:!1},icon:{width:20,height:20,x:p,y:24,xlinkHref:"https://image.flaticon.com/icons/svg/151/151795.svg"},portAddButton:{cursor:"pointer",fill:V,event:"element:port:add",transform:"translate(calc(w - 28), calc(h))",dataTooltip:"Үйлдэл нэмэх",dataTooltipPosition:"top"},portAddButtonBody:{width:ie,height:ie,rx:$,ry:$,x:-ie/2,y:-ie/2},portAddButtonIcon:{d:"M -4 0 4 0 M 0 -4 0 4",stroke:"#FFFFFF",strokeWidth:X}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"},{tagName:"text",selector:"description"},{tagName:"image",selector:"icon"},{tagName:"g",selector:"portAddButton",children:[{tagName:"rect",selector:"portAddButtonBody"},{tagName:"path",selector:"portAddButtonIcon"}]}],boundaryPadding:{horizontal:p,top:p,bottom:Ae/2+p},addDefaultPort:function(){this.canAddPort("out")&&this.addPort({group:"out",attrs:{portLabel:{text:Qe}}})},canAddPort:function(e){return Object.keys(this.getGroupPorts(e)).length<et},toggleAddPortButton:function(e){const o=this.canAddPort(e)?{fill:V,cursor:"pointer"}:{fill:"#BEBEBE",cursor:"not-allowed"};this.attr(["portAddButton"],o,{dry:!0})}}),vt=ae.define("app.FlowchartStart",{size:{width:48,height:48},ports:{groups:{out:{position:{name:"bottom"},attrs:{portBody:{fill:M,stroke:Y,strokeWidth:6,paintOrder:"stroke",magnet:"active",r:"calc(0.5 * d)"}},size:{width:10,height:10},markup:[{tagName:"circle",selector:"portBody"}]}},items:[{group:"out"}]},attrs:{body:{fill:V,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:24},icon:{d:"M 2 8 L 4.29 5.71 L 1.41 2.83 L 2.83 1.41 L 5.71 4.29 L 8 2 L 8 8 Z M -2 8 L -8 8 L -8 2 L -5.71 4.29 L -1 -0.41 L -1 -8 L 1 -8 L 1 0.41 L -4.29 5.71 Z",fill:H,transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Flowchart start",textWrap:{width:200,height:100,ellipsis:!0},x:"calc(0.5 * w)",y:-p,textAnchor:"middle",textVerticalAnchor:"bottom",fill:"#55627B",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}],boundaryPadding:{horizontal:p,top:B,bottom:p}}),yt=ae.define("app.FlowchartEnd",{size:{width:48,height:48},ports:{groups:{in:{position:{name:"top"},attrs:{portBody:{fill:M,stroke:Y,strokeWidth:6,paintOrder:"stroke",magnet:"passive",r:"calc(0.5 * d)"}},size:{width:10,height:10},markup:[{tagName:"circle",selector:"portBody"}]}},items:[{group:"in"}]},attrs:{body:{fill:V,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:24},icon:{d:"M 5 -8.45 L 6.41 -7.04 L 3 -3.635 L 1.59 -5.04 Z M -4.5 3.95 L -1 3.95 L -1 -1.63 L -6.41 -7.04 L -5 -8.45 L 1 -2.45 L 1 3.95 L 4.5 3.95 L 0 8.45 Z",fill:H,transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Flowchart end",textWrap:{width:200,height:100,ellipsis:!0},x:"calc(0.5 * w)",y:`calc(h + ${p})`,textAnchor:"middle",textVerticalAnchor:"top",fill:"#55627B",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}],boundaryPadding:{horizontal:p,top:p,bottom:B}}),wt=ae.define("app.FlowchartCancel",{size:{width:48,height:48},ports:{groups:{in:{position:{name:"top"},attrs:{portBody:{fill:M,stroke:Y,strokeWidth:6,paintOrder:"stroke",magnet:"passive",r:"calc(0.5 * d)"}},size:{width:10,height:10},markup:[{tagName:"circle",selector:"portBody"}]}},items:[{group:"in"}]},attrs:{body:{fill:V,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:24},icon:{d:"M 5 -8.45 L 6.41 -7.04 L 3 -3.635 L 1.59 -5.04 Z M -4.5 3.95 L -1 3.95 L -1 -1.63 L -6.41 -7.04 L -5 -8.45 L 1 -2.45 L 1 3.95 L 4.5 3.95 L 0 8.45 Z",fill:H,transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Flowchart end",textWrap:{width:200,height:100,ellipsis:!0},x:"calc(0.5 * w)",y:`calc(h + ${p})`,textAnchor:"middle",textVerticalAnchor:"top",fill:"#55627B",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}],boundaryPadding:{horizontal:p,top:p,bottom:B}}),xt=ae.define("app.FlowchartPostpone",{size:{width:48,height:48},ports:{groups:{in:{position:{name:"top"},attrs:{portBody:{fill:M,stroke:Y,strokeWidth:6,paintOrder:"stroke",magnet:"passive",r:"calc(0.5 * d)"}},size:{width:10,height:10},markup:[{tagName:"circle",selector:"portBody"}]}},items:[{group:"in"}]},attrs:{body:{fill:V,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:24},icon:{d:"M 5 -8.45 L 6.41 -7.04 L 3 -3.635 L 1.59 -5.04 Z M -4.5 3.95 L -1 3.95 L -1 -1.63 L -6.41 -7.04 L -5 -8.45 L 1 -2.45 L 1 3.95 L 4.5 3.95 L 0 8.45 Z",fill:H,transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Flowchart end",textWrap:{width:200,height:100,ellipsis:!0},x:"calc(0.5 * w)",y:`calc(h + ${p})`,textAnchor:"middle",textVerticalAnchor:"top",fill:"#55627B",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}],boundaryPadding:{horizontal:p,top:p,bottom:B}}),Lt=i.dia.Link.define("app.Link",{attrs:{root:{cursor:"pointer"},line:{fill:"none",connection:!0,stroke:M,strokeWidth:X},wrapper:{fill:"none",connection:!0,stroke:"transparent",strokeWidth:10},arrowhead:{d:"M -5 -2.5 0 0 -5 2.5 Z",stroke:M,fill:M,atConnectionRatio:.55,strokeWidth:X}},labels:[{attrs:{labelText:{text:""}},position:{distance:.25}}]},{markup:[{tagName:"path",selector:"line"},{tagName:"path",selector:"wrapper"},{tagName:"path",selector:"arrowhead"}],defaultLabel:{markup:[{tagName:"rect",selector:"labelBody"},{tagName:"text",selector:"labelText"}],attrs:{labelText:{fontFamily:P,fontSize:13,textWrap:{width:200,height:100,ellipsis:!0},cursor:"pointer",fill:M,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},labelBody:{ref:"labelText",fill:Y,stroke:Y,strokeWidth:2,width:"calc(w)",height:"calc(h)",x:"calc(x)",y:"calc(y)"}}}});Object.assign(i.shapes,{app:{Base:ae,Message:bt,FlowchartStart:vt,FlowchartEnd:yt,FlowchartCancel:wt,FlowchartPostpone:xt,Link:Lt}});const D=48,Ct=i.dia.Element.define("stencil.FlowchartStart",{name:"FlowchartStart",size:{width:D,height:D},attrs:{body:{fill:V,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:"calc(0.5 * w)"},icon:{d:"M 2 8 L 4.29 5.71 L 1.41 2.83 L 2.83 1.41 L 5.71 4.29 L 8 2 L 8 8 Z M -2 8 L -8 8 L -8 2 L -5.71 4.29 L -1 -0.41 L -1 -8 L 1 -8 L 1 0.41 L -4.29 5.71 Z",fill:"#FFFFFF",transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Боловсруулах",x:`calc(w + ${p})`,y:"calc(0.5 * h)",textAnchor:"start",textVerticalAnchor:"middle",fill:"#242424",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}]}),kt=i.dia.Element.define("stencil.FlowchartEnd",{name:"FlowchartEnd",size:{width:D,height:D},attrs:{body:{fill:V,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:"calc(0.5 * w)"},icon:{d:"M 5 -8.45 L 6.41 -7.04 L 3 -3.635 L 1.59 -5.04 Z M -4.5 3.95 L -1 3.95 L -1 -1.63 L -6.41 -7.04 L -5 -8.45 L 1 -2.45 L 1 3.95 L 4.5 3.95 L 0 8.45 Z",fill:"#FFFFFF",transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Төсөл албажсан",x:`calc(w + ${p})`,y:"calc(0.5 * h)",textAnchor:"start",textVerticalAnchor:"middle",fill:"#242424",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}]}),St=i.dia.Element.define("stencil.FlowchartCancel",{name:"FlowchartCancel",size:{width:D,height:D},attrs:{body:{fill:tt,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:"calc(0.5 * w)"},icon:{d:"M 5 -8.45 L 6.41 -7.04 L 3 -3.635 L 1.59 -5.04 Z M -4.5 3.95 L -1 3.95 L -1 -1.63 L -6.41 -7.04 L -5 -8.45 L 1 -2.45 L 1 3.95 L 4.5 3.95 L 0 8.45 Z",fill:"#FFFFFF",transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Цуцлах",x:`calc(w + ${p})`,y:"calc(0.5 * h)",textAnchor:"start",textVerticalAnchor:"middle",fill:"#242424",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}]}),At=i.dia.Element.define("stencil.FlowchartPostpone",{name:"FlowchartPostpone",size:{width:D,height:D},attrs:{body:{fill:ot,stroke:"none",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:"calc(0.5 * w)"},icon:{d:"M 5 -8.45 L 6.41 -7.04 L 3 -3.635 L 1.59 -5.04 Z M -4.5 3.95 L -1 3.95 L -1 -1.63 L -6.41 -7.04 L -5 -8.45 L 1 -2.45 L 1 3.95 L 4.5 3.95 L 0 8.45 Z",fill:"#FFFFFF",transform:"translate(calc(0.5 * w), calc(0.5 * h))"},label:{text:"Хойшлуулах",x:`calc(w + ${p})`,y:"calc(0.5 * h)",textAnchor:"start",textVerticalAnchor:"middle",fill:"#242424",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"path",selector:"icon"},{tagName:"text",selector:"label"}]}),Et=i.dia.Element.define("stencil.Message",{name:"Message",size:{width:D,height:D},attrs:{body:{fill:H,stroke:"#E8E8E8",cx:"calc(0.5 * w)",cy:"calc(0.5 * h)",r:"calc(0.5 * w)"},icon:{width:20,height:20,x:"calc(0.5 * w - 10)",y:"calc(0.5 * h - 10)",xlinkHref:lt},label:{text:"Component",x:`calc(w + ${p})`,y:"calc(0.5 * h)",textAnchor:"start",textVerticalAnchor:"middle",fill:"#242424",fontFamily:P,fontSize:13}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"image",selector:"icon"},{tagName:"text",selector:"label"}]});Object.assign(i.shapes,{stencil:{Message:Et,FlowchartStart:Ct,FlowchartEnd:kt,FlowchartCancel:St,FlowchartPostpone:At}});function Tt(e,o,t,l){const a=new i.dia.Graph({},{cellNamespace:i.shapes}),n=new i.dia.Paper({model:a,async:!0,sorting:i.dia.Paper.sorting.APPROX,gridSize:Ee,linkPinning:!1,multiLinks:!1,snapLinks:!0,moveThreshold:5,magnetThreshold:"onleave",background:{color:Y},cellViewNamespace:i.shapes,interactive:{labelMove:!0,linkMove:!1},defaultRouter:{name:"manhattan",args:{padding:{bottom:p,vertical:B,horizontal:B},step:Ee}},defaultConnector:{name:"rounded"},defaultLink:()=>new i.shapes.app.Link,validateConnection:(b,x,A,w)=>!(b===A||A.findAttribute("port-group",w)!=="in"||b.findAttribute("port-group",x)!=="out")}),r=new i.ui.PaperScroller({paper:n,autoResizePaper:!0,contentOptions:{padding:100,allowNewOrigin:"any",allowNegativeBottomRight:!0,useModelGeometry:!0},scrollWhileDragging:!0,cursor:"grab",baseWidth:1e3,baseHeight:1e3});o.appendChild(r.el),r.render().center(),ft(r,{threshold:50});const _=new i.ui.Stencil({paper:r,width:240,scaleClones:!0,dropAnimation:!0,paperOptions:{sorting:i.dia.Paper.sorting.NONE,background:{color:at}},dragStartClone:b=>{const x=b.get("name"),A=i.shapes.app[x];if(!A)throw new Error(`Invalid stencil shape name: ${x}`);return A.fromStencilShape(b)},layout:{columns:1,rowGap:B,rowHeight:"auto",marginY:B,marginX:-p,dx:0,dy:0,resizeToFit:!1}});t.appendChild(_.el),_.render();const y=new i.dia.CommandManager({graph:a}),d=new i.ui.Toolbar({tools:gt.tools,autoToggle:!0,references:{paperScroller:r,commandManager:y}});l.appendChild(d.el),d.render();const c=new i.ui.Tooltip({rootTarget:e,container:e,target:"[data-tooltip]",direction:i.ui.Tooltip.TooltipArrowPosition.Auto,padding:B,animation:!0}),m=new i.ui.Keyboard;return{graph:a,paper:n,scroller:r,stencil:_,toolbar:d,tooltip:c,keyboard:m,history:y}}const Be=i.elementTools.Remove.extend({options:{useModelGeometry:!0,action:(e,o)=>{o.notify("cell:tool:remove",e)},markup:[{tagName:"circle",selector:"button",attributes:{r:10,fill:"#FD0B88",cursor:"pointer","data-tooltip":"Устгах <i>(Del)</i>","data-tooltip-position":"bottom"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -4 4 4 M -4 4 4 -4",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}]}});function Nt(e){e.model.isLink()?Ot(e):Pt(e)}function Pt(e){const t=e.model.getBoundaryPadding(),l=new i.dia.ToolsView({tools:[new i.elementTools.Boundary({useModelGeometry:!0,padding:t}),new Be({x:"100%",offset:{x:t.right,y:-t.top}})]});e.addTools(l)}function Ot(e){const o=new i.dia.ToolsView({tools:[new i.linkTools.Vertices,new i.linkTools.SourceArrowhead,new i.linkTools.TargetArrowhead,new i.linkTools.Boundary({padding:15}),new Be({offset:-20,distance:40})]});e.addTools(o)}const jt={shapes:[{name:"FlowchartStart",attrs:{subject:{object_type:"START",subject_type:"ANY_EMP",role_id:null,user_id:null,is_read_only:!1,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Хянах"},description:{text:"Хянах шат"},icon:{xlinkHref:nt},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Хянасан"}}},{group:"out",attrs:{portLabel:{text:"Буцаасан"}}}]},subject:{object_type:"CHECK",subject_type:"TO_ROLE",role_id:null,user_id:null,is_read_only:!1,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Дахин боловсруулах"},description:{text:"Дахин боловсруулах эсвэл төслийг цуцлах"},icon:{xlinkHref:rt},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Цуцалсан"}}},{group:"out",attrs:{portLabel:{text:"Дахин боловсруулсан"}}}]},subject:{object_type:"RE_CREATE",subject_type:"CREATOR",role_id:null,user_id:null,is_read_only:!1,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Саналын хуудас бэлтгэх"},description:{text:"Саналын хуудас бэлтгэх, санал өгөх албан тушаалтан сонгох"},icon:{xlinkHref:Te},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Саналын хуудас бэлтгэсэн"}}}]},subject:{object_type:"PREPARE_VOTE",subject_type:"CREATOR",struct_id:null,emp_id:null,is_read_only:!0,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Шийдвэрлэх, цохох"},description:{text:"Шийдвэрлэх, Холбогдох хүмүүст цохох"},icon:{xlinkHref:ce},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Холбогдох хүмүүст цохсон"}}},{group:"out",attrs:{portLabel:{text:"Шийдвэрлэсэн"}}}]},subject:{object_type:"TRANSFER",subject_type:"CREATOR",struct_id:null,emp_id:null,is_read_only:!0,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Шийдвэрлэх, цохох 2"},description:{text:"Шийдвэрлэх, Холбогдох хүмүүст цохох"},icon:{xlinkHref:ce},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Холбогдох хүмүүст цохсон"}}},{group:"out",attrs:{portLabel:{text:"Шийдвэрлэсэн"}}}]},subject:{object_type:"TRANSFER",subject_type:"ANY_EMP",struct_id:null,emp_id:null,is_read_only:!0,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Хүлээлгэн өгөх"},description:{text:"Ажилтнуудад өгөх"},icon:{xlinkHref:ce},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Ажилтнуудад өгсөн"}}}]},subject:{object_type:"GIVE",subject_type:"CREATOR",struct_id:null,emp_id:null,is_read_only:!0,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Хүлээн авах"},description:{text:"Хүлээн авах"},icon:{xlinkHref:ce},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Хүлээн авсан"}}}]},subject:{object_type:"RECEIVE",subject_type:"DIRECT",struct_id:null,emp_id:null,is_read_only:!0,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"Message",attrs:{label:{text:"Санал авах"},description:{text:"Санал авах хуудасны дагуу санал авах"},icon:{xlinkHref:Te},ports:{items:[{group:"in"},{group:"out",attrs:{portLabel:{text:"Зөвшөөрнө"}}},{group:"out",attrs:{portLabel:{text:"Зөвшөөрөхгүй"}}}]},subject:{object_type:"VOTE",subject_type:"VOTERS",struct_id:null,emp_id:null,is_read_only:!0,is_signature_needed:!0,is_subject_changeable:!1}}},{name:"FlowchartEnd",attrs:{subject:{object_type:"END",subject_type:"CURRENT",role_id:null,user_id:null,is_read_only:!1,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"FlowchartCancel",attrs:{subject:{object_type:"CANCEL",subject_type:"CURRENT",role_id:null,user_id:null,is_read_only:!1,is_signature_needed:!1,is_subject_changeable:!1}}},{name:"FlowchartPostpone",attrs:{subject:{object_type:"POSTPONE",subject_type:"CURRENT",role_id:null,user_id:null,is_read_only:!1,is_signature_needed:!1,is_subject_changeable:!1}}}]};function ne(e,o){const{paper:t,selection:l,eventBusService:a}=e;t.removeTools(),l.forEach(n=>{const r=n.findView(t);r&&r.vel.removeClass("selected")}),e.selection=o,o.forEach(n=>{const r=n.findView(t);r&&(r.vel.addClass("selected"),Nt(r))}),a.emit(G.SELECTION_CHANGED,o)}function Ft(e){const{selection:o,graph:t}=e;o.length!==0&&t.removeCells(o)}function Me(e){const{scroller:o}=e;o.zoomToFit({minScale:te,maxScale:ee,scaleGrid:J,useModelGeometry:!0,padding:p})}function Rt(e){const{scroller:o}=e;o.zoom(J,{min:te,max:ee})}function Bt(e){const{scroller:o}=e;o.zoom(-J,{min:te,max:ee})}function Ie(e){const{paper:o}=e;o.hideTools(),o.dumpViews(),o.toPNG(t=>{o.showTools(),Mt(e,t)},{padding:10,useComputedStyles:!1})}function Mt(e,o,t="Rappid"){const{keyboard:l,controllers:a}=e,{keyboard:n}=a;n.stopListening();const r=new i.ui.Lightbox({image:o,downloadable:!0,fileName:t});r.on("action:close",()=>{n.startListening()}),r.listenTo(l,"escape",()=>{n.startListening(),r.close()}),r.open()}function Pe(e,o){ne(e,[]);const{graph:t,history:l}=e,a=Object.values(W);l.reset();try{if(o.cells.some(n=>!a.includes(n.type)))throw new Error("Invalid JSON: Unknown Cell Type");t.fromJSON(o)}catch{}}async function It(e){const{stencil:o}=e;try{const a=(await st.get("/workflow/steps")).data.map(c=>{const m=[{group:"in"},...c.sub_process_step_ports.map(b=>({group:b.group,attrs:{portLabel:{text:b.attrs}}}))];return{name:"Message",attrs:{label:{text:c.label},description:{text:c.description||"No description available"},icon:{xlinkHref:c.icon||"default-icon-path"},ports:{items:m},subject:{object_type:c.object_type,subject_type:c.subject_type,role_id:c.org_role_id,user_id:c.emp_id,is_read_only:c.is_read_only,is_signature_needed:c.is_signature_needed,is_subject_changeable:c.is_subject_changeable}}}}),n=jt.shapes,r=n.slice(0,-3),_=n.slice(-3),d=[...r,...a,..._].map(c=>new i.shapes.stencil[c.name](c));o.load(d)}catch(t){console.error("Error loading stencil shapes:",t)}}function xe(e){const{paper:o,graph:t}=e;t.getLinks().forEach(l=>{const a=l.findView(o);a&&a.requestConnectionUpdate()})}function Dt(e){const{history:o}=e;o.undo()}function zt(e){const{history:o}=e;o.redo()}const Ht=500;class $t extends Fe{startListening(){const{graph:o,paper:t,toolbar:l,history:a,eventBusService:n}=this.service;this.listenTo(n,{[G.GRAPH_START_BATCH]:Wt,[G.GRAPH_STOP_BATCH]:Vt}),this.listenTo(o,{add:Gt,remove:Ut,"change:ports":Zt}),this.listenTo(a,{stack:i.util.debounce(Jt,Ht)}),this.listenTo(t,{"paper:pinch":Kt,"paper:pan":qt,"blank:pointerdown":Yt,"cell:pointerup":Xt,"cell:tool:remove":lo,"element:pointermove":Qt,"element:pointerup":eo,"element:port:add":to,"element:port:remove":oo,scale:ao}),this.listenTo(l,{"png:pointerclick":no})}}function Wt(e,o){const{graph:t}=e;t.startBatch(o)}function Vt(e,o){const{graph:t}=e;t.stopBatch(o)}function Gt(e,o){o.isLink()||(ne(e,[o]),xe(e))}function Ut(e,o){const{selection:t}=e;t.includes(o)&&(ne(e,t.filter(l=>l!==o)),o.isElement()&&xe(e))}function Zt(e,o){o.toggleAddPortButton("out")}function Jt(e){const{graph:o,eventBusService:t}=e;t.emit(G.GRAPH_CHANGED,o.toJSON())}function Yt(e,o){const{scroller:t}=e;ne(e,[]),t.startPanning(o)}function Kt(e,o,t,l,a){const{scroller:n}=e;o.preventDefault(),n.zoom(a-1,{min:te,max:ee,grid:J,ox:t,oy:l})}function qt(e,o,t,l){const{scroller:a}=e;o.preventDefault(),a.el.scrollLeft+=t,a.el.scrollTop+=l}function Xt(e,o){ne(e,[o.model])}function Qt(e,o,t){const{paper:l}=e,{data:a}=t;a.pointermoveCalled||(a.pointermoveCalled=!0,l.hideTools())}function eo(e,o,t){const{paper:l}=e,{data:a}=t;a.pointermoveCalled&&(l.showTools(),xe(e))}function to(e,o,t){t.stopPropagation(),o.model.addDefaultPort()}function oo(e,o,t){t.stopPropagation();const l=o.findAttribute("port",t.target);o.model.removePort(l)}function lo(e,o,t){o.model.remove()}function ao(e){const{tooltip:o}=e;o.hide()}function no(e){Ie(e)}class ro extends Fe{startListening(){const{keyboard:o}=this.service;this.listenTo(o,{escape:so,"delete backspace":io,"ctrl+0":po,"ctrl+plus":co,"ctrl+minus":uo,"ctrl+z":ho,"ctrl+y":_o,"ctrl+e":fo})}}function so(e){ne(e,[])}function io(e){Ft(e)}function co(e,o){o.preventDefault(),Rt(e)}function uo(e,o){o.preventDefault(),Bt(e)}function po(e){Me(e)}function ho(e){Dt(e)}function _o(e){zt(e)}function fo(e){Ie(e)}class go{constructor(o,t,l,a,n){j(this,"controllers");j(this,"graph");j(this,"history");j(this,"keyboard");j(this,"paper");j(this,"selection",[]);j(this,"scroller");j(this,"stencil");j(this,"toolbar");j(this,"tooltip");j(this,"subscriptions",new we);this.scopeElement=o,this.eventBusService=n,Object.assign(this,Tt(o,t,l,a)),this.controllers={rappid:new $t(this),keyboard:new ro(this)},this.subscriptions.add(n.events().subscribe(({name:r,value:_})=>n.trigger(r,_)))}destroy(){const{paper:o,scroller:t,stencil:l,toolbar:a,tooltip:n,controllers:r,subscriptions:_}=this;o.remove(),t.remove(),l.remove(),a.remove(),n.remove(),Object.keys(r).forEach(y=>r[y].stopListening()),_.unsubscribe()}}const mo={class:"json-editor-container"},bo=500,vo={__name:"Json-editor",props:{content:Object},setup(e){const o=new it,t=oe().appContext.config.globalProperties.$eventBusService;return le(()=>{o.pipe(_t(bo)).subscribe(l=>{t.emit(G.JSON_EDITOR_CHANGED,l)})}),(l,a)=>(L(),N("div",mo,Oe(e.content),1))}},yo=Re(vo,[["__scopeId","data-v-d8532553"]]),wo=g("h1",null,"Тохиргоо",-1),xo={key:0},Lo={key:1},Co=g("hr",{class:"my-3"},null,-1),ko=g("br",null,null,-1),So=g("br",null,null,-1),Ao={class:"ports"},Eo={class:"out-ports-bar"},To=g("span",null,"Үйлдлүүд",-1),No=["disabled"],Po=["onClick"],Oo={__name:"Message-inspector",props:{cell:i.dia.Cell,structs:Array},setup(e){const o=oe().appContext.config.globalProperties.$eventBusService,t=e,l=h({id:t.cell.id}),a=h(""),n=h(""),r=h(""),_=h([]),y=h(!1),d=h(!1),c=h(!1),m=h(!1),b=h(""),x=h(""),A=h(""),w=h(""),s={label:["attrs","label","text"],description:["attrs","description","text"],object_type:["attrs","subject","object_type"],subject_type:["attrs","subject","subject_type"],user_id:["attrs","subject","user_id"],role_id:["attrs","subject","role_id"],is_read_only:["attrs","subject","is_read_only"],is_signature_needed:["attrs","subject","is_signature_needed"],is_subject_changeable:["attrs","subject","is_subject_changeable"],icon:["attrs","icon","xlinkHref"],portLabel:["attrs","portLabel","text"]},U=()=>{a.value=t.cell.prop(s.label),n.value=t.cell.prop(s.description),b.value=t.cell.prop(s.object_type),x.value=t.cell.prop(s.subject_type),A.value=t.cell.prop(s.user_id),w.value=t.cell.prop(s.role_id),d.value=t.cell.prop(s.is_read_only),c.value=t.cell.prop(s.is_signature_needed),m.value=t.cell.prop(s.is_subject_changeable),r.value=t.cell.prop(s.icon),F()},F=()=>{y.value=t.cell.canAddPort("out"),_.value=t.cell.getGroupPorts("out").map(({id:k})=>({id:k,label:t.cell.portProp(k,s.portLabel)}))},O=(k,u)=>{t.cell.prop(k,u)},K=k=>{O(s.role_id,k.role_id),O(s.user_id,k.user_id)},E=k=>{k.on("change",()=>U(),l.value)},C=k=>{k.off(null,null,l.value)},z=()=>{t.cell.addDefaultPort(),F()},Le=k=>{t.cell.removePort(k),F()},De=k=>{t.cell.portProp(k.id,s.portLabel,k.label)};return he(()=>t.cell,(k,u)=>{C(u),E(k),U()}),le(()=>{E(t.cell),U()}),(k,u)=>{const Ce=I("a-input"),ze=I("a-textarea"),re=I("a-radio"),He=I("a-radio-group"),_e=I("a-checkbox"),fe=ve("batch");return L(),N("div",null,[wo,g("label",null,[S("Нэр "),Z(f(Ce,{value:a.value,"onUpdate:value":u[0]||(u[0]=v=>a.value=v),onChange:u[1]||(u[1]=()=>O(s.label,a.value)),placeholder:"Нэр"},null,8,["value"]),[[fe,{eventBusService:R(o)}]])]),g("label",null,[S("Тайлбар "),Z(f(ze,{placeholder:"Тайлбар",value:n.value,"onUpdate:value":u[2]||(u[2]=v=>n.value=v),"show-count":"",onChange:u[3]||(u[3]=()=>O(s.description,n.value))},null,8,["value"]),[[fe,{eventBusService:R(o)}]])]),g("label",null,[S("Хариуцагчийн төрөл "),f(He,{value:x.value,"onUpdate:value":u[4]||(u[4]=v=>x.value=v),onChange:u[5]||(u[5]=()=>O(s.subject_type,x.value))},{default:T(()=>[f(re,{value:"ANY_EMP"},{default:T(()=>[S("Бүртгэлтэй хэрэглэгч")]),_:1}),f(re,{value:"VOTERS"},{default:T(()=>[S("Санал өгөгчид")]),_:1}),f(re,{value:"TO_ROLE"},{default:T(()=>[S("Системийн Хандах эрхээр")]),_:1}),f(re,{value:"DIRECT"},{default:T(()=>[S("Тогтмол")]),_:1}),f(re,{value:"CREATOR"},{default:T(()=>[S("Боловсруулсан хэрэглэгч")]),_:1})]),_:1},8,["value"])]),x.value==="TO_ROLE"?(L(),N("div",xo,[f(pe,{role_id:w.value,"onUpdate:role_id":u[6]||(u[6]=v=>w.value=v),user_id:A.value,"onUpdate:user_id":u[7]||(u[7]=v=>A.value=v),onChange:K,"hide-user-select":!0},null,8,["role_id","user_id"])])):Q("",!0),x.value==="DIRECT"?(L(),N("div",Lo,[f(pe,{role_id:w.value,"onUpdate:role_id":u[8]||(u[8]=v=>w.value=v),user_id:A.value,"onUpdate:user_id":u[9]||(u[9]=v=>A.value=v),onChange:K},null,8,["role_id","user_id"])])):Q("",!0),Co,f(_e,{checked:d.value,"onUpdate:checked":u[10]||(u[10]=v=>d.value=v),onChange:u[11]||(u[11]=()=>O(s.is_read_only,d.value))},{default:T(()=>[S("Зөвхөн харах")]),_:1},8,["checked"]),ko,f(_e,{checked:c.value,"onUpdate:checked":u[12]||(u[12]=v=>c.value=v),onChange:u[13]||(u[13]=()=>O(s.is_signature_needed,c.value))},{default:T(()=>[S("Цахимаар гарын үсэг зурах")]),_:1},8,["checked"]),So,f(_e,{checked:m.value,"onUpdate:checked":u[14]||(u[14]=v=>m.value=v),onChange:u[15]||(u[15]=()=>O(s.is_subject_changeable,m.value))},{default:T(()=>[S("Хариуцагч солих боломжой")]),_:1},8,["checked"]),g("div",Ao,[g("div",Eo,[To,g("button",{disabled:!y.value,onClick:z,class:"add-port",type:"button","data-tooltip":"Үйлдэл нэмэх"},null,8,No)]),(L(!0),N(Ge,null,Ue(_.value,v=>(L(),N("div",{class:"port",key:v.id},[Z(f(Ce,{value:v.label,"onUpdate:value":ke=>v.label=ke,onChange:()=>De(v),placeholder:"Үйлдэл нэр"},null,8,["value","onUpdate:value","onChange"]),[[fe,{eventBusService:R(o)}]]),g("div",{class:"remove-port",onClick:ke=>Le(v.id),"data-tooltip":"Үйлдэл устгах"},null,8,Po)]))),128))])])}}},jo=g("h1",null,"Холбоос",-1),Fo={__name:"Link-inspector",props:{cell:i.dia.Cell},setup(e){const o=oe().appContext.config.globalProperties.$eventBusService,t=e,l=h({id:t.cell.id}),a=h(""),n={label:["labels",0,"attrs","labelText","text"]},r=()=>{a.value=t.cell.prop(n.label)},_=(c,m)=>{t.cell.prop(c,m)},y=c=>{c.on("change",()=>r(),l.value)},d=c=>{c.off(null,null,l.value)};return he(()=>t.cell,(c,m)=>{d(m),y(c),r()},{deep:!1}),le(()=>{y(t.cell),r()}),(c,m)=>{const b=I("a-input"),x=ve("batch");return L(),N("div",null,[jo,g("label",null,[S("Холбоос нэр "),Z(f(b,{value:a.value,"onUpdate:value":m[0]||(m[0]=A=>a.value=A),onChange:m[1]||(m[1]=()=>_(n.label,a.value)),placeholder:"Холбоос нэр"},null,8,["value"]),[[x,{eventBusService:R(o)}]])])])}}},Ro=g("h1",null,"Үндсэн үйлдэл",-1),Bo={key:0},Mo={key:1},ue={__name:"Label-inspector",props:{cell:i.dia.Cell},setup(e){const o=oe().appContext.config.globalProperties.$eventBusService,t=e,l=h(""),a=h(""),n=h(""),r=h(""),_=h(""),y=h({id:t.cell.id}),d={label:["attrs","label","text"],object_type:["attrs","subject","object_type"],subject_type:["attrs","subject","subject_type"],role_id:["attrs","subject","role_id"],user_id:["attrs","subject","user_id"]},c=()=>{l.value=t.cell.prop(d.label),a.value=t.cell.prop(d.object_type),n.value=t.cell.prop(d.subject_type),r.value=t.cell.prop(d.role_id),_.value=t.cell.prop(d.user_id)},m=(w,s)=>{t.cell.prop(w,s)},b=w=>{m(d.role_id,w.role_id),m(d.user_id,w.user_id)},x=w=>{w.on("change",()=>c(),y.value)},A=w=>{w.off(null,null,y.value)};return he(()=>t.cell,(w,s)=>{A(s),x(w),c()},{deep:!1}),le(()=>{x(t.cell),c()}),(w,s)=>{const U=I("a-input"),F=I("a-radio"),O=I("a-radio-group"),K=ve("batch");return L(),N("div",null,[Ro,g("label",null,[S("Нэр "),Z(f(U,{value:l.value,"onUpdate:value":s[0]||(s[0]=E=>l.value=E),onChange:s[1]||(s[1]=()=>m(d.label,l.value)),placeholder:"Нэр"},null,8,["value"]),[[K,{eventBusService:R(o)}]])]),g("label",null,[S("Хариуцагчийн төрөл "),f(O,{value:n.value,"onUpdate:value":s[2]||(s[2]=E=>n.value=E),onChange:s[3]||(s[3]=()=>m(d.subject_type,n.value))},{default:T(()=>[f(F,{value:"ANY_EMP"},{default:T(()=>[S("Бүртгэлтэй хэрэглэгч")]),_:1}),f(F,{value:"VOTERS"},{default:T(()=>[S("Санал өгөгчид")]),_:1}),f(F,{value:"TO_ROLE"},{default:T(()=>[S("Системийн Хандах эрхээр")]),_:1}),f(F,{value:"DIRECT"},{default:T(()=>[S("Системийн хэрэглэгч")]),_:1}),f(F,{value:"CREATOR"},{default:T(()=>[S("Боловсруулсан хэрэглэгч")]),_:1})]),_:1},8,["value"])]),n.value==="TO_ROLE"?(L(),N("div",Bo,[f(pe,{role_id:r.value,"onUpdate:role_id":s[4]||(s[4]=E=>r.value=E),user_id:_.value,"onUpdate:user_id":s[5]||(s[5]=E=>_.value=E),onChange:b,"hide-user-select":!0},null,8,["role_id","user_id"])])):Q("",!0),n.value==="DIRECT"?(L(),N("div",Mo,[f(pe,{role_id:r.value,"onUpdate:role_id":s[6]||(s[6]=E=>r.value=E),user_id:_.value,"onUpdate:user_id":s[7]||(s[7]=E=>_.value=E),onChange:b},null,8,["role_id","user_id"])])):Q("",!0)])}}},Io={key:0},Do={key:1},zo={__name:"Inspector",setup(e){const t=oe().appContext.config.globalProperties.$eventBusService,l=h(null),a=n=>{const[r=null]=n;l.value=r};return le(()=>{const n=t.subscribe(G.SELECTION_CHANGED,a);je(()=>{n.unsubscribe()})}),(n,r)=>(L(),N("div",{class:me(["inspector-container",{"disabled-container":!l.value}])},[l.value!==null?(L(),N("div",Io,[l.value.get("type")===R(W).MESSAGE?(L(),q(Oo,{key:0,cell:l.value},null,8,["cell"])):l.value.get("type")===R(W).LINK?(L(),q(Fo,{key:1,cell:l.value},null,8,["cell"])):Q("",!0),l.value.get("type")===R(W).FLOWCHART_START?(L(),q(ue,{key:2,cell:l.value},null,8,["cell"])):l.value.get("type")===R(W).FLOWCHART_END?(L(),q(ue,{key:3,cell:l.value},null,8,["cell"])):l.value.get("type")===R(W).FLOWCHART_CANCEL?(L(),q(ue,{key:4,cell:l.value},null,8,["cell"])):l.value.get("type")===R(W).FLOWCHART_POSTPONE?(L(),q(ue,{key:5,cell:l.value},null,8,["cell"])):Q("",!0)])):(L(),N("div",Do," Сонгоно уу "))],2))}},Ho={class:"side-bar"},$o={class:"main-container"},Wo={__name:"Workflow",props:{flowData:String},emits:["changed"],setup(e,{emit:o}){const t=h(null),l=h(null),a=h(null),n=h(null),r=h(!0),_=h(!1),y=h(!1),d=Ze({}),c=new we,m=oe().appContext.config.globalProperties.$eventBusService;let b=null;const x=e,A=o;le(()=>{c.add(m.subscribe(G.GRAPH_CHANGED,C=>F(C))),c.add(m.subscribe(G.JSON_EDITOR_CHANGED,C=>U(C))),b=new go(t.value,n.value,a.value,l.value,m),E(),s()}),je(()=>{b&&b.destroy()});const w=C=>{y.value||(d.value=C,Pe(b,C),Me(b))},s=()=>{It(b),x.flowData&&w(JSON.parse(x.flowData))},U=C=>{b&&Pe(b,C)},F=C=>{d.value=C,y.value=!0,A("changed",C)},O=()=>{if(!b)return;const{scroller:C,stencil:z}=b;r.value?(z.unfreeze(),C.el.scrollLeft+=ge):(z.freeze(),C.el.scrollLeft-=ge)},K=()=>{r.value=!r.value,O()},E=()=>{a.value&&(a.value.style.width=`${ge}px`)};return he(()=>x.flowData,(C,z)=>{z===null&&C&&w(JSON.parse(x.flowData))},{deep:!1}),(C,z)=>(L(),N("div",{class:"rappid-scope workflow",ref_key:"elementRef",ref:t},[g("div",{ref_key:"toolbarRef",ref:l},null,512),g("div",Ho,[g("div",{class:me(["toggle-bar",{"disabled-toggle-bar":!r.value}])},[g("div",{onClick:z[0]||(z[0]=Le=>K()),class:me(["icon toggle-stencil",{"disabled-icon":!r.value}]),"data-tooltip":"Toggle Element Palette","data-tooltip-position-selector":".toggle-bar"},null,2)],2),Z(g("div",{ref_key:"stencilRef",ref:a,class:"stencil-container"},null,512),[[Se,r.value]])]),g("div",$o,[g("div",{ref_key:"paperRef",ref:n,class:"paper-container"},null,512),Z(f(yo,{content:d},null,8,["content"]),[[Se,_.value]])]),f(zo)],512))}},Vo={name:"datetimeFill",mixins:[Ve],components:{Workflow:Wo},data(){return{}},methods:{changed(e){this.model.form[this.model.component]=JSON.stringify(e)}},mounted(){},watch:{do_render(e){}}},Go={class:"workflow-creator"},Uo={class:"workflow-page"};function Zo(e,o,t,l,a,n){const r=I("Workflow",!0);return L(),N("div",null,[g("label",null,Oe(e.label),1),g("div",Go,[g("div",Uo,[f(r,{"flow-data":e.model.form[e.model.component],onChanged:n.changed},null,8,["flow-data","onChanged"])])])])}const ll=Re(Vo,[["render",Zo],["__scopeId","data-v-6d178e83"]]);export{ll as default};
