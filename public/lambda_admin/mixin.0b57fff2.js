import{a as w}from"./entry.9f5dc050.js";import{U as f,Y as o,Z as a,c as l,a4 as n,_ as i,a6 as c,F as $,a5 as k,a7 as d,H as u,a8 as v,y as b,ab as E}from"./vue.9a5b07a3.js";const M={name:"common",props:["parent","addAction","title","hideAction","permissions"],computed:{lang(){const e=["_add","Information_viewing_history","excelUpload"];return e.reduce((t,s,_)=>(t[s]=this.$t("crud."+e[_]),t),{})}}},U={class:"page-title float-left"},C={class:"float-left pt-3"},S={class:"text-gray-700 dark:text-gray-200 text-base m-0"},L={class:"text-gray-400 text-xs m-0"},P={key:0},I={key:0,class:"float-left ml-3"},D=i("span",{class:"divider"},null,-1),A={class:"anticon align-top ant-btn-svg-icon",style:{"vertical-align":"top"}},B={class:"page-title mb-3"},N={class:"text-gray-700 dark:text-gray-200 text-base m-0"},V={class:"text-gray-400 text-xs m-0"},F={key:0},R={class:"fixed bottom-14 right-2"},G={class:"settings-btn ant-btn-svg-icon"};function H(e,t,s,_,x,h){const p=f("inline-svg"),m=f("a-button"),g=f("portal");return o(),a($,null,[l(g,{to:"header-left"},{default:n(()=>[i("div",U,[i("div",C,[i("h1",S,c(s.title),1),i("h2",L,[(o(!0),a($,null,k(s.parent,(r,y)=>(o(),a("span",{key:r.index},[y>=1?(o(),a("span",P," / ")):d("",!0),u(c(r.title),1)]))),128))])])]),!s.hideAction&&s.permissions.c?(o(),a("div",I,[D,l(m,{type:"primary",onClick:s.addAction,shape:"round"},{icon:n(()=>[i("span",A,[l(p,{src:"/assets/icons/duotune/general/gen041.svg"})])]),default:n(()=>[u(" "+c(h.lang._add),1)]),_:1},8,["onClick"])])):d("",!0)]),_:1}),l(g,{to:"mobile-page-title"},{default:n(()=>[i("div",B,[i("div",null,[i("h1",N,c(s.title),1),i("h2",V,[(o(!0),a($,null,k(s.parent,(r,y)=>(o(),a("span",{key:r.index},[y>=1?(o(),a("span",F," / ")):d("",!0),u(c(r.title),1)]))),128))])])])]),_:1}),!s.hideAction&&s.permissions.c?(o(),v(g,{key:0,to:"header-mobile"},{default:n(()=>[i("div",R,[l(m,{type:"primary",onClick:s.addAction,shape:"circle",size:"large"},{icon:n(()=>[i("span",G,[l(p,{src:"/assets/icons/duotune/general/gen041.svg"})])]),_:1},8,["onClick"])])]),_:1})):d("",!0)],64)}const le=w(M,[["render",H]]),O={props:["refresh","exportExcel","print","search","save","options","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isPrint","isRefresh","isSave","isSearch","exportLoading"],data(){return{searchModel:null}},computed:{lang(){const e=["_save","re_call","_print","download_file","excelUpload"];return e.reduce((t,s,_)=>(t[s]=this.$t("crud."+e[_]),t),{})}},methods:{searchGrid(e){e.preventDefault(),this.$props.search(this.searchModel)}}},K={class:"crud-page-header-right-inside action"},T=i("i",{class:"ti-save"},null,-1),W=[T],q=i("i",{class:"ti-reload"},null,-1),z=[q],Y={class:"svg-icon"},Z=["href"],J=i("i",{class:"ti-layers"},null,-1),Q=[J],X=i("i",{class:"ti-layers"},null,-1),j=[X],ee={key:0,class:"btnLine",href:"javascript:void(0)"},te={class:"svg-icon"},se={class:"right-search"},ie=["placeholder"],oe=i("i",{class:"ti-search"},null,-1);function re(e,t,s,_,x,h){const p=f("a-tooltip"),m=f("inline-svg"),g=f("a-spin");return o(),a("div",K,[l(p,null,{title:n(()=>[u(c(h.lang._save),1)]),default:n(()=>[s.isSave?(o(),a("a",{key:0,onClick:t[0]||(t[0]=(...r)=>e.$props.save&&e.$props.save(...r)),class:"btnLine"},W)):d("",!0)]),_:1}),l(p,null,{title:n(()=>[u(c(h.lang.re_call),1)]),default:n(()=>[s.isRefresh?(o(),a("a",{key:0,onClick:t[1]||(t[1]=(...r)=>e.$props.refresh&&e.$props.refresh(...r)),class:"btnLine"},z)):d("",!0)]),_:1}),s.isPrint?(o(),v(p,{key:0},{title:n(()=>[u(c(h.lang._print),1)]),default:n(()=>[i("span",{class:"btn btn-icon",onClick:t[2]||(t[2]=(...r)=>e.$props.print&&e.$props.print(...r))},[i("span",Y,[l(m,{src:"/assets/icons/duotone/Devices/Printer.svg"})])])]),_:1})):d("",!0),s.isExcelUpload?(o(),v(p,{key:1},{title:n(()=>[u(c(h.lang.excelUpload),1)]),default:n(()=>[e.$props.excelUploadCustomUrl?(o(),a("a",{key:0,href:e.$props.excelUploadCustomUrl,class:"btnLine"},Q,8,Z)):(o(),a("a",{key:1,onClick:t[3]||(t[3]=(...r)=>e.$props.excelUploadMethod&&e.$props.excelUploadMethod(...r)),class:"btnLine"},j))]),_:1})):d("",!0),s.isExcel?(o(),v(p,{key:2},{title:n(()=>[u(c(h.lang.download_file),1)]),default:n(()=>[e.$props.exportLoading?(o(),a("a",ee,[l(g)])):(o(),a("span",{key:1,class:"btn btn-icon",onClick:t[4]||(t[4]=(...r)=>e.$props.exportExcel&&e.$props.exportExcel(...r))},[i("span",te,[l(m,{src:"/assets/icons/duotone/Files/Download.svg"})])]))]),_:1})):d("",!0),s.isSearch?(o(),a("form",{key:3,onSubmit:t[6]||(t[6]=(...r)=>h.searchGrid&&h.searchGrid(...r))},[i("div",se,[b(i("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>x.searchModel=r),placeholder:e.$t("dataForm.search"),class:"right-search-input"},null,8,ie),[[E,x.searchModel]]),oe])],32)):d("",!0)])}const de=w(O,[["render",re]]),ce={props:["title","icon","main_tab_title","grid","form","projects_id","hideHeader","hasSelection","actions","dbClickAction","onRowSelect","rowCurrentChange","permissions","user_condition","custom_condition","view_url","mode","onPropertySuccess","onPropertyError","page_id","withoutHeader","withCrudLog","base_url","parent"],components:{},data(){return{closeByBtn:!0,gridSrc:"",formSrc:"",editMode:!1,searchModel:"",form_width:600,exportLoading:!1,isPrint:!1,isExcel:!1,isRefresh:!1,isSave:!1,rowId:null,visibleDataForm:!1,isExcelUpload:!1,excelUploadCustomUrl:null}},computed:{hasVNavSlot(){return!!this.$slots["v-nav"]},hasNavSlot(){return!!this.$slots.nav},hasLeftSlot(){return!!this.$slots.left},url(){return this.base_url?this.base_url:""},lang(){const e=["_add","Information_viewing_history","excelUpload"];return e.reduce((t,s,_)=>(t[s]=this.$t("crud."+e[_]),t),{})}},methods:{view(e){this.rowId=e,this.editMode=!0,this.$refs.form.viewMode=!0,this.$refs.form.editModel(e),this.templateEdit&&this.templateEdit()},edit(e){this.rowId=e,this.editMode=!0,this.$refs.form.editModel(e),this.templateEdit&&this.templateEdit(e)},clone(e){this.$refs.form.cloneModel(e),this.templateEdit&&this.templateEdit(e)},quickEdit(e){console.log(e)},refresh(){this.searchModel=null,this.$refs.grid.refresh()},search(e){this.$refs.grid.searchData(e,1)},stopLoading(e){this.exportLoading=!1,e||this.$Message.error("\u0422\u0430\u0442\u0430\u0445 \u04AF\u0435\u0434 \u0430\u043B\u0434\u0430\u0430 \u0433\u0430\u0440\u043B\u0430\u0430!")},exportExcel(){this.exportLoading=!0,this.$refs.grid.exportExcel(this.stopLoading)},print(){this.$refs.grid.print()},excelUploadMethod(){this.$refs.grid.importExcel()},save(){this.$refs.grid.saveGridData()},onReady(e){window.innerWidth-100>=parseInt(e.width)?this.form_width=e.width:this.form_width=window.innerWidth,this.editMode&&this.rowId!==null&&this.rowId!==void 0&&this.$refs.form.editModel(this.rowId)},onSuccess(e){this.$refs.grid&&(typeof this.mode<"u"&&this.mode&&this.mode==="refresh"?this.$refs.grid.refresh():this.editMode?this.$refs.grid.update(e):this.$refs.grid.append(e)),this.editMode=!1,this.templateOnSuccess&&this.templateOnSuccess(e),this.onPropertySuccess&&this.onPropertySuccess()},onError(){this.templateOnError&&this.templateOnError(),this.onPropertyError&&this.onPropertyError()}}};export{de as K,le as c,ce as m};
