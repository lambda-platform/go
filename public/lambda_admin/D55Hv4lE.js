import{_,o as h,h as v}from"./BNUQ0oDs.js";import{x as r,y as s,D as c,ah as f,a7 as d,ai as a,C as u,q as n,aj as g}from"./Bb3cLOD_.js";import"./DTdGTy9U.js";import"./BYTvHWBW.js";import"./CU0CZyNU.js";const k={props:["selectedLang"],name:"aside-password-reset",data(){return{loading:!1,isSuccess:!1,isError:!1,errorMsg:"",successMsg:"",credentials:{code:null,email:null,password:null,password_confirm:null}}},mounted(){(this._.provides[h]||this.$route).query.email&&(this.credentials.email=(this._.provides[h]||this.$route).query.email)},computed:{lang(){const t=["passwordReset","passwordResetCode","email","password","passwordConfirm"];return t.reduce((i,p,m)=>(i[p]=this.$t("user."+t[m]),i),{})}},methods:{onSubmit(){this.isSuccess=!1,this.isError=!1,this.loading||(this.loading=!0,v.post("/auth/password-reset",{...this.credentials,lang:this.selectedLang}).then(({data:t})=>{setTimeout(()=>{this.loading=!1,t.status?(this.isSuccess=!0,this.successMsg=t.msg,setTimeout(()=>{this.$router.push("login")},2e3)):(this.isError=!0,this.errorMsg=this.lang.emailSendError)},1e3)}).catch(t=>{this.errorMsg=t.response.data.error,setTimeout(()=>{this.loading=!1,this.isError=!0},1e3)}))}}},w={class:"form-wrap"},b={class:"form-content"},y={class:"form-element input"},S=["placeholder"],x=s("span",{class:"icon user"},null,-1),M={class:"form-element input"},E=["placeholder"],R=s("span",{class:"icon pass"},null,-1),V={class:"form-element input"},C=["disabled","placeholder"],T=s("span",{class:"icon pass"},null,-1),U={class:"form-element input"},q=["disabled","placeholder"],B=s("span",{class:"icon pass"},null,-1),D={class:"form-element"},N=["disabled"],L={id:"submitTxt"},P={class:"loader"},j={key:0,class:"sk-fading-circle"},z=g('<div class="sk-circle1 sk-circle"></div><div class="sk-circle2 sk-circle"></div><div class="sk-circle3 sk-circle"></div><div class="sk-circle4 sk-circle"></div><div class="sk-circle5 sk-circle"></div><div class="sk-circle6 sk-circle"></div><div class="sk-circle7 sk-circle"></div><div class="sk-circle8 sk-circle"></div><div class="sk-circle9 sk-circle"></div><div class="sk-circle10 sk-circle"></div><div class="sk-circle11 sk-circle"></div><div class="sk-circle12 sk-circle"></div>',12),A=[z],F={id:"msg"},G={key:0,class:"success"},H={key:1,class:"error"};function I(t,i,p,m,e,o){return n(),r("div",w,[s("div",b,[s("h2",null,c(o.lang.passwordReset),1),s("form",{onSubmit:i[4]||(i[4]=f((...l)=>o.onSubmit&&o.onSubmit(...l),["prevent"])),method:"post",class:"login-form"},[s("div",y,[d(s("input",{type:"text",id:"email","onUpdate:modelValue":i[0]||(i[0]=l=>e.credentials.email=l),name:"email",autocomplete:"off",placeholder:o.lang.email},null,8,S),[[a,e.credentials.email]]),x]),s("div",M,[d(s("input",{type:"text",id:"code","onUpdate:modelValue":i[1]||(i[1]=l=>e.credentials.code=l),name:"code",autocomplete:"off",placeholder:o.lang.passwordResetCode},null,8,E),[[a,e.credentials.code]]),R]),s("div",V,[d(s("input",{type:"password","onUpdate:modelValue":i[2]||(i[2]=l=>e.credentials.password=l),disabled:e.loading,placeholder:o.lang.password},null,8,C),[[a,e.credentials.password]]),T]),s("div",U,[d(s("input",{type:"password","onUpdate:modelValue":i[3]||(i[3]=l=>e.credentials.password_confirm=l),disabled:e.loading,placeholder:o.lang.passwordConfirm},null,8,q),[[a,e.credentials.password_confirm]]),B]),s("div",D,[s("button",{id:"submit",class:"button",disabled:e.loading,style:{width:"100%"}},[s("span",L,c(o.lang.passwordReset),1),s("span",P,[e.loading?(n(),r("div",j,A)):u("",!0)])],8,N)])],32),s("div",F,[e.isSuccess?(n(),r("span",G,c(e.successMsg),1)):u("",!0),e.isError?(n(),r("span",H,c(e.errorMsg),1)):u("",!0)])])])}const X=_(k,[["render",I]]);export{X as default};
