import{_ as ee,aV as te}from"./3ncfVO38.js";import{u as oe,_ as ne}from"./Bv4EkHaP.js";import{K as ie,c as se}from"./Cv2D29o5.js";import{j as a,P as re,D as f,E as C,F as d,H as c,G as o,u as e,I as ae,V as p,J as E,L as h,N as le,M as de}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";import"./B4FiMg9Z.js";import"./CByKS65z.js";const ce={class:"krud-drawer"},ue={class:"offcanvas-template"},me={class:"crud-page"},fe={class:"crud-page-body"},pe={id:"drawer-container"},he={id:"left_panel"},ve={class:"ant-drawer-content-wrapper"},ge={class:"ant-drawer-content"},we={class:"ant-drawer-wrapper-body"},xe={class:"ant-drawer-header"},_e={key:0,class:"ant-drawer-header-title flex p-4 border-b"},Se={class:"ant-drawer-title flex-grow"},Ce={class:"ant-drawer-body"},Ee={__name:"drawer",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(t){const{t:b}=te(),v=t,g=a(null),w=a(null),s=a(!1),r=a(!1),u=a(0);function m(){r.value=!1,l.value=!1,s.value.style.width="0px",s.value.style.flex="0 0 0px"}function x(){if(!r.value){r.value=!0;let i=(window.innerWidth-300)/100,n=parseInt(i*40);s.value.style.width=n+"px",s.value.style.flex=`0 0 ${n}px`}}function y(){x()}function R(){m()}function I(){}const{editMode:l,exportLoading:k,isPrint:D,isExcel:U,isRefresh:L,isSave:B,rowId:N,isExcelUpload:F,excelUploadCustomUrl:M,url:_,view:O,edit:$,clone:P,quickEdit:V,refresh:j,search:z,exportExcel:A,print:K,excelUploadMethod:H,save:T,onReady:G,onSuccess:Q,onError:Z,changeKrudTool:q}=oe(v,g,w,y,R,I,b,v.CRUD_ID);function S(i){window.getSelection().removeAllRanges();const n=u.value-i.x;u.value=i.x,s.value.style.width=parseInt(getComputedStyle(s.value,"").width)+n+"px",s.value.style.flex=`0 0 ${parseInt(getComputedStyle(s.value,"").width)+n}px`}function J(){s.value.addEventListener("mousedown",n=>{n.offsetX<4&&(u.value=n.x,document.addEventListener("mousemove",S,!1))},!1),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",S,!1)},!1)}return re(()=>{J()}),(i,n)=>{const W=f("portal"),X=f("datagrid"),Y=f("dataform");return d(),C(de,null,[c(e(ne),{parent:t.parent,title:t.title,addAction:x,permissions:t.permissions,CRUD_ID:t.CRUD_ID},null,8,["parent","title","permissions","CRUD_ID"]),c(W,{to:"header-right"},{default:ae(()=>[c(e(ie),{search:e(z),refresh:e(j),exportExcel:e(A),exportLoading:e(k),print:e(K),save:e(T),isPrint:e(D),isExcel:e(U),isExcelUpload:e(F),excelUploadCustomUrl:e(M),excelUploadMethod:e(H),isRefresh:e(L),isSave:e(B)},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),o("div",ce,[o("section",ue,[o("div",me,[o("div",fe,[o("div",pe,[o("div",he,[o("div",{class:p(r.value?"dg-flex open-drawer":"dg-flex")},[t.permissions&&t.permissions.r?(d(),E(X,{key:0,ref_key:"dataGrid",ref:w,url:e(_),schemaID:t.grid,paginate:50,fnClone:e(P),fnEdit:e($),fnQuickEdit:e(V),fnView:e(O),actions:i.$props.actions,dblClick:i.$props.dbClickAction,onRowSelect:i.$props.onRowSelect,permissions:t.permissions,page_id:t.page_id,custom_condition:i.$props.custom_condition?i.$props.custom_condition:null,user_condition:t.user_condition?t.user_condition.gridCondition:null,changeKrudTool:e(q)},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition","changeKrudTool"])):h("",!0)],2)]),o("div",{id:"right_panel",class:p(["ant-drawer",r.value?"show-panel":"hide-panel"]),ref_key:"panel",ref:s},[n[1]||(n[1]=o("div",{class:"resizer"},null,-1)),o("div",ve,[o("div",ge,[o("div",we,[o("div",xe,[r.value?(d(),C("div",_e,[o("div",Se,le(t.title),1),o("button",{"aria-label":"Close",onClick:m,class:"ant-drawer-close"},n[0]||(n[0]=[o("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[o("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[o("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1)]))])):h("",!0)]),o("div",Ce,[o("div",{class:p(t.withCrudLog&&e(l)?"with-crud-log":"crud-form")},[c(Y,{ref_key:"dataForm",ref:g,hideTitle:!0,schemaID:t.form,title:t.title,url:e(_),editMode:e(l),onSuccess:e(Q),onReady:e(G),do_render:r.value,permissions:t.permissions,page_id:t.page_id,user_condition:t.user_condition?t.user_condition.formCondition:null,onError:e(Z),close:m},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError"]),t.withCrudLog&&e(l)?(d(),E(e(se),{key:0,form:t.form,rowId:e(N),grid:t.grid},null,8,["form","rowId","grid"])):h("",!0)],2)])])])])],2)])])])])])],64)}}},Be=ee(Ee,[["__scopeId","data-v-fbd3dfb5"]]);export{Be as default};
