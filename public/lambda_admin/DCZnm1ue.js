import{u as Y,_ as Z}from"./yMYS5QQ5.js";import{aV as ee}from"./BGcy_aHF.js";import{K as oe,c as te}from"./BbAe9LWe.js";import{j as d,D as s,E as ie,F as l,H as n,G as r,u as e,I as C,V as ne,J as w,L as v}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";import"./B4FiMg9Z.js";import"./CByKS65z.js";const re={class:"card drawer-wrappper"},se={class:"offcanvas-template"},ae={class:"crud-page"},de={class:"crud-page-body"},le={id:"drawer-container"},Ce={__name:"popup",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(o){const{t:E}=ee(),c=o,u=d(null),m=d(null),t=d(!1);function f(){t.value=!1,a.value=!1}function p(){t.value=!0}function x(){p()}function b(){f()}function U(){}const{editMode:a,form_width:R,exportLoading:k,isPrint:D,isExcel:_,isRefresh:I,isSave:y,rowId:g,isExcelUpload:N,excelUploadCustomUrl:B,url:h,view:F,edit:L,clone:$,quickEdit:V,refresh:j,search:M,exportExcel:O,print:P,excelUploadMethod:K,save:T,onReady:A,onSuccess:G,onError:H,changeKrudTool:Q}=Y(c,u,m,x,b,U,E,c.CRUD_ID);return(i,S)=>{const q=s("portal"),z=s("datagrid"),J=s("dataform"),W=s("a-modal");return l(),ie("div",re,[n(e(Z),{parent:o.parent,title:o.title,addAction:p,permissions:o.permissions,CRUD_ID:o.CRUD_ID},null,8,["parent","title","permissions","CRUD_ID"]),n(q,{to:"header-right"},{default:C(()=>[n(e(oe),{search:e(M),refresh:e(j),exportExcel:e(O),exportLoading:e(k),print:e(P),save:e(T),isPrint:e(D),isExcel:e(_),isExcelUpload:e(N),excelUploadCustomUrl:e(B),excelUploadMethod:e(K),isRefresh:e(I),isSave:e(y),isSearch:!1},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),r("section",se,[r("div",ae,[r("div",de,[r("div",le,[r("div",{class:ne(t.value?"dg-flex open-drawer":"dg-flex")},[o.permissions&&o.permissions.r?(l(),w(z,{key:0,ref_key:"dataGrid",ref:m,url:e(h),schemaID:o.grid,paginate:50,fnClone:e($),fnEdit:e(L),fnQuickEdit:e(V),fnView:e(F),actions:i.$props.actions,dblClick:i.$props.dbClickAction,onRowSelect:i.$props.onRowSelect,permissions:o.permissions,page_id:o.page_id,custom_condition:i.$props.custom_condition?i.$props.custom_condition:null,user_condition:o.user_condition?o.user_condition.gridCondition:null,changeKrudTool:e(Q)},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition","changeKrudTool"])):v("",!0)],2)])])])]),n(W,{open:t.value,"onUpdate:open":S[0]||(S[0]=X=>t.value=X),class:"create",maskClosable:!1,title:o.withCrudLog?`${o.title} : ${e(g)}`:o.title,forceRender:!0,width:e(R),footer:null,placement:"right"},{default:C(()=>[n(J,{ref_key:"dataForm",ref:u,hideTitle:!0,schemaID:o.form,title:o.title,url:e(h),editMode:e(a),onSuccess:e(G),onReady:e(A),do_render:t.value,permissions:o.permissions,page_id:o.page_id,user_condition:o.user_condition?o.user_condition.formCondition:null,onError:e(H),close:f},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError"]),o.withCrudLog&&e(a)?(l(),w(e(te),{key:0,form:o.form,rowId:e(g),grid:o.grid},null,8,["form","rowId","grid"])):v("",!0)]),_:1},8,["open","title","width"])])}}};export{Ce as default};
