import{a as _,s as o,K as f,P as g,M as y,e as w,L as b,b as x}from"./entry.bd917c2d.js";import{U as n,Y as p,Z as d,c as l,a4 as u,a8 as C,a7 as a,_ as k,H as I,a6 as S}from"./vue.9a5b07a3.js";import"./cryptoJs.12d0d048.js";import"./ant.9c0b679d.js";import"./common.a3ab4f3b.js";import"./moment.8b5e7d95.js";import"./ag.16cfe0bb.js";import"./lodash.2101602c.js";import"./numeral.08866ac3.js";const M={computed:{menuMode(){let i=localStorage.getItem("menuMode");if(i)return i},isMobile(){return isMobile}},data(){const i=o.get(f),e=o.get(g),t=o.get(y),r=o.get(w),s=o.get(b);return{options:{height:"1000px"},pageType:"",property:{base_url:x,withCrudLog:s.withCrudLog,withoutHeader:!1,page_id:null,template:"drawer",mode:"refresh",title:"",projects_id:null,grid:null,form:null,form_width:800,view_url:null,actions:null,user_condition:null,parent:[],permissions:{c:!1,r:!1,u:!1,d:!1}},iframeUrl:"",iframeTitle:"",submenu:[],showSub:!1,cruds:i,menu:t,menu_list:r,permissions:e.permissions,pageTitle:"",subMenuId:"0",showNestedMenu:!1}},methods:{getShowAbleChild(i){let e=i.findIndex(t=>this.can(t));return e>=0?i[e]:null},can(i){return this.permissions[i.id]?!!this.permissions[i.id].show:!1},getTitle(i){if(i.link_to=="crud"){let e=this.cruds.findIndex(t=>t.id==i.url);return e>=0?this.cruds[e].title:""}else return i.title},getPage(){if(this.menu_list){let i=this.menu_list.findIndex(e=>e.id===this.$route.params.menu_id);if(i>=0){let e=this.menu_list[i];switch(this.pageType=e.link_to,this.pageType){case"crud":let t=this.cruds.findIndex(r=>r.id==e.url);if(t>=0){this.$route.meta.title=this.cruds[t].title,this.property.parent=e.parent,this.property.title=this.cruds[t].title,this.property.projects_id=this.cruds[t].projects_id,this.property.grid=this.cruds[t].grid,this.property.form=this.cruds[t].form,this.property.edit_id=this.cruds[t].edit_id,this.property.template=this.cruds[t].template,this.cruds[t].actions&&(this.property.actions=this.cruds[t].actions),this.property.main_tab_title=this.cruds[t].main_tab_title,this.property.form_width=this.cruds[t].form_width?this.cruds[t].form_width:null,this.property.view_url=this.cruds[t].view_url,this.property.permissions.c=this.permissions[e.id].c,this.property.permissions.r=this.permissions[e.id].r,this.property.permissions.u=this.permissions[e.id].u,this.property.permissions.d=this.permissions[e.id].d,this.property.permissions.gridDeleteConditionJS=this.permissions[e.id].gridDeleteConditionJS,this.property.permissions.gridEditConditionJS=this.permissions[e.id].gridEditConditionJS;let r={};this.permissions[e.id].formCondition&&(r.formCondition=this.permissions[e.id].formCondition),this.permissions[e.id].gridCondition&&(r.gridCondition=this.permissions[e.id].gridCondition),r&&(this.property.user_condition=r),this.property.page_id=e.id}break;case"link":window.location=this.menu[parentIndex].url;break;case"router-link":console.log(this.menu[parentIndex].url),this.$router.push(this.menu[parentIndex].url);break;case"iframe":this.iframeUrl=e.url,this.property.title=e.title;break}}}}},beforeMount(){this.getPage()}},T={class:"rounded-md grid grow grid-nogutter"},N={key:1,class:"iframe-page"},v=["src"];function U(i,e,t,r,s,E){const m=n("Title"),h=n("Head"),c=n("krud");return p(),d("div",T,[l(h,null,{default:u(()=>[l(m,null,{default:u(()=>[I(S(s.property.title),1)]),_:1})]),_:1}),s.pageType==="crud"&&s.property.page_id!=null?(p(),C(c,{key:0,template:s.property.template,property:s.property,class:"material",base_url:s.property.base_url},null,8,["template","property","base_url"])):a("",!0),s.pageType==="iframe"?(p(),d("div",N,[k("iframe",{src:s.iframeUrl},null,8,v)])):a("",!0)])}const K=_(M,[["render",U]]);export{K as default};
