import{_ as S}from"./xEUPE1C8.js";import{_ as M,h as m}from"./BGcy_aHF.js";import{D as i,E as d,F as u,G as e,H as r,N as l,I as a,O as x,L as g}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";const C={props:["lambda","onSuccess","selectedLang","onError"],name:"aside-login",data(){return{loading:!1,isSuccess:!1,isError:!1,errorMessage:null,rememberMe:!1,credentials:{login:null,password:null}}},computed:{lang(){const t=["loginTitle","username","password","remember","login","forgot","loginSuccess","loginError"];return t.reduce((n,c,h)=>(n[c]=this.$t("user."+t[h]),n),{})}},methods:{onSubmit(){this.isSuccess=!1,this.isError=!1,this.loading||(this.loading=!0,m.defaults.headers.common.Authorization="",m.defaults.withCredentials=!0,m.post("/auth/login",this.credentials).then(({data:t})=>{t.status?this.onSuccess(t):(this.isError=!0,this.loading=!1),this.errorMessage=null}).catch(t=>{this.loading=!1,this.isError=!0,this.onError&&this.onError(),t.response&&t.response.data.error&&(this.errorMessage=t.response.data.error)}))}}},N={class:"form-content"},T={key:0,class:"logo with-text"},L=["src"],U={key:1,class:"logo"},V=["src"],B={class:"space-y-6"},G={class:"loginInput"},q={class:"pb-2 text-slate-700"},D={class:"svg-icon"},I={class:"pb-2 text-slate-700"},z={class:"svg-icon"},A={class:"flex flex-row justify-between space-x-4"},F={class:"text-slate-700"},H={class:""},O={id:"msg"},j={key:0,class:"success"},J={key:1,class:"error"},K={key:2,class:"error"};function P(t,n,c,h,s,o){const p=i("inline-svg"),v=i("a-input"),f=i("a-form-item"),b=i("a-input-password"),w=i("a-checkbox"),k=S,y=i("a-button"),E=i("a-form");return u(),d("div",N,[c.lambda.logoText!=""?(u(),d("div",T,[e("img",{src:c.lambda.logo,alt:""},null,8,L),e("span",null,l(c.lambda.logoText),1)])):(u(),d("div",U,[e("img",{src:c.lambda.logo,alt:""},null,8,V)])),e("h2",null,l(o.lang.loginTitle),1),r(E,{class:"mx-auto",model:s.credentials,layout:"vertical",autocomplete:"off"},{default:a(()=>[e("div",B,[e("div",G,[r(f,{name:"login",rules:[{required:!0,message:o.lang.username}]},{default:a(()=>[e("div",q,l(o.lang.username),1),r(v,{type:"text",placeholder:o.lang.username,value:s.credentials.login,"onUpdate:value":n[0]||(n[0]=_=>s.credentials.login=_)},{prefix:a(()=>[e("span",D,[r(p,{class:"w-4 h-4 mr-1",src:"/assets/icons/duotone/General/User.svg"})])]),_:1},8,["placeholder","value"])]),_:1},8,["rules"]),r(f,{name:"password",rules:[{required:!0,message:o.lang.password}]},{default:a(()=>[e("div",I,l(o.lang.password),1),r(b,{placeholder:o.lang.password,value:s.credentials.password,"onUpdate:value":n[1]||(n[1]=_=>s.credentials.password=_)},{prefix:a(()=>[e("span",z,[r(p,{class:"w-4 h-4 mr-1",src:"/assets/icons/duotone/General/Lock.svg"})])]),_:1},8,["placeholder","value"])]),_:1},8,["rules"]),e("div",A,[r(w,{checked:s.rememberMe,"onUpdate:checked":n[2]||(n[2]=_=>s.rememberMe=_),id:"remember_me"},{default:a(()=>[e("span",F,l(o.lang.remember),1)]),_:1},8,["checked"]),r(k,{class:"forgot",to:"/auth/forgot"},{default:a(()=>[x(l(o.lang.forgot),1)]),_:1})])]),e("div",H,[r(y,{type:"primary",class:"w-full",loading:s.loading,style:{"border-radius":"8px",height:"38px"},onClick:o.onSubmit,"html-type":"submit"},{default:a(()=>[x(l(o.lang.login),1)]),_:1},8,["loading","onClick"])]),e("div",O,[s.isSuccess?(u(),d("span",j,l(o.lang.loginSuccess),1)):g("",!0),s.isError?(u(),d("span",J,l(o.lang.loginError),1)):g("",!0),s.errorMessage&&s.errorMessage!=="Нэвтрэх нэр эсвэл нууц үг буруу байна"?(u(),d("p",K,l(s.errorMessage),1)):g("",!0)])])]),_:1},8,["model"])])}const Z=M(C,[["render",P]]);export{Z as default};
