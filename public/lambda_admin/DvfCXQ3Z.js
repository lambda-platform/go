import"./BNUQ0oDs.js";import{T as _,c as T,e as S,V as c,M as s,a as u,S as d,b as a,F as n,C as k,d as z,f as v,g as F,h as L}from"./Qfm9_UtH.js";import{c as j,I as C,x as G,y as l,q as P}from"./Bb3cLOD_.js";import"./DTdGTy9U.js";import"./BYTvHWBW.js";import"./CU0CZyNU.js";class V extends _{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",o=e.tileGrid!==void 0?e.tileGrid:T({extent:S(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Z=l("div",{id:"popup",class:"ol-popup text-[13px]"},[l("a",{href:"#",id:"popup-closer",class:"ol-popup-closer"}),l("div",{id:"popup-content"})],-1),I={__name:"khan-map",setup(m){const e=j(null);return C(()=>{const t=new c({format:new s,url:"http://127.0.0.1:8080/tiles/{z}/{x}/{y}.pbf"}),o=new u({source:t,style:r=>new d({stroke:new a({color:"#ffcc33",width:2}),fill:new n({color:"rgba(255, 255, 0, 0.1)"}),image:new k({radius:5,fill:new n({color:"red"}),stroke:new a({color:"black",width:1})})})}),p=new c({format:new s,url:"http://127.0.0.1:8080/buildings/{z}/{x}/{y}.pbf"}),f=new u({source:p,style:r=>new d({stroke:new a({color:"#333dff",width:2}),fill:new n({color:"rgba(61,140,244,0.1)"})})});new z({source:new V({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})});const i=new v({target:e.value,layers:[o,f],view:new F({center:L([106.91736415028574,47.91876971846709]),zoom:16})});function w(r,h){h.forEachFeatureAtPixel(r.pixel,(g,x)=>{if(x){const y=g.getProperties(),b=r.coordinate;console.log(y),console.log(b)}})}i.once("rendercomplete",()=>{i.on("singleclick",r=>w(r,i))})}),(t,o)=>(P(),G("div",null,[l("div",{ref_key:"mapContainer",ref:e,class:"map-container"},null,512),Z]))}};export{I as default};
