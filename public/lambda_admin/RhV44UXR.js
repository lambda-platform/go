import{u as te,_ as oe}from"./yMYS5QQ5.js";import{aV as ie}from"./BGcy_aHF.js";import{K as ne,c as re}from"./BbAe9LWe.js";import{j as d,D as a,E as ae,F as l,H as n,G as i,u as e,I as C,V as S,J as v,L as x}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";import"./B4FiMg9Z.js";import"./CByKS65z.js";const se={class:"krud-canvas"},ce={class:"offcanvas-template"},de={class:"crud-page"},le={class:"crud-page-body"},ue={id:"drawer-container"},xe={__name:"canvas",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(t){const{t:p}=ie(),u=t,m=d(null),f=d(null),o=d(!1);function s(){o.value=!1,r.value=!1}function E(){h()}function D(){s()}function b(){}const{editMode:r,form_width:U,exportLoading:k,isPrint:R,isExcel:I,isRefresh:y,isSave:L,rowId:c,isExcelUpload:N,excelUploadCustomUrl:B,showID:F,url:g,view:_,edit:A,clone:V,quickEdit:j,refresh:M,search:O,exportExcel:P,print:K,excelUploadMethod:T,save:G,onReady:H,onSuccess:$,onError:Q,recordAndDoAction:q,changeKrudTool:z}=te(u,m,f,E,D,b,p,u.CRUD_ID);async function h(){await q()&&(o.value=!0)}return(J,w)=>{const W=a("portal"),X=a("datagrid"),Y=a("dataform"),Z=a("a-drawer");return l(),ae("div",se,[n(e(oe),{parent:t.parent,title:t.title,addAction:h,permissions:t.permissions,CRUD_ID:t.CRUD_ID},null,8,["parent","title","permissions","CRUD_ID"]),n(W,{to:"header-right"},{default:C(()=>[n(e(ne),{search:e(O),refresh:e(M),exportExcel:e(P),exportLoading:e(k),print:e(K),save:e(G),isPrint:e(R),isExcel:e(I),isExcelUpload:e(N),excelUploadCustomUrl:e(B),excelUploadMethod:e(T),isRefresh:e(y),isSave:e(L),isSearch:!1},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),i("section",ce,[i("div",de,[i("div",le,[i("div",ue,[i("div",{class:S(o.value?"dg-flex open-drawer":"dg-flex")},[t.permissions&&t.permissions.r?(l(),v(X,{key:0,ref_key:"dataGrid",ref:f,url:e(g),schemaID:t.grid,paginate:50,fnClone:e(V),fnEdit:e(A),fnQuickEdit:e(j),fnView:e(_),actions:t.actions,dblClick:t.dbClickAction,onRowSelect:t.onRowSelect,permissions:t.permissions,page_id:t.page_id,custom_condition:t.custom_condition?t.custom_condition:null,user_condition:t.user_condition?t.user_condition.gridCondition:null,changeKrudTool:e(z)},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition","changeKrudTool"])):x("",!0)],2)])])])]),n(Z,{open:o.value,"onUpdate:open":w[0]||(w[0]=ee=>o.value=ee),class:"canvas-drawer",maskClosable:!1,forceRender:!0,title:t.withCrudLog&&e(c)&&e(F)?`${t.title} : ${e(c)}`:t.title,width:e(U),placement:"right",onClose:s},{default:C(()=>[i("div",{class:S(t.withCrudLog&&e(r)?"with-crud-log":"crud-form")},[n(Y,{ref_key:"dataForm",ref:m,hideTitle:!0,schemaID:t.form,title:t.title,url:e(g),editMode:e(r),onSuccess:e($),onReady:e(H),do_render:o.value,permissions:t.permissions,page_id:t.page_id,user_condition:t.user_condition?t.user_condition.formCondition:null,onError:e(Q),close:s},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError"]),t.withCrudLog&&e(r)?(l(),v(e(re),{key:0,form:t.form,rowId:e(c),grid:t.grid},null,8,["form","rowId","grid"])):x("",!0)],2)]),_:1},8,["open","title","width"])])}}};export{xe as default};
