import{n as xe,a as ls,i as $t,e as us,v as ye,aH as cs,Q as ds,E as K,F as L,H as le,aC as Se,I as pe,G as re,u as z,b as Nn,r as fs,p as oe,a1 as Gn,a2 as Le,V as Ee,t as $e,aI as ja,j as we,P as ct,y as st,R as Za,M as ke,U as It,o as hs,L as ge,aJ as Wa,J as Ce,m as eo,N as Fe,f as Mi,W as Ka,aK as Qa,q as At,D as Rt,x as _e,d as me,aL as Ti,a0 as nt,ah as xt,O as Ae,aM as dn,X as Ja,w as el,ae as tl,aN as Ki,aO as nl,aP as dt,aQ as ol,aR as Ho,al as il,aS as rl}from"./DXHvmmg6.js";import{aw as yt,ax as at,ay as _o,_ as sl,az as bo,aA as Qi,aB as Ji,aC as er,aD as Vt,aE as Qt,aF as Tn,aG as Jt}from"./BGcy_aHF.js";import{_ as tr,a as Lo}from"./rD7lcgUv.js";function $o(e){return ls()?(Gn(e),!0):!1}function tt(e){return typeof e=="function"?e():z(e)}const al=typeof window<"u"&&typeof document<"u",ll=e=>typeof e<"u",ul=Object.prototype.toString,cl=e=>ul.call(e)==="[object Object]",dl=()=>{};function fl(e,t){function n(...o){return new Promise((i,s)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(s)})}return n}const gs=e=>e();function hl(e=gs){const t=we(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...s)=>{t.value&&e(...s)};return{isActive:Ja(t),pause:n,resume:o,eventFilter:i}}function nr(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function gl(e,t,n={}){const{eventFilter:o=gs,...i}=n;return ye(e,fl(o,t),i)}function Ht(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:s,pause:r,resume:a,isActive:l}=hl(o);return{stop:gl(e,t,{...i,eventFilter:s}),pause:r,resume:a,isActive:l}}function vl(e,t={}){if(!Mi(e))return Ka(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Qa(()=>({get(){return e.value[o]},set(i){var s;if((s=tt(t.replaceRef))!=null?s:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=i,e.value=a}else{const a={...e.value,[o]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=i}}));return n}function ri(e,t=!1){function n(d,{flush:h="sync",deep:g=!1,timeout:b,throwOnTimeout:x}={}){let E=null;const D=[new Promise(w=>{E=ye(e,k=>{d(k)!==t&&(E==null||E(),w(k))},{flush:h,deep:g,immediate:!0})})];return b!=null&&D.push(nr(b,x).then(()=>tt(e)).finally(()=>E==null?void 0:E())),Promise.race(D)}function o(d,h){if(!Mi(d))return n(k=>k===d,h);const{flush:g="sync",deep:b=!1,timeout:x,throwOnTimeout:E}=h??{};let $=null;const w=[new Promise(k=>{$=ye([e,d],([F,U])=>{t!==(F===U)&&($==null||$(),k(F))},{flush:g,deep:b,immediate:!0})})];return x!=null&&w.push(nr(x,E).then(()=>tt(e)).finally(()=>($==null||$(),tt(e)))),Promise.race(w)}function i(d){return n(h=>!!h,d)}function s(d){return o(null,d)}function r(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,h){return n(g=>{const b=Array.from(g);return b.includes(d)||b.includes(tt(d))},h)}function u(d){return c(1,d)}function c(d=1,h){let g=-1;return n(()=>(g+=1,g>=d),h)}return Array.isArray(tt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return ri(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:s,toBeNaN:a,toBeUndefined:r,changed:u,changedTimes:c,get not(){return ri(e,!t)}}}function si(e){return ri(e)}function pl(e){var t;const n=tt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const vs=al?window:void 0;function ps(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=vs):[t,n,o,i]=e,!t)return dl;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const s=[],r=()=>{s.forEach(c=>c()),s.length=0},a=(c,d,h,g)=>(c.addEventListener(d,h,g),()=>c.removeEventListener(d,h,g)),l=ye(()=>[pl(t),tt(i)],([c,d])=>{if(r(),!c)return;const h=cl(d)?{...d}:d;s.push(...n.flatMap(g=>o.map(b=>a(c,g,b,h))))},{immediate:!0,flush:"post"}),u=()=>{l(),r()};return $o(u),u}function ml(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function or(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=vs,eventName:s="keydown",passive:r=!1,dedupe:a=!1}=o,l=ml(t);return ps(i,s,c=>{c.repeat&&tt(a)||l(c)&&n(c)},r)}function yl(e){return JSON.parse(JSON.stringify(e))}function Fo(e,t,n,o={}){var i,s,r;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:h}=o,g=Nn(),b=n||(g==null?void 0:g.emit)||((i=g==null?void 0:g.$emit)==null?void 0:i.bind(g))||((r=(s=g==null?void 0:g.proxy)==null?void 0:s.$emit)==null?void 0:r.bind(g==null?void 0:g.proxy));let x=u;t||(t="modelValue"),x=x||`update:${t.toString()}`;const E=w=>a?typeof a=="function"?a(w):yl(w):w,$=()=>ll(e[t])?E(e[t]):d,D=w=>{h?h(w)&&b(x,w):b(x,w)};if(l){const w=$(),k=we(w);let F=!1;return ye(()=>e[t],U=>{F||(F=!0,k.value=E(U),st(()=>F=!1))}),ye(k,U=>{!F&&(U!==e[t]||c)&&D(U)},{deep:c}),k}else return oe({get(){return $()},set(w){D(w)}})}var wl={value:()=>{}};function xo(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Xn(n)}function Xn(e){this._=e}function _l(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Xn.prototype=xo.prototype={constructor:Xn,on:function(e,t){var n=this._,o=_l(e+"",n),i,s=-1,r=o.length;if(arguments.length<2){for(;++s<r;)if((i=(e=o[s]).type)&&(i=bl(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<r;)if(i=(e=o[s]).type)n[i]=ir(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ir(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Xn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,s;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,i=s.length;o<i;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,s=o.length;i<s;++i)o[i].value.apply(t,n)}};function bl(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function ir(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=wl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var ai="http://www.w3.org/1999/xhtml";const rr={svg:"http://www.w3.org/2000/svg",xhtml:ai,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Eo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),rr.hasOwnProperty(t)?{space:rr[t],local:e}:e}function $l(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ai&&t.documentElement.namespaceURI===ai?t.createElement(e):t.createElementNS(n,e)}}function xl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ms(e){var t=Eo(e);return(t.local?xl:$l)(t)}function El(){}function Di(e){return e==null?El:function(){return this.querySelector(e)}}function Nl(e){typeof e!="function"&&(e=Di(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var s=t[i],r=s.length,a=o[i]=new Array(r),l,u,c=0;c<r;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Oe(o,this._parents)}function Sl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cl(){return[]}function ys(e){return e==null?Cl:function(){return this.querySelectorAll(e)}}function kl(e){return function(){return Sl(e.apply(this,arguments))}}function Ml(e){typeof e=="function"?e=kl(e):e=ys(e);for(var t=this._groups,n=t.length,o=[],i=[],s=0;s<n;++s)for(var r=t[s],a=r.length,l,u=0;u<a;++u)(l=r[u])&&(o.push(e.call(l,l.__data__,u,r)),i.push(l));return new Oe(o,i)}function ws(e){return function(){return this.matches(e)}}function _s(e){return function(t){return t.matches(e)}}var Tl=Array.prototype.find;function Dl(e){return function(){return Tl.call(this.children,e)}}function Il(){return this.firstElementChild}function Al(e){return this.select(e==null?Il:Dl(typeof e=="function"?e:_s(e)))}var zl=Array.prototype.filter;function Pl(){return Array.from(this.children)}function Ol(e){return function(){return zl.call(this.children,e)}}function Bl(e){return this.selectAll(e==null?Pl:Ol(typeof e=="function"?e:_s(e)))}function Rl(e){typeof e!="function"&&(e=ws(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var s=t[i],r=s.length,a=o[i]=[],l,u=0;u<r;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Oe(o,this._parents)}function bs(e){return new Array(e.length)}function Vl(){return new Oe(this._enter||this._groups.map(bs),this._parents)}function to(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}to.prototype={constructor:to,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hl(e){return function(){return e}}function Ll(e,t,n,o,i,s){for(var r=0,a,l=t.length,u=s.length;r<u;++r)(a=t[r])?(a.__data__=s[r],o[r]=a):n[r]=new to(e,s[r]);for(;r<l;++r)(a=t[r])&&(i[r]=a)}function Fl(e,t,n,o,i,s,r){var a,l,u=new Map,c=t.length,d=s.length,h=new Array(c),g;for(a=0;a<c;++a)(l=t[a])&&(h[a]=g=r.call(l,l.__data__,a,t)+"",u.has(g)?i[a]=l:u.set(g,l));for(a=0;a<d;++a)g=r.call(e,s[a],a,s)+"",(l=u.get(g))?(o[a]=l,l.__data__=s[a],u.delete(g)):n[a]=new to(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function Yl(e){return e.__data__}function Gl(e,t){if(!arguments.length)return Array.from(this,Yl);var n=t?Fl:Ll,o=this._parents,i=this._groups;typeof e!="function"&&(e=Hl(e));for(var s=i.length,r=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=o[u],d=i[u],h=d.length,g=Xl(e.call(c,c&&c.__data__,u,o)),b=g.length,x=a[u]=new Array(b),E=r[u]=new Array(b),$=l[u]=new Array(h);n(c,d,x,E,$,g,t);for(var D=0,w=0,k,F;D<b;++D)if(k=x[D]){for(D>=w&&(w=D+1);!(F=E[w])&&++w<b;);k._next=F||null}}return r=new Oe(r,o),r._enter=a,r._exit=l,r}function Xl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ul(){return new Oe(this._exit||this._groups.map(bs),this._parents)}function ql(e,t,n){var o=this.enter(),i=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),o&&i?o.merge(i).order():i}function jl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,s=o.length,r=Math.min(i,s),a=new Array(i),l=0;l<r;++l)for(var u=n[l],c=o[l],d=u.length,h=a[l]=new Array(d),g,b=0;b<d;++b)(g=u[b]||c[b])&&(h[b]=g);for(;l<i;++l)a[l]=n[l];return new Oe(a,this._parents)}function Zl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,s=o[i],r;--i>=0;)(r=o[i])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function Wl(e){e||(e=Kl);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s){for(var r=n[s],a=r.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=r[c])&&(l[c]=u);l.sort(t)}return new Oe(i,this._parents).order()}function Kl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ql(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Jl(){return Array.from(this)}function eu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,s=o.length;i<s;++i){var r=o[i];if(r)return r}return null}function tu(){let e=0;for(const t of this)++e;return e}function nu(){return!this.node()}function ou(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],s=0,r=i.length,a;s<r;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function iu(e){return function(){this.removeAttribute(e)}}function ru(e){return function(){this.removeAttributeNS(e.space,e.local)}}function su(e,t){return function(){this.setAttribute(e,t)}}function au(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function lu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function uu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cu(e,t){var n=Eo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ru:iu:typeof t=="function"?n.local?uu:lu:n.local?au:su)(n,t))}function $s(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function du(e){return function(){this.style.removeProperty(e)}}function fu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function gu(e,t,n){return arguments.length>1?this.each((t==null?du:typeof t=="function"?hu:fu)(e,t,n??"")):Xt(this.node(),e)}function Xt(e,t){return e.style.getPropertyValue(t)||$s(e).getComputedStyle(e,null).getPropertyValue(t)}function vu(e){return function(){delete this[e]}}function pu(e,t){return function(){this[e]=t}}function mu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yu(e,t){return arguments.length>1?this.each((t==null?vu:typeof t=="function"?mu:pu)(e,t)):this.node()[e]}function xs(e){return e.trim().split(/^|\s+/)}function Ii(e){return e.classList||new Es(e)}function Es(e){this._node=e,this._names=xs(e.getAttribute("class")||"")}Es.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ns(e,t){for(var n=Ii(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ss(e,t){for(var n=Ii(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function wu(e){return function(){Ns(this,e)}}function _u(e){return function(){Ss(this,e)}}function bu(e,t){return function(){(t.apply(this,arguments)?Ns:Ss)(this,e)}}function $u(e,t){var n=xs(e+"");if(arguments.length<2){for(var o=Ii(this.node()),i=-1,s=n.length;++i<s;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?bu:t?wu:_u)(n,t))}function xu(){this.textContent=""}function Eu(e){return function(){this.textContent=e}}function Nu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Su(e){return arguments.length?this.each(e==null?xu:(typeof e=="function"?Nu:Eu)(e)):this.node().textContent}function Cu(){this.innerHTML=""}function ku(e){return function(){this.innerHTML=e}}function Mu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tu(e){return arguments.length?this.each(e==null?Cu:(typeof e=="function"?Mu:ku)(e)):this.node().innerHTML}function Du(){this.nextSibling&&this.parentNode.appendChild(this)}function Iu(){return this.each(Du)}function Au(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zu(){return this.each(Au)}function Pu(e){var t=typeof e=="function"?e:ms(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ou(){return null}function Bu(e,t){var n=typeof e=="function"?e:ms(e),o=t==null?Ou:typeof t=="function"?t:Di(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ru(){var e=this.parentNode;e&&e.removeChild(this)}function Vu(){return this.each(Ru)}function Hu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fu(e){return this.select(e?Lu:Hu)}function Yu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gu(e){return function(t){e.call(this,t,this.__data__)}}function Xu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Uu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function qu(e,t,n){return function(){var o=this.__on,i,s=Gu(t);if(o){for(var r=0,a=o.length;r<a;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(i):this.__on=[i]}}function ju(e,t,n){var o=Xu(e+""),i,s=o.length,r;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(a=t?qu:Uu,i=0;i<s;++i)this.each(a(o[i],t,n));return this}function Cs(e,t,n){var o=$s(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Zu(e,t){return function(){return Cs(this,e,t)}}function Wu(e,t){return function(){return Cs(this,e,t.apply(this,arguments))}}function Ku(e,t){return this.each((typeof t=="function"?Wu:Zu)(e,t))}function*Qu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,s=o.length,r;i<s;++i)(r=o[i])&&(yield r)}var ks=[null];function Oe(e,t){this._groups=e,this._parents=t}function Sn(){return new Oe([[document.documentElement]],ks)}function Ju(){return this}Oe.prototype=Sn.prototype={constructor:Oe,select:Nl,selectAll:Ml,selectChild:Al,selectChildren:Bl,filter:Rl,data:Gl,enter:Vl,exit:Ul,join:ql,merge:jl,selection:Ju,order:Zl,sort:Wl,call:Ql,nodes:Jl,node:eu,size:tu,empty:nu,each:ou,attr:cu,style:gu,property:yu,classed:$u,text:Su,html:Tu,raise:Iu,lower:zu,append:Pu,insert:Bu,remove:Vu,clone:Fu,datum:Yu,on:ju,dispatch:Ku,[Symbol.iterator]:Qu};function Re(e){return typeof e=="string"?new Oe([[document.querySelector(e)]],[document.documentElement]):new Oe([[e]],ks)}function ec(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ue(e,t){if(e=ec(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const tc={passive:!1},vn={capture:!0,passive:!1};function Yo(e){e.stopImmediatePropagation()}function Lt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ms(e){var t=e.document.documentElement,n=Re(e).on("dragstart.drag",Lt,vn);"onselectstart"in t?n.on("selectstart.drag",Lt,vn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ts(e,t){var n=e.document.documentElement,o=Re(e).on("dragstart.drag",null);t&&(o.on("click.drag",Lt,vn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dn=e=>()=>e;function li(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:s,x:r,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}li.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function nc(e){return!e.ctrlKey&&!e.button}function oc(){return this.parentNode}function ic(e,t){return t??{x:e.x,y:e.y}}function rc(){return navigator.maxTouchPoints||"ontouchstart"in this}function sc(){var e=nc,t=oc,n=ic,o=rc,i={},s=xo("start","drag","end"),r=0,a,l,u,c,d=0;function h(k){k.on("mousedown.drag",g).filter(o).on("touchstart.drag",E).on("touchmove.drag",$,tc).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(k,F){if(!(c||!e.call(this,k,F))){var U=w(this,t.call(this,k,F),k,F,"mouse");U&&(Re(k.view).on("mousemove.drag",b,vn).on("mouseup.drag",x,vn),Ms(k.view),Yo(k),u=!1,a=k.clientX,l=k.clientY,U("start",k))}}function b(k){if(Lt(k),!u){var F=k.clientX-a,U=k.clientY-l;u=F*F+U*U>d}i.mouse("drag",k)}function x(k){Re(k.view).on("mousemove.drag mouseup.drag",null),Ts(k.view,u),Lt(k),i.mouse("end",k)}function E(k,F){if(e.call(this,k,F)){var U=k.changedTouches,R=t.call(this,k,F),Y=U.length,q,G;for(q=0;q<Y;++q)(G=w(this,R,k,F,U[q].identifier,U[q]))&&(Yo(k),G("start",k,U[q]))}}function $(k){var F=k.changedTouches,U=F.length,R,Y;for(R=0;R<U;++R)(Y=i[F[R].identifier])&&(Lt(k),Y("drag",k,F[R]))}function D(k){var F=k.changedTouches,U=F.length,R,Y;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),R=0;R<U;++R)(Y=i[F[R].identifier])&&(Yo(k),Y("end",k,F[R]))}function w(k,F,U,R,Y,q){var G=s.copy(),j=Ue(q||U,F),C,ie,f;if((f=n.call(k,new li("beforestart",{sourceEvent:U,target:h,identifier:Y,active:r,x:j[0],y:j[1],dx:0,dy:0,dispatch:G}),R))!=null)return C=f.x-j[0]||0,ie=f.y-j[1]||0,function S(v,T,N){var A=j,M;switch(v){case"start":i[Y]=S,M=r++;break;case"end":delete i[Y],--r;case"drag":j=Ue(N||T,F),M=r;break}G.call(v,k,new li(v,{sourceEvent:T,subject:f,target:h,identifier:Y,active:M,x:j[0]+C,y:j[1]+ie,dx:j[0]-A[0],dy:j[1]-A[1],dispatch:G}),R)}}return h.filter=function(k){return arguments.length?(e=typeof k=="function"?k:Dn(!!k),h):e},h.container=function(k){return arguments.length?(t=typeof k=="function"?k:Dn(k),h):t},h.subject=function(k){return arguments.length?(n=typeof k=="function"?k:Dn(k),h):n},h.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:Dn(!!k),h):o},h.on=function(){var k=s.on.apply(s,arguments);return k===s?h:k},h.clickDistance=function(k){return arguments.length?(d=(k=+k)*k,h):Math.sqrt(d)},h}function Ai(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ds(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Cn(){}var pn=.7,no=1/pn,Ft="\\s*([+-]?\\d+)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ac=/^#([0-9a-f]{3,8})$/,lc=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),uc=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),cc=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${mn}\\)$`),dc=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${mn}\\)$`),fc=new RegExp(`^hsl\\(${mn},${Ze},${Ze}\\)$`),hc=new RegExp(`^hsla\\(${mn},${Ze},${Ze},${mn}\\)$`),sr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ai(Cn,zt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ar,formatHex:ar,formatHex8:gc,formatHsl:vc,formatRgb:lr,toString:lr});function ar(){return this.rgb().formatHex()}function gc(){return this.rgb().formatHex8()}function vc(){return Is(this).formatHsl()}function lr(){return this.rgb().formatRgb()}function zt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ac.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ur(t):n===3?new ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?In(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?In(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lc.exec(e))?new ze(t[1],t[2],t[3],1):(t=uc.exec(e))?new ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cc.exec(e))?In(t[1],t[2],t[3],t[4]):(t=dc.exec(e))?In(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fc.exec(e))?fr(t[1],t[2]/100,t[3]/100,1):(t=hc.exec(e))?fr(t[1],t[2]/100,t[3]/100,t[4]):sr.hasOwnProperty(e)?ur(sr[e]):e==="transparent"?new ze(NaN,NaN,NaN,0):null}function ur(e){return new ze(e>>16&255,e>>8&255,e&255,1)}function In(e,t,n,o){return o<=0&&(e=t=n=NaN),new ze(e,t,n,o)}function pc(e){return e instanceof Cn||(e=zt(e)),e?(e=e.rgb(),new ze(e.r,e.g,e.b,e.opacity)):new ze}function ui(e,t,n,o){return arguments.length===1?pc(e):new ze(e,t,n,o??1)}function ze(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Ai(ze,ui,Ds(Cn,{brighter(e){return e=e==null?no:Math.pow(no,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pn:Math.pow(pn,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ze(Mt(this.r),Mt(this.g),Mt(this.b),oo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cr,formatHex:cr,formatHex8:mc,formatRgb:dr,toString:dr}));function cr(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function mc(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function dr(){const e=oo(this.opacity);return`${e===1?"rgb(":"rgba("}${Mt(this.r)}, ${Mt(this.g)}, ${Mt(this.b)}${e===1?")":`, ${e})`}`}function oo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ct(e){return e=Mt(e),(e<16?"0":"")+e.toString(16)}function fr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ve(e,t,n,o)}function Is(e){if(e instanceof Ve)return new Ve(e.h,e.s,e.l,e.opacity);if(e instanceof Cn||(e=zt(e)),!e)return new Ve;if(e instanceof Ve)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),s=Math.max(t,n,o),r=NaN,a=s-i,l=(s+i)/2;return a?(t===s?r=(n-o)/a+(n<o)*6:n===s?r=(o-t)/a+2:r=(t-n)/a+4,a/=l<.5?s+i:2-s-i,r*=60):a=l>0&&l<1?0:r,new Ve(r,a,l,e.opacity)}function yc(e,t,n,o){return arguments.length===1?Is(e):new Ve(e,t,n,o??1)}function Ve(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Ai(Ve,yc,Ds(Cn,{brighter(e){return e=e==null?no:Math.pow(no,e),new Ve(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pn:Math.pow(pn,e),new Ve(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new ze(Go(e>=240?e-240:e+120,i,o),Go(e,i,o),Go(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Ve(hr(this.h),An(this.s),An(this.l),oo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=oo(this.opacity);return`${e===1?"hsl(":"hsla("}${hr(this.h)}, ${An(this.s)*100}%, ${An(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hr(e){return e=(e||0)%360,e<0?e+360:e}function An(e){return Math.max(0,Math.min(1,e||0))}function Go(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zi=e=>()=>e;function wc(e,t){return function(n){return e+n*t}}function _c(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function bc(e){return(e=+e)==1?As:function(t,n){return n-t?_c(t,n,e):zi(isNaN(t)?n:t)}}function As(e,t){var n=t-e;return n?wc(e,n):zi(isNaN(e)?t:e)}const io=function e(t){var n=bc(t);function o(i,s){var r=n((i=ui(i)).r,(s=ui(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=As(i.opacity,s.opacity);return function(c){return i.r=r(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function $c(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=e[i]*(1-s)+t[i]*s;return o}}function xc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ec(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),s=new Array(n),r;for(r=0;r<o;++r)i[r]=fn(e[r],t[r]);for(;r<n;++r)s[r]=t[r];return function(a){for(r=0;r<o;++r)s[r]=i[r](a);return s}}function Nc(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function qe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Sc(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=fn(e[i],t[i]):o[i]=t[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var ci=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xo=new RegExp(ci.source,"g");function Cc(e){return function(){return e}}function kc(e){return function(t){return e(t)+""}}function zs(e,t){var n=ci.lastIndex=Xo.lastIndex=0,o,i,s,r=-1,a=[],l=[];for(e=e+"",t=t+"";(o=ci.exec(e))&&(i=Xo.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[r]?a[r]+=s:a[++r]=s),(o=o[0])===(i=i[0])?a[r]?a[r]+=i:a[++r]=i:(a[++r]=null,l.push({i:r,x:qe(o,i)})),n=Xo.lastIndex;return n<t.length&&(s=t.slice(n),a[r]?a[r]+=s:a[++r]=s),a.length<2?l[0]?kc(l[0].x):Cc(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function fn(e,t){var n=typeof t,o;return t==null||n==="boolean"?zi(t):(n==="number"?qe:n==="string"?(o=zt(t))?(t=o,io):zs:t instanceof zt?io:t instanceof Date?Nc:xc(t)?$c:Array.isArray(t)?Ec:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sc:qe)(e,t)}var gr=180/Math.PI,di={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ps(e,t,n,o,i,s){var r,a,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*gr,skewX:Math.atan(l)*gr,scaleX:r,scaleY:a}}var zn;function Mc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?di:Ps(t.a,t.b,t.c,t.d,t.e,t.f)}function Tc(e){return e==null||(zn||(zn=document.createElementNS("http://www.w3.org/2000/svg","g")),zn.setAttribute("transform",e),!(e=zn.transform.baseVal.consolidate()))?di:(e=e.matrix,Ps(e.a,e.b,e.c,e.d,e.e,e.f))}function Os(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,h,g,b){if(u!==d||c!==h){var x=g.push("translate(",null,t,null,n);b.push({i:x-4,x:qe(u,d)},{i:x-2,x:qe(c,h)})}else(d||h)&&g.push("translate("+d+t+h+n)}function r(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,o)-2,x:qe(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,o)-2,x:qe(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,h,g,b){if(u!==d||c!==h){var x=g.push(i(g)+"scale(",null,",",null,")");b.push({i:x-4,x:qe(u,d)},{i:x-2,x:qe(c,h)})}else(d!==1||h!==1)&&g.push(i(g)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,h),r(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(g){for(var b=-1,x=h.length,E;++b<x;)d[(E=h[b]).i]=E.x(g);return d.join("")}}}var Dc=Os(Mc,"px, ","px)","deg)"),Ic=Os(Tc,", ",")",")"),Ac=1e-12;function vr(e){return((e=Math.exp(e))+1/e)/2}function zc(e){return((e=Math.exp(e))-1/e)/2}function Pc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Un=function e(t,n,o){function i(s,r){var a=s[0],l=s[1],u=s[2],c=r[0],d=r[1],h=r[2],g=c-a,b=d-l,x=g*g+b*b,E,$;if(x<Ac)$=Math.log(h/u)/t,E=function(R){return[a+R*g,l+R*b,u*Math.exp(t*R*$)]};else{var D=Math.sqrt(x),w=(h*h-u*u+o*x)/(2*u*n*D),k=(h*h-u*u-o*x)/(2*h*n*D),F=Math.log(Math.sqrt(w*w+1)-w),U=Math.log(Math.sqrt(k*k+1)-k);$=(U-F)/t,E=function(R){var Y=R*$,q=vr(F),G=u/(n*D)*(q*Pc(t*Y+F)-zc(F));return[a+G*g,l+G*b,u*q/vr(t*Y+F)]}}return E.duration=$*1e3*t/Math.SQRT2,E}return i.rho=function(s){var r=Math.max(.001,+s),a=r*r,l=a*a;return e(r,a,l)},i}(Math.SQRT2,2,4);var Ut=0,rn=0,en=0,Bs=1e3,ro,sn,so=0,Pt=0,No=0,yn=typeof performance=="object"&&performance.now?performance:Date,Rs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pi(){return Pt||(Rs(Oc),Pt=yn.now()+No)}function Oc(){Pt=0}function ao(){this._call=this._time=this._next=null}ao.prototype=Vs.prototype={constructor:ao,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pi():+n)+(t==null?0:+t),!this._next&&sn!==this&&(sn?sn._next=this:ro=this,sn=this),this._call=e,this._time=n,fi()},stop:function(){this._call&&(this._call=null,this._time=1/0,fi())}};function Vs(e,t,n){var o=new ao;return o.restart(e,t,n),o}function Bc(){Pi(),++Ut;for(var e=ro,t;e;)(t=Pt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ut}function pr(){Pt=(so=yn.now())+No,Ut=rn=0;try{Bc()}finally{Ut=0,Vc(),Pt=0}}function Rc(){var e=yn.now(),t=e-so;t>Bs&&(No-=t,so=e)}function Vc(){for(var e,t=ro,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ro=n);sn=e,fi(o)}function fi(e){if(!Ut){rn&&(rn=clearTimeout(rn));var t=e-Pt;t>24?(e<1/0&&(rn=setTimeout(pr,e-yn.now()-No)),en&&(en=clearInterval(en))):(en||(so=yn.now(),en=setInterval(Rc,Bs)),Ut=1,Rs(pr))}}function mr(e,t,n){var o=new ao;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Hc=xo("start","end","cancel","interrupt"),Lc=[],Hs=0,yr=1,hi=2,qn=3,wr=4,gi=5,jn=6;function So(e,t,n,o,i,s){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;Fc(e,n,{name:t,index:o,group:i,on:Hc,tween:Lc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Hs})}function Oi(e,t){var n=Ye(e,t);if(n.state>Hs)throw new Error("too late; already scheduled");return n}function Ke(e,t){var n=Ye(e,t);if(n.state>qn)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Fc(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Vs(s,0,n.time);function s(u){n.state=yr,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,h,g;if(n.state!==yr)return l();for(c in o)if(g=o[c],g.name===n.name){if(g.state===qn)return mr(r);g.state===wr?(g.state=jn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=jn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(mr(function(){n.state===qn&&(n.state=wr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=hi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hi){for(n.state=qn,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=gi,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===gi&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=jn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Zn(e,t){var n=e.__transition,o,i,s=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){s=!1;continue}i=o.state>hi&&o.state<gi,o.state=jn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}s&&delete e.__transition}}function Yc(e){return this.each(function(){Zn(this,e)})}function Gc(e,t){var n,o;return function(){var i=Ke(this,e),s=i.tween;if(s!==n){o=n=s;for(var r=0,a=o.length;r<a;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function Xc(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var s=Ke(this,e),r=s.tween;if(r!==o){i=(o=r).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function Uc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ye(this.node(),n).tween,i=0,s=o.length,r;i<s;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?Gc:Xc)(n,e,t))}function Bi(e,t,n){var o=e._id;return e.each(function(){var i=Ke(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ye(i,o).value[t]}}function Ls(e,t){var n;return(typeof t=="number"?qe:t instanceof zt?io:(n=zt(t))?(t=n,io):zs)(e,t)}function qc(e){return function(){this.removeAttribute(e)}}function jc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zc(e,t,n){var o,i=n+"",s;return function(){var r=this.getAttribute(e);return r===i?null:r===o?s:s=t(o=r,n)}}function Wc(e,t,n){var o,i=n+"",s;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?s:s=t(o=r,n)}}function Kc(e,t,n){var o,i,s;return function(){var r,a=n(this),l;return a==null?void this.removeAttribute(e):(r=this.getAttribute(e),l=a+"",r===l?null:r===o&&l===i?s:(i=l,s=t(o=r,a)))}}function Qc(e,t,n){var o,i,s;return function(){var r,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),l=a+"",r===l?null:r===o&&l===i?s:(i=l,s=t(o=r,a)))}}function Jc(e,t){var n=Eo(e),o=n==="transform"?Ic:Ls;return this.attrTween(e,typeof t=="function"?(n.local?Qc:Kc)(n,o,Bi(this,"attr."+e,t)):t==null?(n.local?jc:qc)(n):(n.local?Wc:Zc)(n,o,t))}function ed(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function td(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nd(e,t){var n,o;function i(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&td(e,s)),n}return i._value=t,i}function od(e,t){var n,o;function i(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&ed(e,s)),n}return i._value=t,i}function id(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Eo(e);return this.tween(n,(o.local?nd:od)(o,t))}function rd(e,t){return function(){Oi(this,e).delay=+t.apply(this,arguments)}}function sd(e,t){return t=+t,function(){Oi(this,e).delay=t}}function ad(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rd:sd)(t,e)):Ye(this.node(),t).delay}function ld(e,t){return function(){Ke(this,e).duration=+t.apply(this,arguments)}}function ud(e,t){return t=+t,function(){Ke(this,e).duration=t}}function cd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ld:ud)(t,e)):Ye(this.node(),t).duration}function dd(e,t){if(typeof t!="function")throw new Error;return function(){Ke(this,e).ease=t}}function fd(e){var t=this._id;return arguments.length?this.each(dd(t,e)):Ye(this.node(),t).ease}function hd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,e).ease=n}}function gd(e){if(typeof e!="function")throw new Error;return this.each(hd(this._id,e))}function vd(e){typeof e!="function"&&(e=ws(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var s=t[i],r=s.length,a=o[i]=[],l,u=0;u<r;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new lt(o,this._parents,this._name,this._id)}function pd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,s=Math.min(o,i),r=new Array(o),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=r[a]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(d[g]=h);for(;a<o;++a)r[a]=t[a];return new lt(r,this._parents,this._name,this._id)}function md(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yd(e,t,n){var o,i,s=md(t)?Oi:Ke;return function(){var r=s(this,e),a=r.on;a!==o&&(i=(o=a).copy()).on(t,n),r.on=i}}function wd(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(yd(n,e,t))}function _d(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bd(){return this.on("end.remove",_d(this._id))}function $d(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Di(e));for(var o=this._groups,i=o.length,s=new Array(i),r=0;r<i;++r)for(var a=o[r],l=a.length,u=s[r]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,So(u[h],t,n,h,u,Ye(c,n)));return new lt(s,this._parents,t,n)}function xd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ys(e));for(var o=this._groups,i=o.length,s=[],r=[],a=0;a<i;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),g,b=Ye(c,n),x=0,E=h.length;x<E;++x)(g=h[x])&&So(g,t,n,x,h,b);s.push(h),r.push(c)}return new lt(s,r,t,n)}var Ed=Sn.prototype.constructor;function Nd(){return new Ed(this._groups,this._parents)}function Sd(e,t){var n,o,i;return function(){var s=Xt(this,e),r=(this.style.removeProperty(e),Xt(this,e));return s===r?null:s===n&&r===o?i:i=t(n=s,o=r)}}function Fs(e){return function(){this.style.removeProperty(e)}}function Cd(e,t,n){var o,i=n+"",s;return function(){var r=Xt(this,e);return r===i?null:r===o?s:s=t(o=r,n)}}function kd(e,t,n){var o,i,s;return function(){var r=Xt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Xt(this,e))),r===l?null:r===o&&l===i?s:(i=l,s=t(o=r,a))}}function Md(e,t){var n,o,i,s="style."+t,r="end."+s,a;return function(){var l=Ke(this,e),u=l.on,c=l.value[s]==null?a||(a=Fs(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(r,i=c),l.on=o}}function Td(e,t,n){var o=(e+="")=="transform"?Dc:Ls;return t==null?this.styleTween(e,Sd(e,o)).on("end.style."+e,Fs(e)):typeof t=="function"?this.styleTween(e,kd(e,o,Bi(this,"style."+e,t))).each(Md(this._id,e)):this.styleTween(e,Cd(e,o,t),n).on("end.style."+e,null)}function Dd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Id(e,t,n){var o,i;function s(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Dd(e,r,n)),o}return s._value=t,s}function Ad(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Id(e,t,n??""))}function zd(e){return function(){this.textContent=e}}function Pd(e){return function(){var t=e(this);this.textContent=t??""}}function Od(e){return this.tween("text",typeof e=="function"?Pd(Bi(this,"text",e)):zd(e==null?"":e+""))}function Bd(e){return function(t){this.textContent=e.call(this,t)}}function Rd(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Bd(i)),t}return o._value=e,o}function Vd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Rd(e))}function Hd(){for(var e=this._name,t=this._id,n=Ys(),o=this._groups,i=o.length,s=0;s<i;++s)for(var r=o[s],a=r.length,l,u=0;u<a;++u)if(l=r[u]){var c=Ye(l,t);So(l,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new lt(o,this._parents,e,n)}function Ld(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(s,r){var a={value:r},l={value:function(){--i===0&&s()}};n.each(function(){var u=Ke(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var Fd=0;function lt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ys(){return++Fd}var Je=Sn.prototype;lt.prototype={constructor:lt,select:$d,selectAll:xd,selectChild:Je.selectChild,selectChildren:Je.selectChildren,filter:vd,merge:pd,selection:Nd,transition:Hd,call:Je.call,nodes:Je.nodes,node:Je.node,size:Je.size,empty:Je.empty,each:Je.each,on:wd,attr:Jc,attrTween:id,style:Td,styleTween:Ad,text:Od,textTween:Vd,remove:bd,tween:Uc,delay:ad,duration:cd,ease:fd,easeVarying:gd,end:Ld,[Symbol.iterator]:Je[Symbol.iterator]};function Yd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Gd={time:null,delay:0,duration:250,ease:Yd};function Xd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ud(e){var t,n;e instanceof lt?(t=e._id,e=e._name):(t=Ys(),(n=Gd).time=Pi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,s=0;s<i;++s)for(var r=o[s],a=r.length,l,u=0;u<a;++u)(l=r[u])&&So(l,e,t,u,r,n||Xd(l,t));return new lt(o,this._parents,e,t)}Sn.prototype.interrupt=Yc;Sn.prototype.transition=Ud;const Pn=e=>()=>e;function qd(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function ot(e,t,n){this.k=e,this.x=t,this.y=n}ot.prototype={constructor:ot,scale:function(e){return e===1?this:new ot(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ot(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qt=new ot(1,0,0);ot.prototype;function Uo(e){e.stopImmediatePropagation()}function tn(e){e.preventDefault(),e.stopImmediatePropagation()}function jd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Zd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _r(){return this.__zoom||qt}function Wd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Kd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function Jd(){var e=jd,t=Zd,n=Qd,o=Wd,i=Kd,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Un,u=xo("start","zoom","end"),c,d,h,g=500,b=150,x=0,E=10;function $(f){f.property("__zoom",_r).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",j).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}$.transform=function(f,S,v,T){var N=f.selection?f.selection():f;N.property("__zoom",_r),f!==N?F(f,S,v,T):N.interrupt().each(function(){U(this,arguments).event(T).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},$.scaleBy=function(f,S,v,T){$.scaleTo(f,function(){var N=this.__zoom.k,A=typeof S=="function"?S.apply(this,arguments):S;return N*A},v,T)},$.scaleTo=function(f,S,v,T){$.transform(f,function(){var N=t.apply(this,arguments),A=this.__zoom,M=v==null?k(N):typeof v=="function"?v.apply(this,arguments):v,O=A.invert(M),Q=typeof S=="function"?S.apply(this,arguments):S;return n(w(D(A,Q),M,O),N,r)},v,T)},$.translateBy=function(f,S,v,T){$.transform(f,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),r)},null,T)},$.translateTo=function(f,S,v,T,N){$.transform(f,function(){var A=t.apply(this,arguments),M=this.__zoom,O=T==null?k(A):typeof T=="function"?T.apply(this,arguments):T;return n(qt.translate(O[0],O[1]).scale(M.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof v=="function"?-v.apply(this,arguments):-v),A,r)},T,N)};function D(f,S){return S=Math.max(s[0],Math.min(s[1],S)),S===f.k?f:new ot(S,f.x,f.y)}function w(f,S,v){var T=S[0]-v[0]*f.k,N=S[1]-v[1]*f.k;return T===f.x&&N===f.y?f:new ot(f.k,T,N)}function k(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function F(f,S,v,T){f.on("start.zoom",function(){U(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(T).end()}).tween("zoom",function(){var N=this,A=arguments,M=U(N,A).event(T),O=t.apply(N,A),Q=v==null?k(O):typeof v=="function"?v.apply(N,A):v,ae=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),V=N.__zoom,Z=typeof S=="function"?S.apply(N,A):S,te=l(V.invert(Q).concat(ae/V.k),Z.invert(Q).concat(ae/Z.k));return function(ce){if(ce===1)ce=Z;else{var fe=te(ce),de=ae/fe[2];ce=new ot(de,Q[0]-fe[0]*de,Q[1]-fe[1]*de)}M.zoom(null,ce)}})}function U(f,S,v){return!v&&f.__zooming||new R(f,S)}function R(f,S){this.that=f,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,S),this.taps=0}R.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,S){return this.mouse&&f!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var S=Re(this.that).datum();u.call(f,this.that,new qd(f,{sourceEvent:this.sourceEvent,target:$,transform:this.that.__zoom,dispatch:u}),S)}};function Y(f,...S){if(!e.apply(this,arguments))return;var v=U(this,S).event(f),T=this.__zoom,N=Math.max(s[0],Math.min(s[1],T.k*Math.pow(2,o.apply(this,arguments)))),A=Ue(f);if(v.wheel)(v.mouse[0][0]!==A[0]||v.mouse[0][1]!==A[1])&&(v.mouse[1]=T.invert(v.mouse[0]=A)),clearTimeout(v.wheel);else{if(T.k===N)return;v.mouse=[A,T.invert(A)],Zn(this),v.start()}tn(f),v.wheel=setTimeout(M,b),v.zoom("mouse",n(w(D(T,N),v.mouse[0],v.mouse[1]),v.extent,r));function M(){v.wheel=null,v.end()}}function q(f,...S){if(h||!e.apply(this,arguments))return;var v=f.currentTarget,T=U(this,S,!0).event(f),N=Re(f.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",ae,!0),A=Ue(f,v),M=f.clientX,O=f.clientY;Ms(f.view),Uo(f),T.mouse=[A,this.__zoom.invert(A)],Zn(this),T.start();function Q(V){if(tn(V),!T.moved){var Z=V.clientX-M,te=V.clientY-O;T.moved=Z*Z+te*te>x}T.event(V).zoom("mouse",n(w(T.that.__zoom,T.mouse[0]=Ue(V,v),T.mouse[1]),T.extent,r))}function ae(V){N.on("mousemove.zoom mouseup.zoom",null),Ts(V.view,T.moved),tn(V),T.event(V).end()}}function G(f,...S){if(e.apply(this,arguments)){var v=this.__zoom,T=Ue(f.changedTouches?f.changedTouches[0]:f,this),N=v.invert(T),A=v.k*(f.shiftKey?.5:2),M=n(w(D(v,A),T,N),t.apply(this,S),r);tn(f),a>0?Re(this).transition().duration(a).call(F,M,T,f):Re(this).call($.transform,M,T,f)}}function j(f,...S){if(e.apply(this,arguments)){var v=f.touches,T=v.length,N=U(this,S,f.changedTouches.length===T).event(f),A,M,O,Q;for(Uo(f),M=0;M<T;++M)O=v[M],Q=Ue(O,this),Q=[Q,this.__zoom.invert(Q),O.identifier],N.touch0?!N.touch1&&N.touch0[2]!==Q[2]&&(N.touch1=Q,N.taps=0):(N.touch0=Q,A=!0,N.taps=1+!!c);c&&(c=clearTimeout(c)),A&&(N.taps<2&&(d=Q[0],c=setTimeout(function(){c=null},g)),Zn(this),N.start())}}function C(f,...S){if(this.__zooming){var v=U(this,S).event(f),T=f.changedTouches,N=T.length,A,M,O,Q;for(tn(f),A=0;A<N;++A)M=T[A],O=Ue(M,this),v.touch0&&v.touch0[2]===M.identifier?v.touch0[0]=O:v.touch1&&v.touch1[2]===M.identifier&&(v.touch1[0]=O);if(M=v.that.__zoom,v.touch1){var ae=v.touch0[0],V=v.touch0[1],Z=v.touch1[0],te=v.touch1[1],ce=(ce=Z[0]-ae[0])*ce+(ce=Z[1]-ae[1])*ce,fe=(fe=te[0]-V[0])*fe+(fe=te[1]-V[1])*fe;M=D(M,Math.sqrt(ce/fe)),O=[(ae[0]+Z[0])/2,(ae[1]+Z[1])/2],Q=[(V[0]+te[0])/2,(V[1]+te[1])/2]}else if(v.touch0)O=v.touch0[0],Q=v.touch0[1];else return;v.zoom("touch",n(w(M,O,Q),v.extent,r))}}function ie(f,...S){if(this.__zooming){var v=U(this,S).event(f),T=f.changedTouches,N=T.length,A,M;for(Uo(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),A=0;A<N;++A)M=T[A],v.touch0&&v.touch0[2]===M.identifier?delete v.touch0:v.touch1&&v.touch1[2]===M.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(M=Ue(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<E)){var O=Re(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return $.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:Pn(+f),$):o},$.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Pn(!!f),$):e},$.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:Pn(!!f),$):i},$.extent=function(f){return arguments.length?(t=typeof f=="function"?f:Pn([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),$):t},$.scaleExtent=function(f){return arguments.length?(s[0]=+f[0],s[1]=+f[1],$):[s[0],s[1]]},$.translateExtent=function(f){return arguments.length?(r[0][0]=+f[0][0],r[1][0]=+f[1][0],r[0][1]=+f[0][1],r[1][1]=+f[1][1],$):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},$.constrain=function(f){return arguments.length?(n=f,$):n},$.duration=function(f){return arguments.length?(a=+f,$):a},$.interpolate=function(f){return arguments.length?(l=f,$):l},$.on=function(){var f=u.on.apply(u,arguments);return f===u?$:f},$.clickDistance=function(f){return arguments.length?(x=(f=+f)*f,$):Math.sqrt(x)},$.tapDistance=function(f){return arguments.length?(E=+f,$):E},$}var se=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(se||{}),Ri=(e=>(e.Partial="partial",e.Full="full",e))(Ri||{}),Et=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Et||{}),wt=(e=>(e.Strict="strict",e.Loose="loose",e))(wt||{}),lo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(lo||{}),hn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(hn||{}),Gs=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Gs||{});const ef=["INPUT","SELECT","TEXTAREA"],tf=typeof document<"u"?document:null;function vi(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,s=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return ef.includes(o==null?void 0:o.nodeName)||i||!!s}function nf(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function br(e,t,n,o){const i=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(r=>r.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const s=i.every((r,a)=>n.has(r)&&Array.from(n.values())[a]===i[a]);return o&&n.delete(e.toLowerCase()),s}function of(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=rf(n.code,e);return Array.isArray(e)?e.some(i=>br(n[o],i,t,n.type==="keyup")):br(n[o],e,t,n.type==="keyup")}}function rf(e,t){return t.includes(e)?"code":"key"}function gn(e,t){const n=oe(()=>me(t==null?void 0:t.target)??tf),o=eo(me(e)===!0);let i=!1;const s=new Set;let r=l(me(e));ye(()=>me(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),r=l(u)},{immediate:!0}),ps(["blur","contextmenu"],a),or((...u)=>r(...u),u=>{var c,d;const h=me(t==null?void 0:t.actInsideInputWithModifier)??!0,g=me(t==null?void 0:t.preventDefault)??!1;if(i=nf(u),(!i||i&&!h)&&vi(u))return;const x=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,E=(x==null?void 0:x.nodeName)==="BUTTON"||(x==null?void 0:x.nodeName)==="A";!g&&(i||!E)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),or((...u)=>r(...u),u=>{const c=me(t==null?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!c)&&vi(u))return;i=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){i=!1,s.clear(),o.value=me(e)===!0}function l(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?of(u,s):u}return o}const Xs="vue-flow__node-desc",Us="vue-flow__edge-desc",sf="vue-flow__aria-live",qs=["Enter"," ","Escape"],Yt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function uo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function co(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Co(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Ot(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function js(e,t){return{x:Ot(e.x,t[0][0],t[1][0]),y:Ot(e.y,t[0][1],t[1][1])}}function $r(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function _t(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Tt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!_t(e)}function an(e){return Tt(e)&&"computedPosition"in e}function On(e){return!Number.isNaN(e)&&Number.isFinite(e)}function af(e){return On(e.width)&&On(e.height)&&On(e.x)&&On(e.y)}function lf(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:dn({width:0,height:0}),computedPosition:dn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Me(e.data)?e.data:{},events:dn(Me(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Zs(e,t,n){var o,i;const s={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Me(e.data)?e.data:{},events:dn(Me(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??s,e,{id:e.id.toString()})}function Ws(e,t,n,o){const i=typeof e=="string"?e:e.id,s=new Set,r=o==="source"?"target":"source";for(const a of n)a[r]===i&&s.add(a[o]);return t.filter(a=>s.has(a.id))}function uf(...e){if(e.length===3){const[s,r,a]=e;return Ws(s,r,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(s=>_t(s)&&s.source===o).map(s=>n.find(r=>Tt(r)&&r.id===s.target))}function cf(...e){if(e.length===3){const[s,r,a]=e;return Ws(s,r,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(s=>_t(s)&&s.target===o).map(s=>n.find(r=>Tt(r)&&r.id===s.source))}function Ks({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function df(e,t){return t.some(n=>_t(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function pi({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function wn({x:e,y:t},{x:n,y:o,zoom:i},s=!1,r=[1,1]){const a={x:(e-n)/i,y:(t-o)/i};return s?Mo(a,r):a}function Qs(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function fo({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Js({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function ff(e,t){return Js(Qs(fo(e),fo(t)))}function ko(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Qs(t,fo({...o.computedPosition,...o.dimensions}))}return Js(t)}function ea(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const s={...wn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},r=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,h=l.height??a.height??null;if(i&&!u||c)continue;const g=co(s,uo(a)),b=d===null||h===null,x=o&&g>0,E=(d??0)*(h??0);(b||x||g>=E||a.dragging)&&r.push(a)}return r}function Nt(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function xr(e,t,n,o,i,s=.1,r={x:0,y:0}){const a=t/(e.width*(1+s)),l=n/(e.height*(1+s)),u=Math.min(a,l),c=Ot(u,o,i),d=e.x+e.width/2,h=e.y+e.height/2,g=t/2-d*c+(r.x??0),b=n/2-h*c+(r.y??0);return{x:g,y:b,zoom:c}}function hf(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ta(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:ta(n,t):!1}function _n(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Er(e,t,n){return e<t?Ot(Math.abs(e-t),1,t)/t:e>n?-Ot(Math.abs(e-n),1,t)/t:0}function na(e,t,n=15,o=40){const i=Er(e.x,o,t.width-o)*n,s=Er(e.y,o,t.height-o)*n;return[i,s]}function qo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const s=Number(i.width.replace("px",""));i.width=`${s+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const s=Number(i.height.replace("px",""));i.height=`${s+o}px`}else i.height+=o;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+s}px`}else i.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+s}px`}else i.height+=s;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=s=>{const r=t.style;return{...r(s),...i}}:t.style={...t.style,...i}}}}function Nr(e,t){var n,o;const i=e.filter(r=>r.type==="add"||r.type==="remove");for(const r of i)if(r.type==="add")t.findIndex(l=>l.id===r.item.id)===-1&&t.push(r.item);else if(r.type==="remove"){const a=t.findIndex(l=>l.id===r.id);a!==-1&&t.splice(a,1)}const s=t.map(r=>r.id);for(const r of t)for(const a of e)if(a.id===r.id)switch(a.type){case"select":r.selected=a.selected;break;case"position":if(an(r)&&(typeof a.position<"u"&&(r.position=a.position),typeof a.dragging<"u"&&(r.dragging=a.dragging),r.expandParent&&r.parentNode)){const l=t[s.indexOf(r.parentNode)];l&&an(l)&&qo(r,l)}break;case"dimensions":if(an(r)&&(typeof a.dimensions<"u"&&(r.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(r.style={...r.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(r.resizing=a.resizing),r.expandParent&&r.parentNode)){const l=t[s.indexOf(r.parentNode)];l&&an(l)&&(!!l.dimensions.width&&!!l.dimensions.height?qo(r,l):st(()=>{qo(r,l)}))}break}return t}function ht(e,t){return{id:e,type:"select",selected:t}}function Sr(e){return{item:e,type:"add"}}function Cr(e){return{id:e,type:"remove"}}function kr(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function vt(e,t=new Set,n=!1){const o=[];for(const[i,s]of e){const r=t.has(i);!(s.selected===void 0&&!r)&&s.selected!==r&&(n&&(s.selected=r),o.push(ht(s.id,r)))}return o}function ne(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=a=>{t.delete(a)};return{on:a=>{e&&n&&t.delete(e),t.add(a);const l=()=>{i(a),e&&n&&t.add(e)};return $o(l),{off:l}},off:i,trigger:a=>Promise.all(Array.from(t).map(l=>l(a))),hasListeners:o,fns:t}}function Mr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function gf(e,t,n,o,i){var s,r;const a=[];for(const l of e)(l.selected||l.id===i)&&(!l.parentNode||!ta(l,o))&&(l.draggable||t&&typeof l.draggable>"u")&&a.push(dn({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((s=l.computedPosition)==null?void 0:s.x)||0,y:n.y-((r=l.computedPosition)==null?void 0:r.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return a}function jo({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const s=n(i.id);s&&o.push(s)}return[e?o.find(i=>i.id===e):o[0],o]}function oa(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function vf(e,t,n){const[o,i,s,r]=typeof e!="string"?oa(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-s]]:!1}function pf(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const s=vf(i,e,o);s&&(i=s)}else t(new De(Te.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const s=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+s,i[0][1]+r],[i[1][0]+s,i[1][1]+r]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[s,r,a,l]=oa(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+s],[i.range[1][0]+u-r,i.range[1][1]+c-a]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function mf({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Vi(e,t,n,o,i){const s=mf(e.dimensions,pf(e,n,o,i)),r=js(t,s);return{position:{x:r.x-((i==null?void 0:i.computedPosition.x)||0),y:r.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:r}}function jt(e,t,n=se.Left,o=!1){const i=((t==null?void 0:t.x)??0)+e.computedPosition.x,s=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:r,height:a}=t??bf(e);if(o)return{x:i+r/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case se.Top:return{x:i+r/2,y:s};case se.Right:return{x:i+r,y:s+a/2};case se.Bottom:return{x:i+r/2,y:s+a};case se.Left:return{x:i,y:s+a/2}}}function Tr(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function yf({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:s,width:r,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=fo({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:r/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*h)>0}function wf(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const s=t(e.source),r=t(e.target);return!s||!r?0:(n&&(i=o?e.zIndex:Math.max(s.computedPosition.z||0,r.computedPosition.z||0)),i)}var Te=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Te||{});const Dr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class De extends Error{constructor(t,...n){var o;super((o=Dr[t])==null?void 0:o.call(Dr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Hi(e){return"clientX"in e}function _f(e){return"sourceEvent"in e}function je(e,t){const n=Hi(e);let o,i;return n?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}const ho=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function bf(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Mo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const $f=()=>!0;function Zo(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function xf(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())co(i,uo(s))>0&&o.push(s);return o}const Ef=250;function Nf(e,t,n,o){var i,s;let r=[],a=Number.POSITIVE_INFINITY;const l=xf(e,n,t+Ef);for(const u of l){const c=[...((i=u.handleBounds)==null?void 0:i.source)??[],...((s=u.handleBounds)==null?void 0:s.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:h,y:g}=jt(u,d,d.position,!0),b=Math.sqrt((h-e.x)**2+(g-e.y)**2);b>t||(b<a?(r=[{...d,x:h,y:g}],a=b):b===a&&r.push({...d,x:h,y:g}))}}if(!r.length)return null;if(r.length>1){const u=o.type==="source"?"target":"source";return r.find(c=>c.type===u)??r[0]}return r[0]}function Ir(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:s,doc:r,lib:a,flowId:l,isValidConnection:u=$f},c,d,h){const g=s==="target",b=t?r.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x,y:E}=je(e),$=r.elementFromPoint(x,E),D=$!=null&&$.classList.contains(`${a}-flow__handle`)?$:b,w={handleDomNode:D,isValid:!1,connection:null,toHandle:null};if(D){const k=ia(void 0,D),F=D.getAttribute("data-nodeid"),U=D.getAttribute("data-handleid"),R=D.classList.contains("connectable"),Y=D.classList.contains("connectableend");if(!F||!k)return w;const q={source:g?F:o,sourceHandle:g?U:i,target:g?o:F,targetHandle:g?i:U};w.connection=q;const j=R&&Y&&(n===wt.Strict?g&&k==="source"||!g&&k==="target":F!==o||U!==i);w.isValid=j&&u(q,{nodes:d,edges:c,sourceNode:h(o),targetNode:h(F)}),w.toHandle=t}return w}function ia(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Sf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Cf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function kf(e,t,n,o,i,s=!1){var r,a,l;const u=o.get(e);if(!u)return null;const c=i===wt.Strict?(r=u.handleBounds)==null?void 0:r[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c==null?void 0:c.find(h=>h.id===n):c==null?void 0:c[0])??null;return d&&s?{...d,...jt(u,d,d.position,!0)}:d}const mi={[se.Left]:se.Right,[se.Right]:se.Left,[se.Top]:se.Bottom,[se.Bottom]:se.Top},Mf=["production","prod"];function To(e,...t){ra()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ra(){return!Mf.includes("production")}function Ar(e,t,n,o,i){const s=t.querySelectorAll(`.vue-flow__handle.${e}`);return s!=null&&s.length?Array.from(s).map(r=>{const a=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),type:e,nodeId:i,position:r.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Co(r)}}):null}function yi(e,t,n,o,i,s=!1,r){i.value=!1,e.selected?(s||e.selected&&t)&&(o([e]),st(()=>{r.blur()})):n([e])}function Me(e){return typeof z(e)<"u"}function Tf(e,t,n,o){if(!e||!e.source||!e.target)return n(new De(Te.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return _t(e)?i=e:i={...e,id:Ks(e)},i=Zs(i,void 0,o),df(i,t)?!1:i}function Df(e,t,n,o,i){if(!t.source||!t.target)return i(new De(Te.EDGE_INVALID,e.id)),!1;if(!n)return i(new De(Te.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...r}=e;return{...r,id:o?Ks(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function zr(e,t,n){const o={},i=[];for(let s=0;s<e.length;++s){const r=e[s];if(!Tt(r)){n(new De(Te.NODE_INVALID,r==null?void 0:r.id)||`[ID UNKNOWN|INDEX ${s}]`);continue}const a=lf(r,t(r.id),r.parentNode);r.parentNode&&(o[r.parentNode]=!0),i[s]=a}for(const s of i){const r=t(s.parentNode)||i.find(a=>a.id===s.parentNode);s.parentNode&&!r&&n(new De(Te.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||o[s.id])&&(o[s.id]&&(s.isParent=!0),r&&(r.isParent=!0))}return i}function Pr(e,t,n,o,i,s){let r=i;const a=o.get(r)||new Map;o.set(r,a.set(n,t)),r=`${i}-${e}`;const l=o.get(r)||new Map;if(o.set(r,l.set(n,t)),s){r=`${i}-${e}-${s}`;const u=o.get(r)||new Map;o.set(r,u.set(n,t))}}function Wo(e,t,n){e.clear();for(const o of n){const{source:i,target:s,sourceHandle:r=null,targetHandle:a=null}=o,l={edgeId:o.id,source:i,target:s,sourceHandle:r,targetHandle:a},u=`${i}-${r}--${s}-${a}`,c=`${s}-${a}--${i}-${r}`;Pr("source",l,c,e,i,r),Pr("target",l,u,e,s,a)}}function Or(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Ko(e,t,n,o,i,s,r,a){const l=[];for(const u of e){const c=_t(u)?u:Tf(u,a,i,s);if(!c)continue;const d=n(c.source),h=n(c.target);if(!d||!h){i(new De(Te.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new De(Te.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!h){i(new De(Te.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:r,sourceNode:d,targetNode:h})){i(new De(Te.EDGE_INVALID,c.id));continue}const g=o(c.id);l.push({...Zs(c,g,s),sourceNode:d,targetNode:h})}return l}const Br=Symbol("vueFlow"),Li=Symbol("nodeId"),sa=Symbol("nodeRef"),If=Symbol("edgeId"),Af=Symbol("edgeRef"),Do=Symbol("slots");function aa(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:s,nodeExtent:r,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:h,findNode:g,multiSelectionActive:b,nodesSelectionActive:x,selectNodesOnDrag:E,removeSelectedElements:$,addSelectedNodes:D,updateNodePositions:w,emits:k}=be(),{onStart:F,onDrag:U,onStop:R,onClick:Y,el:q,disabled:G,id:j,selectable:C,dragHandle:ie}=e,f=eo(!1);let S=[],v,T=null,N={x:void 0,y:void 0},A={x:0,y:0},M=null,O=!1,Q=0,ae=!1;const V=Of(),Z=({x:B,y:P})=>{N={x:B,y:P};let J=!1;if(S=S.map(p=>{const m={x:B-p.distance.x,y:P-p.distance.y},{computedPosition:_}=Vi(p,n.value?Mo(m,o.value):m,k.error,r.value,p.parentNode?g(p.parentNode):void 0);return J=J||p.position.x!==_.x||p.position.y!==_.y,p.position=_,p}),!!J&&(w(S,!0,!0),f.value=!0,M)){const[p,m]=jo({id:j,dragItems:S,findNode:g});U({event:M,node:p,nodes:m})}},te=()=>{if(!T)return;const[B,P]=na(A,T,c.value);if(B!==0||P!==0){const J={x:(N.x??0)-B/l.value.zoom,y:(N.y??0)-P/l.value.zoom};h({x:B,y:P})&&Z(J)}Q=requestAnimationFrame(te)},ce=(B,P)=>{O=!0;const J=g(j);!E.value&&!b.value&&J&&(J.selected||$()),J&&me(C)&&E.value&&yi(J,b.value,D,$,x,!1,P);const p=V(B.sourceEvent);if(N=p,S=gf(s.value,d.value,p,g,j),S.length){const[m,_]=jo({id:j,dragItems:S,findNode:g});F({event:B.sourceEvent,node:m,nodes:_})}},fe=(B,P)=>{var J;B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||(a.value===0&&ce(B,P),N=V(B.sourceEvent),T=((J=t.value)==null?void 0:J.getBoundingClientRect())||null,A=je(B.sourceEvent,T))},de=(B,P)=>{const J=V(B.sourceEvent);if(!ae&&O&&u.value&&(ae=!0,te()),!O){const p=J.xSnapped-(N.x??0),m=J.ySnapped-(N.y??0);Math.sqrt(p*p+m*m)>a.value&&ce(B,P)}(N.x!==J.xSnapped||N.y!==J.ySnapped)&&S.length&&O&&(M=B.sourceEvent,A=je(B.sourceEvent,T),Z(J))},H=B=>{let P=!1;if(!O&&!f.value&&!b.value){const J=B.sourceEvent,p=V(J),m=p.xSnapped-(N.x??0),_=p.ySnapped-(N.y??0),y=Math.sqrt(m*m+_*_);y!==0&&y<=a.value&&(Y==null||Y(J),P=!0)}if(S.length&&!P){w(S,!1,!1);const[J,p]=jo({id:j,dragItems:S,findNode:g});R({event:B.sourceEvent,node:J,nodes:p})}S=[],f.value=!1,ae=!1,O=!1,N={x:void 0,y:void 0},cancelAnimationFrame(Q)};return ye([()=>me(G),q],([B,P],J,p)=>{if(P){const m=Re(P);B||(v=sc().on("start",_=>fe(_,P)).on("drag",_=>de(_,P)).on("end",_=>H(_)).filter(_=>{const y=_.target,I=me(ie);return!_.button&&(!i.value||!Mr(y,`.${i.value}`,P)&&(!I||Mr(y,I,P)))}),m.call(v)),p(()=>{m.on(".drag",null),v&&(v.on("start",null),v.on("drag",null),v.on("end",null))})}}),f}function zf(){return{doubleClick:ne(),click:ne(),mouseEnter:ne(),mouseMove:ne(),mouseLeave:ne(),contextMenu:ne(),updateStart:ne(),update:ne(),updateEnd:ne()}}function Pf(e,t){const n=zf();return n.doubleClick.on(o=>{var i,s;t.edgeDoubleClick(o),(s=(i=e.events)==null?void 0:i.doubleClick)==null||s.call(i,o)}),n.click.on(o=>{var i,s;t.edgeClick(o),(s=(i=e.events)==null?void 0:i.click)==null||s.call(i,o)}),n.mouseEnter.on(o=>{var i,s;t.edgeMouseEnter(o),(s=(i=e.events)==null?void 0:i.mouseEnter)==null||s.call(i,o)}),n.mouseMove.on(o=>{var i,s;t.edgeMouseMove(o),(s=(i=e.events)==null?void 0:i.mouseMove)==null||s.call(i,o)}),n.mouseLeave.on(o=>{var i,s;t.edgeMouseLeave(o),(s=(i=e.events)==null?void 0:i.mouseLeave)==null||s.call(i,o)}),n.contextMenu.on(o=>{var i,s;t.edgeContextMenu(o),(s=(i=e.events)==null?void 0:i.contextMenu)==null||s.call(i,o)}),n.updateStart.on(o=>{var i,s;t.edgeUpdateStart(o),(s=(i=e.events)==null?void 0:i.updateStart)==null||s.call(i,o)}),n.update.on(o=>{var i,s;t.edgeUpdate(o),(s=(i=e.events)==null?void 0:i.update)==null||s.call(i,o)}),n.updateEnd.on(o=>{var i,s;t.edgeUpdateEnd(o),(s=(i=e.events)==null?void 0:i.updateEnd)==null||s.call(i,o)}),Object.entries(n).reduce((o,[i,s])=>(o.emit[i]=s.trigger,o.on[i]=s.on,o),{emit:{},on:{}})}function Of(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=be();return i=>{var s;const r=((s=o.value)==null?void 0:s.getBoundingClientRect())??{left:0,top:0},a=_f(i)?i.sourceEvent:i,{x:l,y:u}=je(a,r),c=wn({x:l,y:u},e.value),{x:d,y:h}=n.value?Mo(c,t.value):c;return{xSnapped:d,ySnapped:h,...c}}}function Bn(){return!0}function la({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:s,onEdgeUpdateEnd:r}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:h,nodesConnectable:g,autoPanOnConnect:b,autoPanSpeed:x,findNode:E,panBy:$,startConnection:D,updateConnection:w,endConnection:k,emits:F,viewport:U,edges:R,nodes:Y,isValidConnection:q,nodeLookup:G}=be();let j=null,C=!1,ie=null;function f(v){var T;const N=me(n)==="target",A=Hi(v),M=$r(v.target);if(A&&v.button===0||!A){let O=function(ue){p=je(ue,B),Z=Nf(wn(p,U.value,!1,[1,1]),c.value,G.value,y),m||(_(),m=!0);const he=Ir(ue,{handle:Z,connectionMode:u.value,fromNodeId:me(t),fromHandleId:me(e),fromType:N?"target":"source",isValidConnection:V,doc:M,lib:"vue",flowId:a,nodeLookup:G.value},R.value,Y.value,E);ie=he.handleDomNode,j=he.connection,C=Cf(!!Z,he.isValid);const ve={...W,isValid:C,to:he.toHandle&&C?pi({x:he.toHandle.x,y:he.toHandle.y},U.value):p,toHandle:he.toHandle,toPosition:C&&he.toHandle?he.toHandle.position:mi[y.position],toNode:he.toHandle?G.value.get(he.toHandle.nodeId):null};if(!(C&&Z&&(W!=null&&W.toHandle)&&ve.toHandle&&W.toHandle.type===ve.toHandle.type&&W.toHandle.nodeId===ve.toHandle.nodeId&&W.toHandle.id===ve.toHandle.id&&W.to.x===ve.to.x&&W.to.y===ve.to.y)){if(w(Z&&C?pi({x:Z.x,y:Z.y},U.value):p,he.toHandle,Sf(!!Z,C)),W=ve,!Z&&!C&&!ie)return Zo(J);j&&j.source!==j.target&&ie&&(Zo(J),J=ie,ie.classList.add("connecting","vue-flow__handle-connecting"),ie.classList.toggle("valid",!!C),ie.classList.toggle("vue-flow__handle-valid",!!C))}},Q=function(ue){(Z||ie)&&j&&C&&(s?s(ue,j):F.connect(j)),F.connectEnd(ue),i&&(r==null||r(ue)),Zo(J),cancelAnimationFrame(te),k(ue),m=!1,C=!1,j=null,ie=null,M.removeEventListener("mousemove",O),M.removeEventListener("mouseup",Q),M.removeEventListener("touchmove",O),M.removeEventListener("touchend",Q)};const ae=E(me(t));let V=me(o)||q.value||Bn;!V&&ae&&(V=(N?ae.isValidSourcePos:ae.isValidTargetPos)||Bn);let Z,te=0;const{x:ce,y:fe}=je(v),de=M==null?void 0:M.elementFromPoint(ce,fe),H=ia(me(i),de),B=(T=l.value)==null?void 0:T.getBoundingClientRect();if(!B||!H)return;const P=kf(me(t),H,me(e),G.value,u.value);if(!P)return;let J,p=je(v,B),m=!1;const _=()=>{if(!b.value)return;const[ue,he]=na(p,B,x.value);$({x:ue,y:he}),te=requestAnimationFrame(_)},y={...P,nodeId:me(t),type:H,position:P.position},I=G.value.get(me(t)),X={inProgress:!0,isValid:null,from:jt(I,y,se.Left,!0),fromHandle:y,fromPosition:y.position,fromNode:I,to:p,toHandle:null,toPosition:mi[y.position],toNode:null};D({nodeId:me(t),id:me(e),type:H,position:(de==null?void 0:de.getAttribute("data-handlepos"))||se.Top,...p},{x:ce-B.left,y:fe-B.top}),F.connectStart({event:v,nodeId:me(t),handleId:me(e),handleType:H});let W=X;M.addEventListener("mousemove",O),M.addEventListener("mouseup",Q),M.addEventListener("touchmove",O),M.addEventListener("touchend",Q)}}function S(v){var T,N;if(!d.value)return;const A=me(n)==="target";if(!h.value){F.clickConnectStart({event:v,nodeId:me(t),handleId:me(e)}),D({nodeId:me(t),type:me(n),id:me(e),position:se.Top,...je(v)},void 0,!0);return}let M=me(o)||q.value||Bn;const O=E(me(t));if(!M&&O&&(M=(A?O.isValidSourcePos:O.isValidTargetPos)||Bn),O&&(typeof O.connectable>"u"?g.value:O.connectable)===!1)return;const Q=$r(v.target),ae=Ir(v,{handle:{nodeId:me(t),id:me(e),type:me(n),position:se.Top,...je(v)},connectionMode:u.value,fromNodeId:h.value.nodeId,fromHandleId:h.value.id??null,fromType:h.value.type,isValidConnection:M,doc:Q,lib:"vue",flowId:a,nodeLookup:G.value},R.value,Y.value,E),V=((T=ae.connection)==null?void 0:T.source)===((N=ae.connection)==null?void 0:N.target);ae.isValid&&ae.connection&&!V&&F.connect(ae.connection),F.clickConnectEnd(v),k(v,!0)}return{handlePointerDown:f,handleClick:S}}function Bf(){return $t(Li,"")}function ua(e){const t=e??Bf()??"",n=$t(sa,we(null)),{findNode:o,edges:i,emits:s}=be(),r=o(t);return r||s.error(new De(Te.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:oe(()=>o(r.parentNode)),connectedEdges:oe(()=>Nt([r],i.value))}}function Rf(){return{doubleClick:ne(),click:ne(),mouseEnter:ne(),mouseMove:ne(),mouseLeave:ne(),contextMenu:ne(),dragStart:ne(),drag:ne(),dragStop:ne()}}function Vf(e,t){const n=Rf();return n.doubleClick.on(o=>{var i,s;t.nodeDoubleClick(o),(s=(i=e.events)==null?void 0:i.doubleClick)==null||s.call(i,o)}),n.click.on(o=>{var i,s;t.nodeClick(o),(s=(i=e.events)==null?void 0:i.click)==null||s.call(i,o)}),n.mouseEnter.on(o=>{var i,s;t.nodeMouseEnter(o),(s=(i=e.events)==null?void 0:i.mouseEnter)==null||s.call(i,o)}),n.mouseMove.on(o=>{var i,s;t.nodeMouseMove(o),(s=(i=e.events)==null?void 0:i.mouseMove)==null||s.call(i,o)}),n.mouseLeave.on(o=>{var i,s;t.nodeMouseLeave(o),(s=(i=e.events)==null?void 0:i.mouseLeave)==null||s.call(i,o)}),n.contextMenu.on(o=>{var i,s;t.nodeContextMenu(o),(s=(i=e.events)==null?void 0:i.contextMenu)==null||s.call(i,o)}),n.dragStart.on(o=>{var i,s;t.nodeDragStart(o),(s=(i=e.events)==null?void 0:i.dragStart)==null||s.call(i,o)}),n.drag.on(o=>{var i,s;t.nodeDrag(o),(s=(i=e.events)==null?void 0:i.drag)==null||s.call(i,o)}),n.dragStop.on(o=>{var i,s;t.nodeDragStop(o),(s=(i=e.events)==null?void 0:i.dragStop)==null||s.call(i,o)}),Object.entries(n).reduce((o,[i,s])=>(o.emit[i]=s.trigger,o.on[i]=s.on,o),{emit:{},on:{}})}function ca(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:s,nodesDraggable:r,emits:a}=be();return(l,u=!1)=>{const c=s.value?i.value[0]:5,d=s.value?i.value[1]:5,h=u?4:1,g=l.x*c*h,b=l.y*d*h,x=[];for(const E of e.value)if(E.draggable||r&&typeof E.draggable>"u"){const $={x:E.computedPosition.x+g,y:E.computedPosition.y+b},{computedPosition:D}=Vi(E,$,a.error,t.value,E.parentNode?o(E.parentNode):void 0);x.push({id:E.id,position:D,from:E.position,distance:{x:l.x,y:l.y},dimensions:E.dimensions})}n(x,!0,!1)}}const Qo=.1,Hf=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function ft(){return To("Viewport not initialized yet."),Promise.resolve(!1)}const Lf={zoomIn:ft,zoomOut:ft,zoomTo:ft,fitView:ft,setCenter:ft,fitBounds:ft,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ft,setTransform:ft,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Ff(e){function t(o,i){return new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((i==null?void 0:i.interpolate)==="linear"?fn:Un).scaleBy(Jo(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{s(!0)}),o):s(!1)})}function n(o,i,s,r){return new Promise(a=>{var l;const{x:u,y:c}=js({x:-o,y:-i},e.translateExtent),d=qt.translate(-u,-c).scale(s);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate((r==null?void 0:r.interpolate)==="linear"?fn:Un).transform(Jo(e.d3Selection,r==null?void 0:r.duration,r==null?void 0:r.ease,()=>{a(!0)}),d):a(!1)})}return oe(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i),zoomOut:i=>t(1/1.2,i),zoomTo:(i,s)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((s==null?void 0:s.interpolate)==="linear"?fn:Un).scaleTo(Jo(e.d3Selection,s==null?void 0:s.duration,s==null?void 0:s.ease,()=>{r(!0)}),i):r(!1)}),setViewport:(i,s)=>n(i.x,i.y,i.zoom,s),setTransform:(i,s)=>n(i.x,i.y,i.zoom,s),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Qo,includeHiddenNodes:!1,duration:0})=>{var s,r;const a=[];for(const h of e.nodes)h.dimensions.width&&h.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!h.hidden)&&(!((s=i.nodes)!=null&&s.length)||(r=i.nodes)!=null&&r.length&&i.nodes.includes(h.id))&&a.push(h);if(!a.length)return Promise.resolve(!1);const l=ko(a),{x:u,y:c,zoom:d}=xr(l,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Qo,i.offset);return n(u,c,d,i)},setCenter:(i,s,r)=>{const a=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:e.maxZoom,l=e.dimensions.width/2-i*a,u=e.dimensions.height/2-s*a;return n(l,u,a,r)},fitBounds:(i,s={padding:Qo})=>{const{x:r,y:a,zoom:l}=xr(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,s.padding);return n(r,a,l,s)},project:i=>wn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:s,y:r}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x-s,y:i.y-r};return wn(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:s,y:r}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x+s,y:i.y+r};return pi(a,e.viewport)}return{x:0,y:0}}}:Lf)}function Jo(e,t=0,n=Hf,o=()=>{}){const i=typeof t=="number"&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function Yf(e,t,n){const o=us(!0);return o.run(()=>{const i=()=>{o.run(()=>{let x,E,$=!!(n.nodes.value.length||n.edges.value.length);x=Ht([e.modelValue,()=>{var D,w;return(w=(D=e.modelValue)==null?void 0:D.value)==null?void 0:w.length}],([D])=>{D&&Array.isArray(D)&&(E==null||E.pause(),n.setElements(D),!E&&!$&&D.length?$=!0:E==null||E.resume())}),E=Ht([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([D,w])=>{var k;(k=e.modelValue)!=null&&k.value&&Array.isArray(e.modelValue.value)&&(x==null||x.pause(),e.modelValue.value=[...D,...w],st(()=>{x==null||x.resume()}))},{immediate:$}),Gn(()=>{x==null||x.stop(),E==null||E.stop()})})},s=()=>{o.run(()=>{let x,E,$=!!n.nodes.value.length;x=Ht([e.nodes,()=>{var D,w;return(w=(D=e.nodes)==null?void 0:D.value)==null?void 0:w.length}],([D])=>{D&&Array.isArray(D)&&(E==null||E.pause(),n.setNodes(D),!E&&!$&&D.length?$=!0:E==null||E.resume())}),E=Ht([n.nodes,()=>n.nodes.value.length],([D])=>{var w;(w=e.nodes)!=null&&w.value&&Array.isArray(e.nodes.value)&&(x==null||x.pause(),e.nodes.value=[...D],st(()=>{x==null||x.resume()}))},{immediate:$}),Gn(()=>{x==null||x.stop(),E==null||E.stop()})})},r=()=>{o.run(()=>{let x,E,$=!!n.edges.value.length;x=Ht([e.edges,()=>{var D,w;return(w=(D=e.edges)==null?void 0:D.value)==null?void 0:w.length}],([D])=>{D&&Array.isArray(D)&&(E==null||E.pause(),n.setEdges(D),!E&&!$&&D.length?$=!0:E==null||E.resume())}),E=Ht([n.edges,()=>n.edges.value.length],([D])=>{var w;(w=e.edges)!=null&&w.value&&Array.isArray(e.edges.value)&&(x==null||x.pause(),e.edges.value=[...D],st(()=>{x==null||x.resume()}))},{immediate:$}),Gn(()=>{x==null||x.stop(),E==null||E.stop()})})},a=()=>{o.run(()=>{ye(()=>t.maxZoom,()=>{t.maxZoom&&Me(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{ye(()=>t.minZoom,()=>{t.minZoom&&Me(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ye(()=>t.translateExtent,()=>{t.translateExtent&&Me(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ye(()=>t.nodeExtent,()=>{t.nodeExtent&&Me(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ye(()=>t.applyDefault,()=>{Me(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{o.run(()=>{const x=async E=>{let $=E;typeof t.autoConnect=="function"&&($=await t.autoConnect(E)),$!==!1&&n.addEdges([$])};ye(()=>t.autoConnect,()=>{Me(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ye(n.autoConnect,(E,$,D)=>{E?n.onConnect(x):n.hooks.value.connect.off(x),D(()=>{n.hooks.value.connect.off(x)})},{immediate:!0})})},g=()=>{const x=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const E of Object.keys(t)){const $=E;if(!x.includes($)){const D=$e(()=>t[$]),w=n[$];Mi(w)&&o.run(()=>{ye(D,k=>{Me(k)&&(w.value=k)},{immediate:!0})})}}};(()=>{i(),s(),r(),l(),a(),u(),c(),d(),h(),g()})()}),()=>o.stop()}function Gf(){return{edgesChange:ne(),nodesChange:ne(),nodeDoubleClick:ne(),nodeClick:ne(),nodeMouseEnter:ne(),nodeMouseMove:ne(),nodeMouseLeave:ne(),nodeContextMenu:ne(),nodeDragStart:ne(),nodeDrag:ne(),nodeDragStop:ne(),nodesInitialized:ne(),miniMapNodeClick:ne(),miniMapNodeDoubleClick:ne(),miniMapNodeMouseEnter:ne(),miniMapNodeMouseMove:ne(),miniMapNodeMouseLeave:ne(),connect:ne(),connectStart:ne(),connectEnd:ne(),clickConnectStart:ne(),clickConnectEnd:ne(),paneReady:ne(),init:ne(),move:ne(),moveStart:ne(),moveEnd:ne(),selectionDragStart:ne(),selectionDrag:ne(),selectionDragStop:ne(),selectionContextMenu:ne(),selectionStart:ne(),selectionEnd:ne(),viewportChangeStart:ne(),viewportChange:ne(),viewportChangeEnd:ne(),paneScroll:ne(),paneClick:ne(),paneContextMenu:ne(),paneMouseEnter:ne(),paneMouseMove:ne(),paneMouseLeave:ne(),edgeContextMenu:ne(),edgeMouseEnter:ne(),edgeMouseMove:ne(),edgeMouseLeave:ne(),edgeDoubleClick:ne(),edgeClick:ne(),edgeUpdateStart:ne(),edgeUpdate:ne(),edgeUpdateEnd:ne(),updateNodeInternals:ne(),error:ne(e=>To(e.message))}}function Xf(e,t){Za(()=>{for(const[n,o]of Object.entries(t.value)){const i=s=>{e(n,s)};o.fns.add(i),$o(()=>{o.off(i)})}})}function da(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Ri.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:hn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Et.Bezier,style:{}},connectionMode:wt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:ho()?"Meta":"Control",zoomActivationKeyCode:ho()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Gf(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Uf=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function qf(e,t,n){const o=Ff(e),i=p=>{const m=p??[];e.hooks.updateNodeInternals.trigger(m)},s=p=>cf(p,e.nodes,e.edges),r=p=>uf(p,e.nodes,e.edges),a=p=>Nt(p,e.edges),l=({id:p,type:m,nodeId:_})=>{var y;const I=p?`-${m}-${p}`:`-${m}`;return Array.from(((y=e.connectionLookup.get(`${_}${I}`))==null?void 0:y.values())??[])},u=p=>{if(p)return t.value.get(p)},c=p=>{if(p)return n.value.get(p)},d=(p,m,_)=>{var y,I;const ee=[];for(const X of p){const W={id:X.id,type:"position",dragging:_,from:X.from};if(m&&(W.position=X.position,X.parentNode)){const ue=u(X.parentNode);W.position={x:W.position.x-(((y=ue==null?void 0:ue.computedPosition)==null?void 0:y.x)??0),y:W.position.y-(((I=ue==null?void 0:ue.computedPosition)==null?void 0:I.y)??0)}}ee.push(W)}ee!=null&&ee.length&&e.hooks.nodesChange.trigger(ee)},h=p=>{if(!e.vueFlowRef)return;const m=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!m)return;const _=window.getComputedStyle(m),{m22:y}=new window.DOMMatrixReadOnly(_.transform),I=[];for(const ee of p){const X=ee,W=u(X.id);if(W){const ue=Co(X.nodeElement);if(!!(ue.width&&ue.height&&(W.dimensions.width!==ue.width||W.dimensions.height!==ue.height||X.forceUpdate))){const ve=X.nodeElement.getBoundingClientRect();W.dimensions=ue,W.handleBounds.source=Ar("source",X.nodeElement,ve,y,W.id),W.handleBounds.target=Ar("target",X.nodeElement,ve,y,W.id),I.push({id:W.id,type:"dimensions",dimensions:ue})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),I.length&&e.hooks.nodesChange.trigger(I)},g=(p,m)=>{const _=new Set,y=new Set;for(const X of p)Tt(X)?_.add(X.id):_t(X)&&y.add(X.id);const I=vt(t.value,_,!0),ee=vt(n.value,y);if(e.multiSelectionActive){for(const X of _)I.push(ht(X,m));for(const X of y)ee.push(ht(X,m))}I.length&&e.hooks.nodesChange.trigger(I),ee.length&&e.hooks.edgesChange.trigger(ee)},b=p=>{if(e.multiSelectionActive){const m=p.map(_=>ht(_.id,!0));e.hooks.nodesChange.trigger(m);return}e.hooks.nodesChange.trigger(vt(t.value,new Set(p.map(m=>m.id)),!0)),e.hooks.edgesChange.trigger(vt(n.value))},x=p=>{if(e.multiSelectionActive){const m=p.map(_=>ht(_.id,!0));e.hooks.edgesChange.trigger(m);return}e.hooks.edgesChange.trigger(vt(n.value,new Set(p.map(m=>m.id)))),e.hooks.nodesChange.trigger(vt(t.value,new Set,!0))},E=p=>{g(p,!0)},$=p=>{const _=(p||e.nodes).map(y=>(y.selected=!1,ht(y.id,!1)));e.hooks.nodesChange.trigger(_)},D=p=>{const _=(p||e.edges).map(y=>(y.selected=!1,ht(y.id,!1)));e.hooks.edgesChange.trigger(_)},w=p=>{if(!p||!p.length)return g([],!1);const m=p.reduce((_,y)=>{const I=ht(y.id,!1);return Tt(y)?_.nodes.push(I):_.edges.push(I),_},{nodes:[],edges:[]});m.nodes.length&&e.hooks.nodesChange.trigger(m.nodes),m.edges.length&&e.hooks.edgesChange.trigger(m.edges)},k=p=>{var m;(m=e.d3Zoom)==null||m.scaleExtent([p,e.maxZoom]),e.minZoom=p},F=p=>{var m;(m=e.d3Zoom)==null||m.scaleExtent([e.minZoom,p]),e.maxZoom=p},U=p=>{var m;(m=e.d3Zoom)==null||m.translateExtent(p),e.translateExtent=p},R=p=>{e.nodeExtent=p,i()},Y=p=>{var m;(m=e.d3Zoom)==null||m.clickDistance(p)},q=p=>{e.nodesDraggable=p,e.nodesConnectable=p,e.elementsSelectable=p},G=p=>{const m=p instanceof Function?p(e.nodes):p;!e.initialized&&!m.length||(e.nodes=zr(m,u,e.hooks.error.trigger))},j=p=>{const m=p instanceof Function?p(e.edges):p;if(!e.initialized&&!m.length)return;const _=Ko(m,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Wo(e.connectionLookup,n.value,_),e.edges=_},C=p=>{const m=p instanceof Function?p([...e.nodes,...e.edges]):p;!e.initialized&&!m.length||(G(m.filter(Tt)),j(m.filter(_t)))},ie=p=>{let m=p instanceof Function?p(e.nodes):p;m=Array.isArray(m)?m:[m];const _=zr(m,u,e.hooks.error.trigger),y=[];for(const I of _)y.push(Sr(I));y.length&&e.hooks.nodesChange.trigger(y)},f=p=>{let m=p instanceof Function?p(e.edges):p;m=Array.isArray(m)?m:[m];const _=Ko(m,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),y=[];for(const I of _)y.push(Sr(I));y.length&&e.hooks.edgesChange.trigger(y)},S=(p,m=!0,_=!1)=>{const y=p instanceof Function?p(e.nodes):p,I=Array.isArray(y)?y:[y],ee=[],X=[];function W(he){const ve=a(he);for(const Ne of ve)(!Me(Ne.deletable)||Ne.deletable)&&X.push(kr(Ne.id,Ne.source,Ne.target,Ne.sourceHandle,Ne.targetHandle))}function ue(he){const ve=[];for(const Ne of e.nodes)Ne.parentNode===he&&ve.push(Ne);if(ve.length){for(const Ne of ve)ee.push(Cr(Ne.id));m&&W(ve);for(const Ne of ve)ue(Ne.id)}}for(const he of I){const ve=typeof he=="string"?u(he):he;ve&&(Me(ve.deletable)&&!ve.deletable||(ee.push(Cr(ve.id)),m&&W([ve]),_&&ue(ve.id)))}X.length&&e.hooks.edgesChange.trigger(X),ee.length&&e.hooks.nodesChange.trigger(ee)},v=p=>{const m=p instanceof Function?p(e.edges):p,_=Array.isArray(m)?m:[m],y=[];for(const I of _){const ee=typeof I=="string"?c(I):I;ee&&(Me(ee.deletable)&&!ee.deletable||y.push(kr(typeof I=="string"?I:I.id,ee.source,ee.target,ee.sourceHandle,ee.targetHandle)))}e.hooks.edgesChange.trigger(y)},T=(p,m,_=!0)=>{const y=c(p.id);if(!y)return!1;const I=e.edges.indexOf(y),ee=Df(p,m,y,_,e.hooks.error.trigger);if(ee){const[X]=Ko([ee],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((W,ue)=>ue===I?X:W),Wo(e.connectionLookup,n.value,[X]),X}return!1},N=(p,m,_={replace:!1})=>{const y=c(p);if(!y)return;const I=typeof m=="function"?m(y):m;y.data=_.replace?I:{...y.data,...I}},A=p=>Nr(p,e.nodes),M=p=>{const m=Nr(p,e.edges);return Wo(e.connectionLookup,n.value,m),m},O=(p,m,_={replace:!1})=>{const y=u(p);if(!y)return;const I=typeof m=="function"?m(y):m;_.replace?e.nodes.splice(e.nodes.indexOf(y),1,I):Object.assign(y,I)},Q=(p,m,_={replace:!1})=>{const y=u(p);if(!y)return;const I=typeof m=="function"?m(y):m;y.data=_.replace?I:{...y.data,...I}},ae=(p,m,_=!1)=>{_?e.connectionClickStartHandle=p:e.connectionStartHandle=p,e.connectionEndHandle=null,e.connectionStatus=null,m&&(e.connectionPosition=m)},V=(p,m=null,_=null)=>{e.connectionStartHandle&&(e.connectionPosition=p,e.connectionEndHandle=m,e.connectionStatus=_)},Z=(p,m)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,m?e.connectionClickStartHandle=null:e.connectionStartHandle=null},te=p=>{const m=af(p),_=m?null:an(p)?p:u(p.id);return!m&&!_?[null,null,m]:[m?p:uo(_),_,m]},ce=(p,m=!0,_=e.nodes)=>{const[y,I,ee]=te(p);if(!y)return[];const X=[];for(const W of _||e.nodes){if(!ee&&(W.id===I.id||!W.computedPosition))continue;const ue=uo(W),he=co(ue,y);(m&&he>0||he>=ue.width*ue.height||he>=Number(y.width)*Number(y.height))&&X.push(W)}return X},fe=(p,m,_=!0)=>{const[y]=te(p);if(!y)return!1;const I=co(y,m);return _&&I>0||I>=Number(y.width)*Number(y.height)},de=p=>{const{viewport:m,dimensions:_,d3Zoom:y,d3Selection:I,translateExtent:ee}=e;if(!y||!I||!p.x&&!p.y)return!1;const X=qt.translate(m.x+p.x,m.y+p.y).scale(m.zoom),W=[[0,0],[_.width,_.height]],ue=y.constrain()(X,W,ee),he=e.viewport.x!==ue.x||e.viewport.y!==ue.y||e.viewport.zoom!==ue.k;return y.transform(I,ue),he},H=p=>{const m=p instanceof Function?p(e):p,_=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Me(m.defaultEdgeOptions)&&(e.defaultEdgeOptions=m.defaultEdgeOptions);const y=m.modelValue||m.nodes||m.edges?[]:void 0;y&&(m.modelValue&&y.push(...m.modelValue),m.nodes&&y.push(...m.nodes),m.edges&&y.push(...m.edges),C(y));const I=()=>{Me(m.maxZoom)&&F(m.maxZoom),Me(m.minZoom)&&k(m.minZoom),Me(m.translateExtent)&&U(m.translateExtent)};for(const ee of Object.keys(m)){const X=ee,W=m[X];![...Uf,..._].includes(X)&&Me(W)&&(e[X]=W)}si(()=>e.d3Zoom).not.toBeNull().then(I),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:h,setElements:C,setNodes:G,setEdges:j,addNodes:ie,addEdges:f,removeNodes:S,removeEdges:v,findNode:u,findEdge:c,updateEdge:T,updateEdgeData:N,updateNode:O,updateNodeData:Q,applyEdgeChanges:M,applyNodeChanges:A,addSelectedElements:E,addSelectedNodes:b,addSelectedEdges:x,setMinZoom:k,setMaxZoom:F,setTranslateExtent:U,setNodeExtent:R,setPaneClickDistance:Y,removeSelectedElements:w,removeSelectedNodes:$,removeSelectedEdges:D,startConnection:ae,updateConnection:V,endConnection:Z,setInteractive:q,setState:H,getIntersectingNodes:ce,getIncomers:s,getOutgoers:r,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:fe,panBy:de,fitView:p=>o.value.fitView(p),zoomIn:p=>o.value.zoomIn(p),zoomOut:p=>o.value.zoomOut(p),zoomTo:(p,m)=>o.value.zoomTo(p,m),setViewport:(p,m)=>o.value.setViewport(p,m),setTransform:(p,m)=>o.value.setTransform(p,m),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(p,m,_)=>o.value.setCenter(p,m,_),fitBounds:(p,m)=>o.value.fitBounds(p,m),project:p=>o.value.project(p),screenToFlowCoordinate:p=>o.value.screenToFlowCoordinate(p),flowToScreenCoordinate:p=>o.value.flowToScreenCoordinate(p),toObject:()=>{const p=[],m=[];for(const _ of e.nodes){const{computedPosition:y,handleBounds:I,selected:ee,dimensions:X,isParent:W,resizing:ue,dragging:he,events:ve,...Ne}=_;p.push(Ne)}for(const _ of e.edges){const{selected:y,sourceNode:I,targetNode:ee,events:X,...W}=_;m.push(W)}return JSON.parse(JSON.stringify({nodes:p,edges:m,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:p=>new Promise(m=>{const{nodes:_,edges:y,position:I,zoom:ee,viewport:X}=p;if(_&&G(_),y&&j(y),X!=null&&X.x&&(X!=null&&X.y)||I){const W=(X==null?void 0:X.x)||I[0],ue=(X==null?void 0:X.y)||I[1],he=(X==null?void 0:X.zoom)||ee||e.viewport.zoom;return si(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:W,y:ue,zoom:he}).then(()=>{m(!0)})})}else m(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const p=da();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const m=qt.translate(p.defaultViewport.x??0,p.defaultViewport.y??0).scale(Ot(p.defaultViewport.zoom??1,p.minZoom,p.maxZoom)),_=e.viewportRef.getBoundingClientRect(),y=[[0,0],[_.width,_.height]],I=e.d3Zoom.constrain()(m,y,p.translateExtent);e.d3Zoom.transform(e.d3Selection,I)}H(p)},$destroy:()=>{}}}const jf=["data-id","data-handleid","data-nodeid","data-handlepos"],Zf={name:"Handle",compatConfig:{MODE:3}},bt=xe({...Zf,props:{id:{default:null},type:{},position:{default:()=>se.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=ja(e,["position","connectable","connectableStart","connectableEnd","id"]),o=$e(()=>n.type??"source"),i=$e(()=>n.isValidConnection??null),{id:s,connectionStartHandle:r,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:h}=be(),{id:g,node:b,nodeEl:x,connectedEdges:E}=ua(),$=we(),D=$e(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),w=$e(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),k=$e(()=>{var j,C,ie,f,S,v;return((j=r.value)==null?void 0:j.nodeId)===g&&((C=r.value)==null?void 0:C.id)===e.id&&((ie=r.value)==null?void 0:ie.type)===o.value||((f=l.value)==null?void 0:f.nodeId)===g&&((S=l.value)==null?void 0:S.id)===e.id&&((v=l.value)==null?void 0:v.type)===o.value}),F=$e(()=>{var j,C,ie;return((j=a.value)==null?void 0:j.nodeId)===g&&((C=a.value)==null?void 0:C.id)===e.id&&((ie=a.value)==null?void 0:ie.type)===o.value}),{handlePointerDown:U,handleClick:R}=la({nodeId:g,handleId:e.id,isValidConnection:i,type:o}),Y=oe(()=>typeof e.connectable=="string"&&e.connectable==="single"?!E.value.some(j=>{const C=j[`${o.value}Handle`];return j[o.value]!==g?!1:C?C===e.id:!0}):typeof e.connectable=="number"?E.value.filter(j=>{const C=j[`${o.value}Handle`];return j[o.value]!==g?!1:C?C===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(b,E.value):Me(e.connectable)?e.connectable:c.value);ct(()=>{var j;if(!b.dimensions.width||!b.dimensions.height)return;const C=(j=b.handleBounds[o.value])==null?void 0:j.find(A=>A.id===e.id);if(!u.value||C)return;const ie=u.value.querySelector(".vue-flow__transformationpane");if(!x.value||!$.value||!ie||!e.id)return;const f=x.value.getBoundingClientRect(),S=$.value.getBoundingClientRect(),v=window.getComputedStyle(ie),{m22:T}=new window.DOMMatrixReadOnly(v.transform),N={id:e.id,position:e.position,x:(S.left-f.left)/T,y:(S.top-f.top)/T,type:o.value,nodeId:g,...Co($.value)};b.handleBounds[o.value]=[...b.handleBounds[o.value]??[],N]});function q(j){const C=Hi(j);Y.value&&D.value&&(C&&j.button===0||!C)&&U(j)}function G(j){!g||!a.value&&!D.value||Y.value&&R(j)}return t({handleClick:R,handlePointerDown:U,onClick:G,onPointerDown:q}),(j,C)=>(L(),K("div",{ref_key:"handle",ref:$,"data-id":`${z(s)}-${z(g)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":z(g),"data-handlepos":j.position,class:Ee(["vue-flow__handle",[`vue-flow__handle-${j.position}`,`vue-flow__handle-${e.id}`,z(d),z(h),o.value,{connectable:Y.value,connecting:F.value,connectablestart:D.value,connectableend:w.value,connectionindicator:Y.value&&(D.value&&!k.value||w.value&&k.value)}]]),onMousedown:q,onTouchstartPassive:q,onClick:G},[Se(j.$slots,"default",{id:j.id})],42,jf))}}),Io=function({sourcePosition:e=se.Bottom,targetPosition:t=se.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:s,data:r}){const a=r.label??n;return[_e(bt,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof a!="string"&&a?_e(a):_e(ke,[a]),_e(bt,{type:"source",position:e,connectable:o,isValidConnection:s})]};Io.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Io.inheritAttrs=!1;Io.compatConfig={MODE:3};const Wf=Io,Ao=function({targetPosition:e=se.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const s=i.label??t;return[_e(bt,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof s!="string"&&s?_e(s):_e(ke,[s])]};Ao.props=["targetPosition","label","isValidTargetPos","connectable","data"];Ao.inheritAttrs=!1;Ao.compatConfig={MODE:3};const Kf=Ao,zo=function({sourcePosition:e=se.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const s=i.label??t;return[typeof s!="string"&&s?_e(s):_e(ke,[s]),_e(bt,{type:"source",position:e,connectable:n,isValidConnection:o})]};zo.props=["sourcePosition","label","isValidSourcePos","connectable","data"];zo.inheritAttrs=!1;zo.compatConfig={MODE:3};const Qf=zo,Jf=["transform"],eh=["width","height","x","y","rx","ry"],th=["y"],nh={name:"EdgeText",compatConfig:{MODE:3}},oh=xe({...nh,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=we({x:0,y:0,width:0,height:0}),n=we(null),o=oe(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);ct(i),ye([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const s=n.value.getBBox();(s.width!==t.value.width||s.height!==t.value.height)&&(t.value=s)}return(s,r)=>(L(),K("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[s.labelShowBg?(L(),K("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*s.labelBgPadding[0]}px`,height:`${t.value.height+2*s.labelBgPadding[1]}px`,x:-s.labelBgPadding[0],y:-s.labelBgPadding[1],style:Le(s.labelBgStyle),rx:s.labelBgBorderRadius,ry:s.labelBgBorderRadius},null,12,eh)):ge("",!0),re("text",nt(s.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:s.labelStyle}),[Se(s.$slots,"default",{},()=>[typeof s.label!="string"?(L(),Ce(xt(s.label),{key:0})):(L(),K(ke,{key:1},[Ae(Fe(s.label),1)],64))])],16,th)],8,Jf))}}),ih=["id","d","marker-end","marker-start"],rh=["d","stroke-width"],sh={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Po=xe({...sh,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=we(null),o=we(null),i=we(null),s=Ti();return t({pathEl:n,interactionEl:o,labelEl:i}),(r,a)=>(L(),K(ke,null,[re("path",nt(z(s),{id:r.id,ref_key:"pathEl",ref:n,d:r.path,class:"vue-flow__edge-path","marker-end":r.markerEnd,"marker-start":r.markerStart}),null,16,ih),r.interactionWidth?(L(),K("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:r.path,"stroke-width":r.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,rh)):ge("",!0),r.label&&r.labelX&&r.labelY?(L(),Ce(oh,{key:1,ref_key:"labelEl",ref:i,x:r.labelX,y:r.labelY,label:r.label,"label-show-bg":r.labelShowBg,"label-bg-style":r.labelBgStyle,"label-bg-padding":r.labelBgPadding,"label-bg-border-radius":r.labelBgBorderRadius,"label-style":r.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ge("",!0)],64))}});function fa({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,r=Math.abs(o-t)/2,a=o<t?o+r:o-r;return[s,a,i,r]}function ha({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:r,targetControlY:a}){const l=e*.125+i*.375+r*.375+n*.125,u=t*.125+s*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function Rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Rr({pos:e,x1:t,y1:n,x2:o,y2:i,c:s}){let r,a;switch(e){case se.Left:r=t-Rn(t-o,s),a=n;break;case se.Right:r=t+Rn(o-t,s),a=n;break;case se.Top:r=t,a=n-Rn(n-i,s);break;case se.Bottom:r=t,a=n+Rn(i-n,s);break}return[r,a]}function ga(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:s,targetPosition:r=se.Top,curvature:a=.25}=e,[l,u]=Rr({pos:o,x1:t,y1:n,x2:i,y2:s,c:a}),[c,d]=Rr({pos:r,x1:i,y1:s,x2:t,y2:n,c:a}),[h,g,b,x]=ha({sourceX:t,sourceY:n,targetX:i,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${i},${s}`,h,g,b,x]}function Vr({pos:e,x1:t,y1:n,x2:o,y2:i}){let s,r;switch(e){case se.Left:case se.Right:s=.5*(t+o),r=n;break;case se.Top:case se.Bottom:s=t,r=.5*(n+i);break}return[s,r]}function va(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:s,targetPosition:r=se.Top}=e,[a,l]=Vr({pos:o,x1:t,y1:n,x2:i,y2:s}),[u,c]=Vr({pos:r,x1:i,y1:s,x2:t,y2:n}),[d,h,g,b]=ha({sourceX:t,sourceY:n,targetX:i,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${i},${s}`,d,h,g,b]}const Hr={[se.Left]:{x:-1,y:0},[se.Right]:{x:1,y:0},[se.Top]:{x:0,y:-1},[se.Bottom]:{x:0,y:1}};function ah({source:e,sourcePosition:t=se.Bottom,target:n}){return t===se.Left||t===se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Lr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function lh({source:e,sourcePosition:t=se.Bottom,target:n,targetPosition:o=se.Top,center:i,offset:s}){const r=Hr[t],a=Hr[o],l={x:e.x+r.x*s,y:e.y+r.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=ah({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let g,b,x;const E={x:0,y:0},$={x:0,y:0},[D,w,k,F]=fa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*a[d]===-1){b=i.x??D,x=i.y??w;const R=[{x:b,y:l.y},{x:b,y:u.y}],Y=[{x:l.x,y:x},{x:u.x,y:x}];r[d]===h?g=d==="x"?R:Y:g=d==="x"?Y:R}else{const R=[{x:l.x,y:u.y}],Y=[{x:u.x,y:l.y}];if(d==="x"?g=r.x===h?Y:R:g=r.y===h?R:Y,t===o){const ie=Math.abs(e[d]-n[d]);if(ie<=s){const f=Math.min(s-1,s-ie);r[d]===h?E[d]=(l[d]>e[d]?-1:1)*f:$[d]=(u[d]>n[d]?-1:1)*f}}if(t!==o){const ie=d==="x"?"y":"x",f=r[d]===a[ie],S=l[ie]>u[ie],v=l[ie]<u[ie];(r[d]===1&&(!f&&S||f&&v)||r[d]!==1&&(!f&&v||f&&S))&&(g=d==="x"?R:Y)}const q={x:l.x+E.x,y:l.y+E.y},G={x:u.x+$.x,y:u.y+$.y},j=Math.max(Math.abs(q.x-g[0].x),Math.abs(G.x-g[0].x)),C=Math.max(Math.abs(q.y-g[0].y),Math.abs(G.y-g[0].y));j>=C?(b=(q.x+G.x)/2,x=g[0].y):(b=g[0].x,x=(q.y+G.y)/2)}return[[e,{x:l.x+E.x,y:l.y+E.y},...g,{x:u.x+$.x,y:u.y+$.y},n],b,x,k,F]}function uh(e,t,n,o){const i=Math.min(Lr(e,t)/2,Lr(t,n)/2,o),{x:s,y:r}=t;if(e.x===s&&s===n.x||e.y===r&&r===n.y)return`L${s} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*u},${r}Q ${s},${r} ${s},${r+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${r+i*l}Q ${s},${r} ${s+i*a},${r}`}function wi(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:s,targetPosition:r=se.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,h,g,b,x]=lh({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:s},targetPosition:r,center:{x:l,y:u},offset:c});return[d.reduce(($,D,w)=>{let k;return w>0&&w<d.length-1?k=uh(d[w-1],D,d[w+1],a):k=`${w===0?"M":"L"}${D.x} ${D.y}`,$+=k,$},""),h,g,b,x]}function ch(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[s,r,a,l]=fa({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,s,r,a,l]}const dh=xe({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ch(e);return _e(Po,{path:n,labelX:o,labelY:i,...t,...e})}}}),fh=dh,hh=xe({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=wi({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return _e(Po,{path:n,labelX:o,labelY:i,...t,...e})}}}),pa=hh,gh=xe({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(pa,{...e,...t,borderRadius:0})}}),vh=gh,ph=xe({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ga({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return _e(Po,{path:n,labelX:o,labelY:i,...t,...e})}}}),mh=ph,yh=xe({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=va({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return _e(Po,{path:n,labelX:o,labelY:i,...t,...e})}}}),wh=yh,_h={input:Qf,default:Wf,output:Kf},bh={default:mh,straight:fh,step:vh,smoothstep:pa,simplebezier:wh};function $h(e,t,n){const o=oe(()=>x=>t.value.get(x)),i=oe(()=>x=>n.value.get(x)),s=oe(()=>{const x={...bh,...e.edgeTypes},E=Object.keys(x);for(const $ of e.edges)$.type&&!E.includes($.type)&&(x[$.type]=$.type);return x}),r=oe(()=>{const x={..._h,...e.nodeTypes},E=Object.keys(x);for(const $ of e.nodes)$.type&&!E.includes($.type)&&(x[$.type]=$.type);return x}),a=oe(()=>e.onlyRenderVisibleElements?ea(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=oe(()=>{if(e.onlyRenderVisibleElements){const x=[];for(const E of e.edges){const $=t.value.get(E.source),D=t.value.get(E.target);yf({sourcePos:$.computedPosition||{x:0,y:0},targetPos:D.computedPosition||{x:0,y:0},sourceWidth:$.dimensions.width,sourceHeight:$.dimensions.height,targetWidth:D.dimensions.width,targetHeight:D.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&x.push(E)}return x}return e.edges}),u=oe(()=>[...a.value,...l.value]),c=oe(()=>{const x=[];for(const E of e.nodes)E.selected&&x.push(E);return x}),d=oe(()=>{const x=[];for(const E of e.edges)E.selected&&x.push(E);return x}),h=oe(()=>[...c.value,...d.value]),g=oe(()=>{const x=[];for(const E of e.nodes)E.dimensions.width&&E.dimensions.height&&E.handleBounds!==void 0&&x.push(E);return x}),b=oe(()=>a.value.length>0&&g.value.length===a.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:s,getNodeTypes:r,getEdges:l,getNodes:a,getSelectedElements:h,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:g,areNodesInitialized:b}}class St{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Nn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??St.instance;return St.instance=o??new St,n&&(n.config.globalProperties.$vueFlowStorage=St.instance),St.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=da(),i=fs(o),s={};for(const[h,g]of Object.entries(i.hooks)){const b=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;s[b]=g.on}const r={};for(const[h,g]of Object.entries(i.hooks))r[h]=g.trigger;const a=oe(()=>{const h=new Map;for(const g of i.nodes)h.set(g.id,g);return h}),l=oe(()=>{const h=new Map;for(const g of i.edges)h.set(g.id,g);return h}),u=$h(i,a,l),c=qf(i,a,l);c.setState({...i,...n});const d={...s,...u,...c,...vl(i),nodeLookup:a,edgeLookup:l,emits:r,id:t,vueFlowVersion:"1.45.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function be(e){const t=St.getInstance(),n=ls(),o=typeof e=="object",i=o?e:{id:e},s=i.id,r=s??(n==null?void 0:n.vueFlowId);let a;if(n){const l=$t(Br,null);typeof l<"u"&&l!==null&&(!r||l.id===r)&&(a=l)}if(a||r&&(a=t.get(r)),!a||r&&a.id!==r){const l=s??t.getId(),u=t.create(l,i);a=u,(n??us(!0)).run(()=>{ye(u.applyDefault,(d,h,g)=>{const b=E=>{u.applyNodeChanges(E)},x=E=>{u.applyEdgeChanges(E)};d?(u.onNodesChange(b),u.onEdgesChange(x)):(u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(x)),g(()=>{u.hooks.value.nodesChange.off(b),u.hooks.value.edgesChange.off(x)})},{immediate:!0}),$o(()=>{if(a){const d=t.get(a.id);d?d.$destroy():To(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(i);if(n&&(At(Br,a),n.vueFlowId=a.id),o){const l=Nn();(l==null?void 0:l.type.name)!=="VueFlow"&&a.emits.error(new De(Te.USEVUEFLOW_OPTIONS))}return a}function xh(e){const{emits:t,dimensions:n}=be();let o;ct(()=>{const i=e.value,s=()=>{if(!i)return;const r=Co(i);(r.width===0||r.height===0)&&t.error(new De(Te.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:r.width||500,height:r.height||500}};s(),window.addEventListener("resize",s),i&&(o=new ResizeObserver(()=>s()),o.observe(i)),hs(()=>{window.removeEventListener("resize",s),o&&i&&o.unobserve(i)})})}const Eh={name:"UserSelection",compatConfig:{MODE:3}},Nh=xe({...Eh,props:{userSelectionRect:{}},setup(e){return(t,n)=>(L(),K("div",{class:"vue-flow__selection vue-flow__container",style:Le({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Sh=["tabIndex"],Ch={name:"NodesSelection",compatConfig:{MODE:3}},kh=xe({...Ch,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:s,userSelectionActive:r}=be(),a=ca(),l=we(null),u=aa({el:l,onStart(b){t.selectionDragStart(b),t.nodeDragStart(b)},onDrag(b){t.selectionDrag(b),t.nodeDrag(b)},onStop(b){t.selectionDragStop(b),t.nodeDragStop(b)}});ct(()=>{var b;s.value||(b=l.value)==null||b.focus({preventScroll:!0})});const c=oe(()=>ko(o.value)),d=oe(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function h(b){t.selectionContextMenu({event:b,nodes:o.value})}function g(b){s||Yt[b.key]&&(b.preventDefault(),a({x:Yt[b.key].x,y:Yt[b.key].y},b.shiftKey))}return(b,x)=>!z(r)&&c.value.width&&c.value.height?(L(),K("div",{key:0,class:Ee(["vue-flow__nodesselection vue-flow__container",z(i)]),style:Le({transform:`translate(${z(n).x}px,${z(n).y}px) scale(${z(n).zoom})`})},[re("div",{ref_key:"el",ref:l,class:Ee([{dragging:z(u)},"vue-flow__nodesselection-rect"]),style:Le(d.value),tabIndex:z(s)?void 0:-1,onContextmenu:h,onKeydown:g},null,46,Sh)],6)):ge("",!0)}});function Mh(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Th={name:"Pane",compatConfig:{MODE:3}},Dh=xe({...Th,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:s,removeSelectedElements:r,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:h,removeEdges:g,selectionMode:b,deleteKeyCode:x,multiSelectionKeyCode:E,multiSelectionActive:$,edgeLookup:D,nodeLookup:w,connectionLookup:k,defaultEdgeOptions:F,connectionStartHandle:U}=be(),R=we(null),Y=we(new Set),q=we(new Set),G=we(),j=$e(()=>l.value&&(e.isSelecting||s.value)),C=$e(()=>U.value!==null);let ie=!1,f=!1;const S=gn(x,{actInsideInputWithModifier:!1}),v=gn(E);ye(S,V=>{V&&(h(d.value),g(c.value),u.value=!1)}),ye(v,V=>{$.value=V});function T(V,Z){return te=>{te.target===Z&&(V==null||V(te))}}function N(V){if(ie||C.value){ie=!1;return}i.paneClick(V),r(),u.value=!1}function A(V){V.preventDefault(),V.stopPropagation(),i.paneContextMenu(V)}function M(V){i.paneScroll(V)}function O(V){var Z,te,ce;if(G.value=(Z=t.value)==null?void 0:Z.getBoundingClientRect(),!l.value||!e.isSelecting||V.button!==0||V.target!==R.value||!G.value)return;(ce=(te=V.target)==null?void 0:te.setPointerCapture)==null||ce.call(te,V.pointerId);const{x:fe,y:de}=Mh(V,G.value);f=!0,ie=!1,r(),a.value={width:0,height:0,startX:fe,startY:de,x:fe,y:de},i.selectionStart(V)}function Q(V){var Z;if(!G.value||!a.value)return;ie=!0;const{x:te,y:ce}=je(V,G.value),{startX:fe=0,startY:de=0}=a.value,H={startX:fe,startY:de,x:te<fe?te:fe,y:ce<de?ce:de,width:Math.abs(te-fe),height:Math.abs(ce-de)},B=Y.value,P=q.value;Y.value=new Set(ea(n.value,H,o.value,b.value===Ri.Partial,!0).map(p=>p.id)),q.value=new Set;const J=((Z=F.value)==null?void 0:Z.selectable)??!0;for(const p of Y.value){const m=k.value.get(p);if(m)for(const{edgeId:_}of m.values()){const y=D.value.get(_);y&&(y.selectable??J)&&q.value.add(_)}}if(!Or(B,Y.value)){const p=vt(w.value,Y.value,!0);i.nodesChange(p)}if(!Or(P,q.value)){const p=vt(D.value,q.value);i.edgesChange(p)}a.value=H,s.value=!0,u.value=!1}function ae(V){var Z;V.button!==0||!f||((Z=V.target)==null||Z.releasePointerCapture(V.pointerId),!s.value&&a.value&&V.target===R.value&&N(V),s.value=!1,a.value=null,u.value=Y.value.size>0,i.selectionEnd(V),e.selectionKeyPressed&&(ie=!1),f=!1)}return(V,Z)=>(L(),K("div",{ref_key:"container",ref:R,class:Ee(["vue-flow__pane vue-flow__container",{selection:V.isSelecting}]),onClick:Z[0]||(Z[0]=te=>j.value?void 0:T(N,R.value)(te)),onContextmenu:Z[1]||(Z[1]=te=>T(A,R.value)(te)),onWheelPassive:Z[2]||(Z[2]=te=>T(M,R.value)(te)),onPointerenter:Z[3]||(Z[3]=te=>j.value?void 0:z(i).paneMouseEnter(te)),onPointerdown:Z[4]||(Z[4]=te=>j.value?O(te):z(i).paneMouseMove(te)),onPointermove:Z[5]||(Z[5]=te=>j.value?Q(te):z(i).paneMouseMove(te)),onPointerup:Z[6]||(Z[6]=te=>j.value?ae(te):void 0),onPointerleave:Z[7]||(Z[7]=te=>z(i).paneMouseLeave(te))},[Se(V.$slots,"default"),z(s)&&z(a)?(L(),Ce(Nh,{key:0,"user-selection-rect":z(a)},null,8,["user-selection-rect"])):ge("",!0),z(u)&&z(d).length?(L(),Ce(kh,{key:1})):ge("",!0)],34))}}),Ih={name:"Transform",compatConfig:{MODE:3}},Ah=xe({...Ih,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=be(),i=oe(()=>n.value?!o.value:!1),s=oe(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(r,a)=>(L(),K("div",{class:"vue-flow__transformationpane vue-flow__container",style:Le({transform:s.value,opacity:i.value?0:void 0})},[Se(r.$slots,"default")],4))}}),zh={name:"Viewport",compatConfig:{MODE:3}},Ph=xe({...zh,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:s,selectionKeyCode:r,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:h,zoomOnPinch:g,zoomOnScroll:b,preventScrolling:x,noWheelClassName:E,noPanClassName:$,emits:D,connectionStartHandle:w,userSelectionActive:k,paneDragging:F,d3Zoom:U,d3Selection:R,d3ZoomHandler:Y,viewport:q,viewportRef:G,paneClickDistance:j}=be();xh(G);const C=eo(!1),ie=eo(!1);let f=null,S=!1,v=0,T={x:0,y:0,zoom:0};const N=gn(a),A=gn(r),M=gn(s),O=$e(()=>(!A.value||A.value&&r.value===!0)&&(N.value||d.value)),Q=$e(()=>N.value||l.value),ae=$e(()=>A.value||r.value===!0&&O.value!==!0);ct(()=>{if(!G.value){To("Viewport element is missing");return}const de=G.value,H=de.getBoundingClientRect(),B=Jd().clickDistance(j.value).scaleExtent([t.value,n.value]).translateExtent(i.value),P=Re(de).call(B),J=P.on("wheel.zoom"),p=qt.translate(o.value.x??0,o.value.y??0).scale(Ot(o.value.zoom??1,t.value,n.value)),m=[[0,0],[H.width,H.height]],_=B.constrain()(p,m,i.value);B.transform(P,_),B.wheelDelta(Z),U.value=B,R.value=P,Y.value=J,q.value={x:_.x,y:_.y,zoom:_.k},B.on("start",y=>{var I;if(!y.sourceEvent)return null;v=y.sourceEvent.button,C.value=!0;const ee=ce(y.transform);((I=y.sourceEvent)==null?void 0:I.type)==="mousedown"&&(F.value=!0),T=ee,D.viewportChangeStart(ee),D.moveStart({event:y,flowTransform:ee})}),B.on("end",y=>{if(!y.sourceEvent)return null;if(C.value=!1,F.value=!1,V(O.value,v??0)&&!S&&D.paneContextMenu(y.sourceEvent),S=!1,te(T,y.transform)){const I=ce(y.transform);T=I,D.viewportChangeEnd(I),D.moveEnd({event:y,flowTransform:I})}}),B.filter(y=>{var I;const ee=M.value||b.value,X=g.value&&y.ctrlKey,W=y.button;if(W===1&&y.type==="mousedown"&&(fe(y,"vue-flow__node")||fe(y,"vue-flow__edge")))return!0;if(!O.value&&!ee&&!Q.value&&!h.value&&!g.value||k.value||!h.value&&y.type==="dblclick"||fe(y,E.value)&&y.type==="wheel"||fe(y,$.value)&&(y.type!=="wheel"||Q.value&&y.type==="wheel"&&!M.value)||!g.value&&y.ctrlKey&&y.type==="wheel"||!ee&&!Q.value&&!X&&y.type==="wheel")return!1;if(!g&&y.type==="touchstart"&&((I=y.touches)==null?void 0:I.length)>1)return y.preventDefault(),!1;if(!O.value&&(y.type==="mousedown"||y.type==="touchstart")||r.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&W===0||Array.isArray(d.value)&&!d.value.includes(W)&&(y.type==="mousedown"||y.type==="touchstart"))return!1;const ue=Array.isArray(d.value)&&d.value.includes(W)||r.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!W||W<=1;return(!y.ctrlKey||N.value||y.type==="wheel")&&ue}),ye([k,O],()=>{k.value&&!C.value?B.on("zoom",null):k.value||B.on("zoom",y=>{q.value={x:y.transform.x,y:y.transform.y,zoom:y.transform.k};const I=ce(y.transform);S=V(O.value,v??0),D.viewportChange(I),D.move({event:y,flowTransform:I})})},{immediate:!0}),ye([k,Q,u,M,g,x,E],()=>{Q.value&&!M.value&&!k.value?P.on("wheel.zoom",y=>{if(fe(y,E.value))return!1;const I=M.value||b.value,ee=g.value&&y.ctrlKey;if(!(!x.value||Q.value||I||ee))return!1;y.preventDefault(),y.stopImmediatePropagation();const W=P.property("__zoom").k||1,ue=ho();if(!N.value&&y.ctrlKey&&g.value&&ue){const Kt=Ue(y),Ua=Z(y),qa=W*2**Ua;B.scaleTo(P,qa,Kt,y);return}const he=y.deltaMode===1?20:1;let ve=u.value===hn.Vertical?0:y.deltaX*he,Ne=u.value===hn.Horizontal?0:y.deltaY*he;!ue&&y.shiftKey&&u.value!==hn.Vertical&&!ve&&Ne&&(ve=Ne,Ne=0),B.translateBy(P,-(ve/W)*c.value,-(Ne/W)*c.value);const Xe=ce(P.property("__zoom"));f&&clearTimeout(f),ie.value?(D.move({event:y,flowTransform:Xe}),D.viewportChange(Xe),f=setTimeout(()=>{D.moveEnd({event:y,flowTransform:Xe}),D.viewportChangeEnd(Xe),ie.value=!1},150)):(ie.value=!0,D.moveStart({event:y,flowTransform:Xe}),D.viewportChangeStart(Xe))},{passive:!1}):typeof J<"u"&&P.on("wheel.zoom",function(y,I){const ee=!x.value&&y.type==="wheel"&&!y.ctrlKey,X=M.value||b.value,W=g.value&&y.ctrlKey;if(!X&&!l.value&&!W&&y.type==="wheel"||ee||fe(y,E.value))return null;y.preventDefault(),J.call(this,y,I)},{passive:!1})},{immediate:!0})});function V(de,H){return H===2&&Array.isArray(de)&&de.includes(2)}function Z(de){const H=de.ctrlKey&&ho()?10:1;return-de.deltaY*(de.deltaMode===1?.05:de.deltaMode?1:.002)*H}function te(de,H){return de.x!==H.x&&!Number.isNaN(H.x)||de.y!==H.y&&!Number.isNaN(H.y)||de.zoom!==H.k&&!Number.isNaN(H.k)}function ce(de){return{x:de.x,y:de.y,zoom:de.k}}function fe(de,H){return de.target.closest(`.${H}`)}return(de,H)=>(L(),K("div",{ref_key:"viewportRef",ref:G,class:"vue-flow__viewport vue-flow__container"},[le(Dh,{"is-selecting":ae.value,"selection-key-pressed":z(A),class:Ee({connecting:!!z(w),dragging:z(F),draggable:z(d)===!0||Array.isArray(z(d))&&z(d).includes(0)})},{default:pe(()=>[le(Ah,null,{default:pe(()=>[Se(de.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Oh=["id"],Bh=["id"],Rh=["id"],Vh={name:"A11yDescriptions",compatConfig:{MODE:3}},Hh=xe({...Vh,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=be();return(i,s)=>(L(),K(ke,null,[re("div",{id:`${z(Xs)}-${z(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Fe(z(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Oh),re("div",{id:`${z(Us)}-${z(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Bh),z(n)?ge("",!0):(L(),K("div",{key:0,id:`${z(sf)}-${z(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Fe(z(o)),9,Rh))],64))}});function Lh(){const e=be();ye(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Fh(e,t,n){return n===se.Left?e-t:n===se.Right?e+t:e}function Yh(e,t,n){return n===se.Top?e-t:n===se.Bottom?e+t:e}const Fi=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=se.Top,type:i}){return _e("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Fh(t,e,o),cy:Yh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Fi.props=["radius","centerX","centerY","position","type"];Fi.compatConfig={MODE:3};const Fr=Fi,Gh=xe({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:s,nodesSelectionActive:r,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:h,multiSelectionActive:g,disableKeyboardA11y:b,elementsSelectable:x,edgesUpdatable:E,edgesFocusable:$,hooks:D}=be(),w=oe(()=>c(e.id)),{emit:k,on:F}=Pf(w.value,s),U=$t(Do),R=Nn(),Y=we(!1),q=we(!1),G=we(""),j=we(null),C=we("source"),ie=we(null),f=$e(()=>typeof w.value.selectable>"u"?x.value:w.value.selectable),S=$e(()=>typeof w.value.updatable>"u"?E.value:w.value.updatable),v=$e(()=>typeof w.value.focusable>"u"?$.value:w.value.focusable);At(If,e.id),At(Af,ie);const T=oe(()=>w.value.class instanceof Function?w.value.class(w.value):w.value.class),N=oe(()=>w.value.style instanceof Function?w.value.style(w.value):w.value.style),A=oe(()=>{const m=w.value.type||"default",_=U==null?void 0:U[`edge-${m}`];if(_)return _;let y=w.value.template??l.value[m];if(typeof y=="string"&&R){const I=Object.keys(R.appContext.components);I&&I.includes(m)&&(y=Rt(m,!1))}return y&&typeof y!="string"?y:(s.error(new De(Te.EDGE_TYPE_MISSING,y)),!1)}),{handlePointerDown:M}=la({nodeId:G,handleId:j,type:C,isValidConnection:h,edgeUpdaterType:C,onEdgeUpdate:ae,onEdgeUpdateEnd:V});return()=>{const m=d(w.value.source),_=d(w.value.target),y="pathOptions"in w.value?w.value.pathOptions:{};if(!m&&!_)return s.error(new De(Te.EDGE_SOURCE_TARGET_MISSING,w.value.id,w.value.source,w.value.target)),null;if(!m)return s.error(new De(Te.EDGE_SOURCE_MISSING,w.value.id,w.value.source)),null;if(!_)return s.error(new De(Te.EDGE_TARGET_MISSING,w.value.id,w.value.target)),null;if(!w.value||w.value.hidden||m.hidden||_.hidden)return null;let I;o.value===wt.Strict?I=m.handleBounds.source:I=[...m.handleBounds.source||[],...m.handleBounds.target||[]];const ee=Tr(I,w.value.sourceHandle);let X;o.value===wt.Strict?X=_.handleBounds.target:X=[..._.handleBounds.target||[],..._.handleBounds.source||[]];const W=Tr(X,w.value.targetHandle),ue=(ee==null?void 0:ee.position)||se.Bottom,he=(W==null?void 0:W.position)||se.Top,{x:ve,y:Ne}=jt(m,ee,ue),{x:Xe,y:Kt}=jt(_,W,he);return w.value.sourceX=ve,w.value.sourceY=Ne,w.value.targetX=Xe,w.value.targetY=Kt,_e("g",{ref:ie,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${A.value===!1?"default":w.value.type||"default"}`,a.value,T.value,{updating:Y.value,selected:w.value.selected,animated:w.value.animated,inactive:!f.value&&!D.value.edgeClick.hasListeners()}],tabIndex:v.value?0:void 0,"aria-label":w.value.ariaLabel===null?void 0:w.value.ariaLabel??`Edge from ${w.value.source} to ${w.value.target}`,"aria-describedby":v.value?`${Us}-${t}`:void 0,"aria-roledescription":"edge",role:v.value?"group":"img",...w.value.domAttributes,onClick:te,onContextmenu:ce,onDblclick:fe,onMouseenter:de,onMousemove:H,onMouseleave:B,onKeyDown:v.value?p:void 0},[q.value?null:_e(A.value===!1?l.value.default:A.value,{id:e.id,sourceNode:m,targetNode:_,source:w.value.source,target:w.value.target,type:w.value.type,updatable:S.value,selected:w.value.selected,animated:w.value.animated,label:w.value.label,labelStyle:w.value.labelStyle,labelShowBg:w.value.labelShowBg,labelBgStyle:w.value.labelBgStyle,labelBgPadding:w.value.labelBgPadding,labelBgBorderRadius:w.value.labelBgBorderRadius,data:w.value.data,events:{...w.value.events,...F},style:N.value,markerStart:`url('#${_n(w.value.markerStart,t)}')`,markerEnd:`url('#${_n(w.value.markerEnd,t)}')`,sourcePosition:ue,targetPosition:he,sourceX:ve,sourceY:Ne,targetX:Xe,targetY:Kt,sourceHandleId:w.value.sourceHandle,targetHandleId:w.value.targetHandle,interactionWidth:w.value.interactionWidth,...y}),[S.value==="source"||S.value===!0?[_e("g",{onMousedown:P,onMouseenter:O,onMouseout:Q},_e(Fr,{position:ue,centerX:ve,centerY:Ne,radius:i.value,type:"source","data-type":"source"}))]:null,S.value==="target"||S.value===!0?[_e("g",{onMousedown:J,onMouseenter:O,onMouseout:Q},_e(Fr,{position:he,centerX:Xe,centerY:Kt,radius:i.value,type:"target","data-type":"target"}))]:null]])};function O(){Y.value=!0}function Q(){Y.value=!1}function ae(m,_){k.update({event:m,edge:w.value,connection:_})}function V(m){k.updateEnd({event:m,edge:w.value}),q.value=!1}function Z(m,_){m.button===0&&(q.value=!0,G.value=_?w.value.target:w.value.source,j.value=(_?w.value.targetHandle:w.value.sourceHandle)??null,C.value=_?"target":"source",k.updateStart({event:m,edge:w.value}),M(m))}function te(m){var _;const y={event:m,edge:w.value};f.value&&(r.value=!1,w.value.selected&&g.value?(u([w.value]),(_=ie.value)==null||_.blur()):n([w.value])),k.click(y)}function ce(m){k.contextMenu({event:m,edge:w.value})}function fe(m){k.doubleClick({event:m,edge:w.value})}function de(m){k.mouseEnter({event:m,edge:w.value})}function H(m){k.mouseMove({event:m,edge:w.value})}function B(m){k.mouseLeave({event:m,edge:w.value})}function P(m){Z(m,!0)}function J(m){Z(m,!1)}function p(m){var _;!b.value&&qs.includes(m.key)&&f.value&&(m.key==="Escape"?((_=ie.value)==null||_.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Xh=Gh,Uh=xe({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:s,connectionLineType:r,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=be(),h=(e=$t(Do))==null?void 0:e["connection-line"],g=oe(()=>{var D;return d((D=o.value)==null?void 0:D.nodeId)}),b=oe(()=>{var D;return d((D=i.value)==null?void 0:D.nodeId)??null}),x=oe(()=>({x:(s.value.x-c.value.x)/c.value.zoom,y:(s.value.y-c.value.y)/c.value.zoom})),E=oe(()=>l.value.markerStart?`url(#${_n(l.value.markerStart,t)})`:""),$=oe(()=>l.value.markerEnd?`url(#${_n(l.value.markerEnd,t)})`:"");return()=>{var D,w,k;if(!g.value||!o.value)return null;const F=o.value.id,U=o.value.type,R=g.value.handleBounds;let Y=(R==null?void 0:R[U])??[];if(n.value===wt.Loose){const N=(R==null?void 0:R[U==="source"?"target":"source"])??[];Y=[...Y,...N]}if(!Y)return null;const q=(F?Y.find(N=>N.id===F):Y[0])??null,G=(q==null?void 0:q.position)??se.Top,{x:j,y:C}=jt(g.value,q,G);let ie=null;b.value&&(n.value===wt.Strict?ie=((D=b.value.handleBounds[U==="source"?"target":"source"])==null?void 0:D.find(N=>{var A;return N.id===((A=i.value)==null?void 0:A.id)}))||null:ie=((w=[...b.value.handleBounds.source??[],...b.value.handleBounds.target??[]])==null?void 0:w.find(N=>{var A;return N.id===((A=i.value)==null?void 0:A.id)}))||null);const f=((k=i.value)==null?void 0:k.position)??(G?mi[G]:null);if(!G||!f)return null;const S=r.value??l.value.type??Et.Bezier;let v="";const T={sourceX:j,sourceY:C,sourcePosition:G,targetX:x.value.x,targetY:x.value.y,targetPosition:f};return S===Et.Bezier?[v]=ga(T):S===Et.Step?[v]=wi({...T,borderRadius:0}):S===Et.SmoothStep?[v]=wi(T):S===Et.SimpleBezier?[v]=va(T):v=`M${j},${C} ${x.value.x},${x.value.y}`,_e("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},_e("g",{class:"vue-flow__connection"},h?_e(h,{sourceX:j,sourceY:C,sourcePosition:G,targetX:x.value.x,targetY:x.value.y,targetPosition:f,sourceNode:g.value,sourceHandle:q,targetNode:b.value,targetHandle:ie,markerEnd:$.value,markerStart:E.value,connectionStatus:u.value}):_e("path",{d:v,class:[l.value.class,u,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":$.value,"marker-start":E.value})))}}}),qh=Uh,jh=["id","markerWidth","markerHeight","markerUnits","orient"],Zh={name:"MarkerType",compatConfig:{MODE:3}},Wh=xe({...Zh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(L(),K("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===z(lo).ArrowClosed?(L(),K("polyline",{key:0,style:Le({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ge("",!0),t.type===z(lo).Arrow?(L(),K("polyline",{key:1,style:Le({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ge("",!0)],8,jh))}}),Kh={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},Qh={name:"MarkerDefinitions",compatConfig:{MODE:3}},Jh=xe({...Qh,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=be(),s=oe(()=>{const r=new Set,a=[],l=u=>{if(u){const c=_n(u,t);r.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||i.value}):a.push({id:c,color:i.value,type:u}),r.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(r,a)=>(L(),K("svg",Kh,[re("defs",null,[(L(!0),K(ke,null,It(s.value,l=>(L(),Ce(Wh,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),eg={name:"Edges",compatConfig:{MODE:3}},tg=xe({...eg,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=be();return(i,s)=>(L(),K(ke,null,[le(Jh),(L(!0),K(ke,null,It(z(n),r=>(L(),K("svg",{key:r.id,class:"vue-flow__edges vue-flow__container",style:Le({zIndex:z(wf)(r,z(t),z(o))})},[le(z(Xh),{id:r.id},null,8,["id"])],4))),128)),le(z(qh))],64))}}),ng=xe({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:s,emits:r,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:h,elevateNodesOnSelect:g,disableKeyboardA11y:b,ariaLiveMessage:x,snapToGrid:E,snapGrid:$,nodeDragThreshold:D,nodesDraggable:w,elementsSelectable:k,nodesConnectable:F,nodesFocusable:U,hooks:R}=be(),Y=we(null);At(sa,Y),At(Li,e.id);const q=$t(Do),G=Nn(),j=ca(),{node:C,parentNode:ie}=ua(e.id),{emit:f,on:S}=Vf(C,r),v=$e(()=>typeof C.draggable>"u"?w.value:C.draggable),T=$e(()=>typeof C.selectable>"u"?k.value:C.selectable),N=$e(()=>typeof C.connectable>"u"?F.value:C.connectable),A=$e(()=>typeof C.focusable>"u"?U.value:C.focusable),M=oe(()=>T.value||v.value||R.value.nodeClick.hasListeners()||R.value.nodeDoubleClick.hasListeners()||R.value.nodeMouseEnter.hasListeners()||R.value.nodeMouseMove.hasListeners()||R.value.nodeMouseLeave.hasListeners()),O=$e(()=>!!C.dimensions.width&&!!C.dimensions.height),Q=oe(()=>{const _=C.type||"default",y=q==null?void 0:q[`node-${_}`];if(y)return y;let I=C.template||d.value[_];if(typeof I=="string"&&G){const ee=Object.keys(G.appContext.components);ee&&ee.includes(_)&&(I=Rt(_,!1))}return I&&typeof I!="string"?I:(r.error(new De(Te.NODE_TYPE_MISSING,I)),!1)}),ae=aa({id:e.id,el:Y,disabled:()=>!v.value,selectable:T,dragHandle:()=>C.dragHandle,onStart(_){f.dragStart(_)},onDrag(_){f.drag(_)},onStop(_){f.dragStop(_)},onClick(_){p(_)}}),V=oe(()=>C.class instanceof Function?C.class(C):C.class),Z=oe(()=>{const _=(C.style instanceof Function?C.style(C):C.style)||{},y=C.width instanceof Function?C.width(C):C.width,I=C.height instanceof Function?C.height(C):C.height;return!_.width&&y&&(_.width=typeof y=="string"?y:`${y}px`),!_.height&&I&&(_.height=typeof I=="string"?I:`${I}px`),_}),te=$e(()=>Number(C.zIndex??Z.value.zIndex??0));return c(_=>{(_.includes(e.id)||!_.length)&&fe()}),ct(()=>{ye(()=>C.hidden,(_=!1,y,I)=>{!_&&Y.value&&(e.resizeObserver.observe(Y.value),I(()=>{Y.value&&e.resizeObserver.unobserve(Y.value)}))},{immediate:!0,flush:"post"})}),ye([()=>C.type,()=>C.sourcePosition,()=>C.targetPosition],()=>{st(()=>{u([{id:e.id,nodeElement:Y.value,forceUpdate:!0}])})}),ye([()=>C.position.x,()=>C.position.y,()=>{var _;return(_=ie.value)==null?void 0:_.computedPosition.x},()=>{var _;return(_=ie.value)==null?void 0:_.computedPosition.y},()=>{var _;return(_=ie.value)==null?void 0:_.computedPosition.z},te,()=>C.selected,()=>C.dimensions.height,()=>C.dimensions.width,()=>{var _;return(_=ie.value)==null?void 0:_.dimensions.height},()=>{var _;return(_=ie.value)==null?void 0:_.dimensions.width}],([_,y,I,ee,X,W])=>{const ue={x:_,y,z:W+(g.value&&C.selected?1e3:0)};typeof I<"u"&&typeof ee<"u"?C.computedPosition=hf({x:I,y:ee,z:X},ue):C.computedPosition=ue},{flush:"post",immediate:!0}),ye([()=>C.extent,h],([_,y],[I,ee])=>{(_!==I||y!==ee)&&ce()}),C.extent==="parent"||typeof C.extent=="object"&&"range"in C.extent&&C.extent.range==="parent"?si(()=>O).toBe(!0).then(ce):ce(),()=>C.hidden?null:_e("div",{ref:Y,"data-id":C.id,class:["vue-flow__node",`vue-flow__node-${Q.value===!1?"default":C.type||"default"}`,{[n.value]:v.value,dragging:ae==null?void 0:ae.value,draggable:v.value,selected:C.selected,selectable:T.value,parent:C.isParent},V.value],style:{visibility:O.value?"visible":"hidden",zIndex:C.computedPosition.z??te.value,transform:`translate(${C.computedPosition.x}px,${C.computedPosition.y}px)`,pointerEvents:M.value?"all":"none",...Z.value},tabIndex:A.value?0:void 0,role:A.value?"group":void 0,"aria-describedby":b.value?void 0:`${Xs}-${t}`,"aria-label":C.ariaLabel,"aria-roledescription":"node",...C.domAttributes,onMouseenter:de,onMousemove:H,onMouseleave:B,onContextmenu:P,onClick:p,onDblclick:J,onKeydown:m},[_e(Q.value===!1?d.value.default:Q.value,{id:C.id,type:C.type,data:C.data,events:{...C.events,...S},selected:C.selected,resizing:C.resizing,dragging:ae.value,connectable:N.value,position:C.computedPosition,dimensions:C.dimensions,isValidTargetPos:C.isValidTargetPos,isValidSourcePos:C.isValidSourcePos,parent:C.parentNode,parentNodeId:C.parentNode,zIndex:C.computedPosition.z??te.value,targetPosition:C.targetPosition,sourcePosition:C.sourcePosition,label:C.label,dragHandle:C.dragHandle,onUpdateNodeInternals:fe})]);function ce(){const _=C.computedPosition,{computedPosition:y,position:I}=Vi(C,E.value?Mo(_,$.value):_,r.error,h.value,ie.value);(C.computedPosition.x!==y.x||C.computedPosition.y!==y.y)&&(C.computedPosition={...C.computedPosition,...y}),(C.position.x!==I.x||C.position.y!==I.y)&&(C.position=I)}function fe(){Y.value&&u([{id:e.id,nodeElement:Y.value,forceUpdate:!0}])}function de(_){ae!=null&&ae.value||f.mouseEnter({event:_,node:C})}function H(_){ae!=null&&ae.value||f.mouseMove({event:_,node:C})}function B(_){ae!=null&&ae.value||f.mouseLeave({event:_,node:C})}function P(_){return f.contextMenu({event:_,node:C})}function J(_){return f.doubleClick({event:_,node:C})}function p(_){T.value&&(!o.value||!v.value||D.value>0)&&yi(C,s.value,l,a,i,!1,Y.value),f.click({event:_,node:C})}function m(_){if(!(vi(_)||b.value))if(qs.includes(_.key)&&T.value){const y=_.key==="Escape";yi(C,s.value,l,a,i,y,Y.value)}else v.value&&C.selected&&Yt[_.key]&&(_.preventDefault(),x.value=`Moved selected node ${_.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~C.position.x}, y: ${~~C.position.y}`,j({x:Yt[_.key].x,y:Yt[_.key].y},_.shiftKey))}}}),og=ng;function ig(e={includeHiddenNodes:!1}){const{nodes:t}=be();return oe(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const rg={class:"vue-flow__nodes vue-flow__container"},sg={name:"Nodes",compatConfig:{MODE:3}},ag=xe({...sg,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=be(),i=ig(),s=we();return ye(i,r=>{r&&st(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),ct(()=>{s.value=new ResizeObserver(r=>{const a=r.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));st(()=>n(a))})}),hs(()=>{var r;return(r=s.value)==null?void 0:r.disconnect()}),(r,a)=>(L(),K("div",rg,[s.value?(L(!0),K(ke,{key:0},It(z(t),(l,u,c,d)=>{const h=[l.id];if(d&&d.key===l.id&&Wa(d,h))return d;const g=(L(),Ce(z(og),{id:l.id,key:l.id,"resize-observer":s.value},null,8,["id","resize-observer"]));return g.memo=h,g},a,0),128)):ge("",!0)]))}});function lg(){const{emits:e}=be();ct(()=>{if(ra()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new De(Te.MISSING_STYLES))}})}const ug=re("div",{class:"vue-flow__edge-labels"},null,-1),cg={name:"VueFlow",compatConfig:{MODE:3}},dg=xe({...cg,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=cs(),s=Fo(o,"modelValue",n),r=Fo(o,"nodes",n),a=Fo(o,"edges",n),l=be(o),u=Yf({modelValue:s,nodes:r,edges:a},o,l);return Xf(n,l.hooks),Lh(),lg(),At(Do,i),ds(()=>{u()}),t(l),(c,d)=>(L(),K("div",{ref:z(l).vueFlowRef,class:"vue-flow"},[le(Ph,null,{default:pe(()=>[le(tg),ug,le(ag),Se(c.$slots,"zoom-pane")]),_:3}),Se(c.$slots,"default"),le(Hh)],512))}}),fg={name:"Panel",compatConfig:{MODE:3}},ma=xe({...fg,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=be(),o=oe(()=>`${t.position}`.split("-"));return(i,s)=>(L(),K("div",{class:Ee(["vue-flow__panel",o.value]),style:Le({pointerEvents:z(n)?"none":"all"})},[Se(i.$slots,"default")],6))}});var hg={value:()=>{}};function Yi(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Wn(n)}function Wn(e){this._=e}function gg(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Wn.prototype=Yi.prototype={constructor:Wn,on:function(e,t){var n=this._,o=gg(e+"",n),i,s=-1,r=o.length;if(arguments.length<2){for(;++s<r;)if((i=(e=o[s]).type)&&(i=vg(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<r;)if(i=(e=o[s]).type)n[i]=Yr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Yr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,s;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,i=s.length;o<i;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,s=o.length;i<s;++i)o[i].value.apply(t,n)}};function vg(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Yr(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=hg,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var _i="http://www.w3.org/1999/xhtml";const Gr={svg:"http://www.w3.org/2000/svg",xhtml:_i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gr.hasOwnProperty(t)?{space:Gr[t],local:e}:e}function pg(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_i&&t.documentElement.namespaceURI===_i?t.createElement(e):t.createElementNS(n,e)}}function mg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ya(e){var t=Oo(e);return(t.local?mg:pg)(t)}function yg(){}function Gi(e){return e==null?yg:function(){return this.querySelector(e)}}function wg(e){typeof e!="function"&&(e=Gi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var s=t[i],r=s.length,a=o[i]=new Array(r),l,u,c=0;c<r;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Be(o,this._parents)}function _g(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function bg(){return[]}function wa(e){return e==null?bg:function(){return this.querySelectorAll(e)}}function $g(e){return function(){return _g(e.apply(this,arguments))}}function xg(e){typeof e=="function"?e=$g(e):e=wa(e);for(var t=this._groups,n=t.length,o=[],i=[],s=0;s<n;++s)for(var r=t[s],a=r.length,l,u=0;u<a;++u)(l=r[u])&&(o.push(e.call(l,l.__data__,u,r)),i.push(l));return new Be(o,i)}function _a(e){return function(){return this.matches(e)}}function ba(e){return function(t){return t.matches(e)}}var Eg=Array.prototype.find;function Ng(e){return function(){return Eg.call(this.children,e)}}function Sg(){return this.firstElementChild}function Cg(e){return this.select(e==null?Sg:Ng(typeof e=="function"?e:ba(e)))}var kg=Array.prototype.filter;function Mg(){return Array.from(this.children)}function Tg(e){return function(){return kg.call(this.children,e)}}function Dg(e){return this.selectAll(e==null?Mg:Tg(typeof e=="function"?e:ba(e)))}function Ig(e){typeof e!="function"&&(e=_a(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var s=t[i],r=s.length,a=o[i]=[],l,u=0;u<r;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Be(o,this._parents)}function $a(e){return new Array(e.length)}function Ag(){return new Be(this._enter||this._groups.map($a),this._parents)}function go(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}go.prototype={constructor:go,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zg(e){return function(){return e}}function Pg(e,t,n,o,i,s){for(var r=0,a,l=t.length,u=s.length;r<u;++r)(a=t[r])?(a.__data__=s[r],o[r]=a):n[r]=new go(e,s[r]);for(;r<l;++r)(a=t[r])&&(i[r]=a)}function Og(e,t,n,o,i,s,r){var a,l,u=new Map,c=t.length,d=s.length,h=new Array(c),g;for(a=0;a<c;++a)(l=t[a])&&(h[a]=g=r.call(l,l.__data__,a,t)+"",u.has(g)?i[a]=l:u.set(g,l));for(a=0;a<d;++a)g=r.call(e,s[a],a,s)+"",(l=u.get(g))?(o[a]=l,l.__data__=s[a],u.delete(g)):n[a]=new go(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function Bg(e){return e.__data__}function Rg(e,t){if(!arguments.length)return Array.from(this,Bg);var n=t?Og:Pg,o=this._parents,i=this._groups;typeof e!="function"&&(e=zg(e));for(var s=i.length,r=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=o[u],d=i[u],h=d.length,g=Vg(e.call(c,c&&c.__data__,u,o)),b=g.length,x=a[u]=new Array(b),E=r[u]=new Array(b),$=l[u]=new Array(h);n(c,d,x,E,$,g,t);for(var D=0,w=0,k,F;D<b;++D)if(k=x[D]){for(D>=w&&(w=D+1);!(F=E[w])&&++w<b;);k._next=F||null}}return r=new Be(r,o),r._enter=a,r._exit=l,r}function Vg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hg(){return new Be(this._exit||this._groups.map($a),this._parents)}function Lg(e,t,n){var o=this.enter(),i=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),o&&i?o.merge(i).order():i}function Fg(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,s=o.length,r=Math.min(i,s),a=new Array(i),l=0;l<r;++l)for(var u=n[l],c=o[l],d=u.length,h=a[l]=new Array(d),g,b=0;b<d;++b)(g=u[b]||c[b])&&(h[b]=g);for(;l<i;++l)a[l]=n[l];return new Be(a,this._parents)}function Yg(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,s=o[i],r;--i>=0;)(r=o[i])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function Gg(e){e||(e=Xg);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s){for(var r=n[s],a=r.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=r[c])&&(l[c]=u);l.sort(t)}return new Be(i,this._parents).order()}function Xg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ug(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qg(){return Array.from(this)}function jg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,s=o.length;i<s;++i){var r=o[i];if(r)return r}return null}function Zg(){let e=0;for(const t of this)++e;return e}function Wg(){return!this.node()}function Kg(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],s=0,r=i.length,a;s<r;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Qg(e){return function(){this.removeAttribute(e)}}function Jg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ev(e,t){return function(){this.setAttribute(e,t)}}function tv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ov(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function iv(e,t){var n=Oo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Jg:Qg:typeof t=="function"?n.local?ov:nv:n.local?tv:ev)(n,t))}function xa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rv(e){return function(){this.style.removeProperty(e)}}function sv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function av(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function lv(e,t,n){return arguments.length>1?this.each((t==null?rv:typeof t=="function"?av:sv)(e,t,n??"")):Zt(this.node(),e)}function Zt(e,t){return e.style.getPropertyValue(t)||xa(e).getComputedStyle(e,null).getPropertyValue(t)}function uv(e){return function(){delete this[e]}}function cv(e,t){return function(){this[e]=t}}function dv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fv(e,t){return arguments.length>1?this.each((t==null?uv:typeof t=="function"?dv:cv)(e,t)):this.node()[e]}function Ea(e){return e.trim().split(/^|\s+/)}function Xi(e){return e.classList||new Na(e)}function Na(e){this._node=e,this._names=Ea(e.getAttribute("class")||"")}Na.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sa(e,t){for(var n=Xi(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ca(e,t){for(var n=Xi(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function hv(e){return function(){Sa(this,e)}}function gv(e){return function(){Ca(this,e)}}function vv(e,t){return function(){(t.apply(this,arguments)?Sa:Ca)(this,e)}}function pv(e,t){var n=Ea(e+"");if(arguments.length<2){for(var o=Xi(this.node()),i=-1,s=n.length;++i<s;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?vv:t?hv:gv)(n,t))}function mv(){this.textContent=""}function yv(e){return function(){this.textContent=e}}function wv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function _v(e){return arguments.length?this.each(e==null?mv:(typeof e=="function"?wv:yv)(e)):this.node().textContent}function bv(){this.innerHTML=""}function $v(e){return function(){this.innerHTML=e}}function xv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ev(e){return arguments.length?this.each(e==null?bv:(typeof e=="function"?xv:$v)(e)):this.node().innerHTML}function Nv(){this.nextSibling&&this.parentNode.appendChild(this)}function Sv(){return this.each(Nv)}function Cv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kv(){return this.each(Cv)}function Mv(e){var t=typeof e=="function"?e:ya(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tv(){return null}function Dv(e,t){var n=typeof e=="function"?e:ya(e),o=t==null?Tv:typeof t=="function"?t:Gi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Iv(){var e=this.parentNode;e&&e.removeChild(this)}function Av(){return this.each(Iv)}function zv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ov(e){return this.select(e?Pv:zv)}function Bv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Rv(e){return function(t){e.call(this,t,this.__data__)}}function Vv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Hv(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function Lv(e,t,n){return function(){var o=this.__on,i,s=Rv(t);if(o){for(var r=0,a=o.length;r<a;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(i):this.__on=[i]}}function Fv(e,t,n){var o=Vv(e+""),i,s=o.length,r;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(a=t?Lv:Hv,i=0;i<s;++i)this.each(a(o[i],t,n));return this}function ka(e,t,n){var o=xa(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Yv(e,t){return function(){return ka(this,e,t)}}function Gv(e,t){return function(){return ka(this,e,t.apply(this,arguments))}}function Xv(e,t){return this.each((typeof t=="function"?Gv:Yv)(e,t))}function*Uv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,s=o.length,r;i<s;++i)(r=o[i])&&(yield r)}var Ma=[null];function Be(e,t){this._groups=e,this._parents=t}function kn(){return new Be([[document.documentElement]],Ma)}function qv(){return this}Be.prototype=kn.prototype={constructor:Be,select:wg,selectAll:xg,selectChild:Cg,selectChildren:Dg,filter:Ig,data:Rg,enter:Ag,exit:Hg,join:Lg,merge:Fg,selection:qv,order:Yg,sort:Gg,call:Ug,nodes:qg,node:jg,size:Zg,empty:Wg,each:Kg,attr:iv,style:lv,property:fv,classed:pv,text:_v,html:Ev,raise:Sv,lower:kv,append:Mv,insert:Dv,remove:Av,clone:Ov,datum:Bv,on:Fv,dispatch:Xv,[Symbol.iterator]:Uv};function mt(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Ma)}function jv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function gt(e,t){if(e=jv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const bi={capture:!0,passive:!1};function $i(e){e.preventDefault(),e.stopImmediatePropagation()}function Zv(e){var t=e.document.documentElement,n=mt(e).on("dragstart.drag",$i,bi);"onselectstart"in t?n.on("selectstart.drag",$i,bi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Wv(e,t){var n=e.document.documentElement,o=mt(e).on("dragstart.drag",null);t&&(o.on("click.drag",$i,bi),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ui(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ta(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Mn(){}var bn=.7,vo=1/bn,Gt="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kv=/^#([0-9a-f]{3,8})$/,Qv=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),Jv=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),ep=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${$n}\\)$`),tp=new RegExp(`^rgba\\(${We},${We},${We},${$n}\\)$`),np=new RegExp(`^hsl\\(${$n},${We},${We}\\)$`),op=new RegExp(`^hsla\\(${$n},${We},${We},${$n}\\)$`),Xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ui(Mn,xn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ur,formatHex:Ur,formatHex8:ip,formatHsl:rp,formatRgb:qr,toString:qr});function Ur(){return this.rgb().formatHex()}function ip(){return this.rgb().formatHex8()}function rp(){return Da(this).formatHsl()}function qr(){return this.rgb().formatRgb()}function xn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Kv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?jr(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Qv.exec(e))?new Pe(t[1],t[2],t[3],1):(t=Jv.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ep.exec(e))?Vn(t[1],t[2],t[3],t[4]):(t=tp.exec(e))?Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=np.exec(e))?Kr(t[1],t[2]/100,t[3]/100,1):(t=op.exec(e))?Kr(t[1],t[2]/100,t[3]/100,t[4]):Xr.hasOwnProperty(e)?jr(Xr[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function jr(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function Vn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Pe(e,t,n,o)}function sp(e){return e instanceof Mn||(e=xn(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function xi(e,t,n,o){return arguments.length===1?sp(e):new Pe(e,t,n,o??1)}function Pe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Ui(Pe,xi,Ta(Mn,{brighter(e){return e=e==null?vo:Math.pow(vo,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bn:Math.pow(bn,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(Dt(this.r),Dt(this.g),Dt(this.b),po(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zr,formatHex:Zr,formatHex8:ap,formatRgb:Wr,toString:Wr}));function Zr(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}`}function ap(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}${kt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wr(){const e=po(this.opacity);return`${e===1?"rgb(":"rgba("}${Dt(this.r)}, ${Dt(this.g)}, ${Dt(this.b)}${e===1?")":`, ${e})`}`}function po(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kt(e){return e=Dt(e),(e<16?"0":"")+e.toString(16)}function Kr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new He(e,t,n,o)}function Da(e){if(e instanceof He)return new He(e.h,e.s,e.l,e.opacity);if(e instanceof Mn||(e=xn(e)),!e)return new He;if(e instanceof He)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),s=Math.max(t,n,o),r=NaN,a=s-i,l=(s+i)/2;return a?(t===s?r=(n-o)/a+(n<o)*6:n===s?r=(o-t)/a+2:r=(t-n)/a+4,a/=l<.5?s+i:2-s-i,r*=60):a=l>0&&l<1?0:r,new He(r,a,l,e.opacity)}function lp(e,t,n,o){return arguments.length===1?Da(e):new He(e,t,n,o??1)}function He(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Ui(He,lp,Ta(Mn,{brighter(e){return e=e==null?vo:Math.pow(vo,e),new He(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bn:Math.pow(bn,e),new He(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Pe(ei(e>=240?e-240:e+120,i,o),ei(e,i,o),ei(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new He(Qr(this.h),Hn(this.s),Hn(this.l),po(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=po(this.opacity);return`${e===1?"hsl(":"hsla("}${Qr(this.h)}, ${Hn(this.s)*100}%, ${Hn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qr(e){return e=(e||0)%360,e<0?e+360:e}function Hn(e){return Math.max(0,Math.min(1,e||0))}function ei(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ia=e=>()=>e;function up(e,t){return function(n){return e+n*t}}function cp(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function dp(e){return(e=+e)==1?Aa:function(t,n){return n-t?cp(t,n,e):Ia(isNaN(t)?n:t)}}function Aa(e,t){var n=t-e;return n?up(e,n):Ia(isNaN(e)?t:e)}const Jr=function e(t){var n=dp(t);function o(i,s){var r=n((i=xi(i)).r,(s=xi(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=Aa(i.opacity,s.opacity);return function(c){return i.r=r(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function pt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ei=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ti=new RegExp(Ei.source,"g");function fp(e){return function(){return e}}function hp(e){return function(t){return e(t)+""}}function gp(e,t){var n=Ei.lastIndex=ti.lastIndex=0,o,i,s,r=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Ei.exec(e))&&(i=ti.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[r]?a[r]+=s:a[++r]=s),(o=o[0])===(i=i[0])?a[r]?a[r]+=i:a[++r]=i:(a[++r]=null,l.push({i:r,x:pt(o,i)})),n=ti.lastIndex;return n<t.length&&(s=t.slice(n),a[r]?a[r]+=s:a[++r]=s),a.length<2?l[0]?hp(l[0].x):fp(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var es=180/Math.PI,Ni={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function za(e,t,n,o,i,s){var r,a,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*es,skewX:Math.atan(l)*es,scaleX:r,scaleY:a}}var Ln;function vp(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ni:za(t.a,t.b,t.c,t.d,t.e,t.f)}function pp(e){return e==null||(Ln||(Ln=document.createElementNS("http://www.w3.org/2000/svg","g")),Ln.setAttribute("transform",e),!(e=Ln.transform.baseVal.consolidate()))?Ni:(e=e.matrix,za(e.a,e.b,e.c,e.d,e.e,e.f))}function Pa(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,h,g,b){if(u!==d||c!==h){var x=g.push("translate(",null,t,null,n);b.push({i:x-4,x:pt(u,d)},{i:x-2,x:pt(c,h)})}else(d||h)&&g.push("translate("+d+t+h+n)}function r(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,o)-2,x:pt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,o)-2,x:pt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,h,g,b){if(u!==d||c!==h){var x=g.push(i(g)+"scale(",null,",",null,")");b.push({i:x-4,x:pt(u,d)},{i:x-2,x:pt(c,h)})}else(d!==1||h!==1)&&g.push(i(g)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,h),r(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(g){for(var b=-1,x=h.length,E;++b<x;)d[(E=h[b]).i]=E.x(g);return d.join("")}}}var mp=Pa(vp,"px, ","px)","deg)"),yp=Pa(pp,", ",")",")"),wp=1e-12;function ts(e){return((e=Math.exp(e))+1/e)/2}function _p(e){return((e=Math.exp(e))-1/e)/2}function bp(e){return((e=Math.exp(2*e))-1)/(e+1)}const $p=function e(t,n,o){function i(s,r){var a=s[0],l=s[1],u=s[2],c=r[0],d=r[1],h=r[2],g=c-a,b=d-l,x=g*g+b*b,E,$;if(x<wp)$=Math.log(h/u)/t,E=function(R){return[a+R*g,l+R*b,u*Math.exp(t*R*$)]};else{var D=Math.sqrt(x),w=(h*h-u*u+o*x)/(2*u*n*D),k=(h*h-u*u-o*x)/(2*h*n*D),F=Math.log(Math.sqrt(w*w+1)-w),U=Math.log(Math.sqrt(k*k+1)-k);$=(U-F)/t,E=function(R){var Y=R*$,q=ts(F),G=u/(n*D)*(q*bp(t*Y+F)-_p(F));return[a+G*g,l+G*b,u*q/ts(t*Y+F)]}}return E.duration=$*1e3*t/Math.SQRT2,E}return i.rho=function(s){var r=Math.max(.001,+s),a=r*r,l=a*a;return e(r,a,l)},i}(Math.SQRT2,2,4);var Wt=0,ln=0,nn=0,Oa=1e3,mo,un,yo=0,Bt=0,Bo=0,En=typeof performance=="object"&&performance.now?performance:Date,Ba=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qi(){return Bt||(Ba(xp),Bt=En.now()+Bo)}function xp(){Bt=0}function wo(){this._call=this._time=this._next=null}wo.prototype=Ra.prototype={constructor:wo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qi():+n)+(t==null?0:+t),!this._next&&un!==this&&(un?un._next=this:mo=this,un=this),this._call=e,this._time=n,Si()},stop:function(){this._call&&(this._call=null,this._time=1/0,Si())}};function Ra(e,t,n){var o=new wo;return o.restart(e,t,n),o}function Ep(){qi(),++Wt;for(var e=mo,t;e;)(t=Bt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wt}function ns(){Bt=(yo=En.now())+Bo,Wt=ln=0;try{Ep()}finally{Wt=0,Sp(),Bt=0}}function Np(){var e=En.now(),t=e-yo;t>Oa&&(Bo-=t,yo=e)}function Sp(){for(var e,t=mo,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mo=n);un=e,Si(o)}function Si(e){if(!Wt){ln&&(ln=clearTimeout(ln));var t=e-Bt;t>24?(e<1/0&&(ln=setTimeout(ns,e-En.now()-Bo)),nn&&(nn=clearInterval(nn))):(nn||(yo=En.now(),nn=setInterval(Np,Oa)),Wt=1,Ba(ns))}}function os(e,t,n){var o=new wo;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Cp=Yi("start","end","cancel","interrupt"),kp=[],Va=0,is=1,Ci=2,Kn=3,rs=4,ki=5,Qn=6;function Ro(e,t,n,o,i,s){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;Mp(e,n,{name:t,index:o,group:i,on:Cp,tween:kp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Va})}function ji(e,t){var n=Ge(e,t);if(n.state>Va)throw new Error("too late; already scheduled");return n}function Qe(e,t){var n=Ge(e,t);if(n.state>Kn)throw new Error("too late; already running");return n}function Ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mp(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Ra(s,0,n.time);function s(u){n.state=is,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,h,g;if(n.state!==is)return l();for(c in o)if(g=o[c],g.name===n.name){if(g.state===Kn)return os(r);g.state===rs?(g.state=Qn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=Qn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(os(function(){n.state===Kn&&(n.state=rs,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ci,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ci){for(n.state=Kn,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=ki,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===ki&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Qn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Jn(e,t){var n=e.__transition,o,i,s=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){s=!1;continue}i=o.state>Ci&&o.state<ki,o.state=Qn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}s&&delete e.__transition}}function Tp(e){return this.each(function(){Jn(this,e)})}function Dp(e,t){var n,o;return function(){var i=Qe(this,e),s=i.tween;if(s!==n){o=n=s;for(var r=0,a=o.length;r<a;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function Ip(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var s=Qe(this,e),r=s.tween;if(r!==o){i=(o=r).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function Ap(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ge(this.node(),n).tween,i=0,s=o.length,r;i<s;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?Dp:Ip)(n,e,t))}function Zi(e,t,n){var o=e._id;return e.each(function(){var i=Qe(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ge(i,o).value[t]}}function Ha(e,t){var n;return(typeof t=="number"?pt:t instanceof xn?Jr:(n=xn(t))?(t=n,Jr):gp)(e,t)}function zp(e){return function(){this.removeAttribute(e)}}function Pp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Op(e,t,n){var o,i=n+"",s;return function(){var r=this.getAttribute(e);return r===i?null:r===o?s:s=t(o=r,n)}}function Bp(e,t,n){var o,i=n+"",s;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?s:s=t(o=r,n)}}function Rp(e,t,n){var o,i,s;return function(){var r,a=n(this),l;return a==null?void this.removeAttribute(e):(r=this.getAttribute(e),l=a+"",r===l?null:r===o&&l===i?s:(i=l,s=t(o=r,a)))}}function Vp(e,t,n){var o,i,s;return function(){var r,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),l=a+"",r===l?null:r===o&&l===i?s:(i=l,s=t(o=r,a)))}}function Hp(e,t){var n=Oo(e),o=n==="transform"?yp:Ha;return this.attrTween(e,typeof t=="function"?(n.local?Vp:Rp)(n,o,Zi(this,"attr."+e,t)):t==null?(n.local?Pp:zp)(n):(n.local?Bp:Op)(n,o,t))}function Lp(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Fp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Yp(e,t){var n,o;function i(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&Fp(e,s)),n}return i._value=t,i}function Gp(e,t){var n,o;function i(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&Lp(e,s)),n}return i._value=t,i}function Xp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Oo(e);return this.tween(n,(o.local?Yp:Gp)(o,t))}function Up(e,t){return function(){ji(this,e).delay=+t.apply(this,arguments)}}function qp(e,t){return t=+t,function(){ji(this,e).delay=t}}function jp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Up:qp)(t,e)):Ge(this.node(),t).delay}function Zp(e,t){return function(){Qe(this,e).duration=+t.apply(this,arguments)}}function Wp(e,t){return t=+t,function(){Qe(this,e).duration=t}}function Kp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zp:Wp)(t,e)):Ge(this.node(),t).duration}function Qp(e,t){if(typeof t!="function")throw new Error;return function(){Qe(this,e).ease=t}}function Jp(e){var t=this._id;return arguments.length?this.each(Qp(t,e)):Ge(this.node(),t).ease}function em(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qe(this,e).ease=n}}function tm(e){if(typeof e!="function")throw new Error;return this.each(em(this._id,e))}function nm(e){typeof e!="function"&&(e=_a(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var s=t[i],r=s.length,a=o[i]=[],l,u=0;u<r;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new ut(o,this._parents,this._name,this._id)}function om(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,s=Math.min(o,i),r=new Array(o),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=r[a]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(d[g]=h);for(;a<o;++a)r[a]=t[a];return new ut(r,this._parents,this._name,this._id)}function im(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function rm(e,t,n){var o,i,s=im(t)?ji:Qe;return function(){var r=s(this,e),a=r.on;a!==o&&(i=(o=a).copy()).on(t,n),r.on=i}}function sm(e,t){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(e):this.each(rm(n,e,t))}function am(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function lm(){return this.on("end.remove",am(this._id))}function um(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gi(e));for(var o=this._groups,i=o.length,s=new Array(i),r=0;r<i;++r)for(var a=o[r],l=a.length,u=s[r]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,Ro(u[h],t,n,h,u,Ge(c,n)));return new ut(s,this._parents,t,n)}function cm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wa(e));for(var o=this._groups,i=o.length,s=[],r=[],a=0;a<i;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),g,b=Ge(c,n),x=0,E=h.length;x<E;++x)(g=h[x])&&Ro(g,t,n,x,h,b);s.push(h),r.push(c)}return new ut(s,r,t,n)}var dm=kn.prototype.constructor;function fm(){return new dm(this._groups,this._parents)}function hm(e,t){var n,o,i;return function(){var s=Zt(this,e),r=(this.style.removeProperty(e),Zt(this,e));return s===r?null:s===n&&r===o?i:i=t(n=s,o=r)}}function La(e){return function(){this.style.removeProperty(e)}}function gm(e,t,n){var o,i=n+"",s;return function(){var r=Zt(this,e);return r===i?null:r===o?s:s=t(o=r,n)}}function vm(e,t,n){var o,i,s;return function(){var r=Zt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Zt(this,e))),r===l?null:r===o&&l===i?s:(i=l,s=t(o=r,a))}}function pm(e,t){var n,o,i,s="style."+t,r="end."+s,a;return function(){var l=Qe(this,e),u=l.on,c=l.value[s]==null?a||(a=La(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(r,i=c),l.on=o}}function mm(e,t,n){var o=(e+="")=="transform"?mp:Ha;return t==null?this.styleTween(e,hm(e,o)).on("end.style."+e,La(e)):typeof t=="function"?this.styleTween(e,vm(e,o,Zi(this,"style."+e,t))).each(pm(this._id,e)):this.styleTween(e,gm(e,o,t),n).on("end.style."+e,null)}function ym(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function wm(e,t,n){var o,i;function s(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&ym(e,r,n)),o}return s._value=t,s}function _m(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,wm(e,t,n??""))}function bm(e){return function(){this.textContent=e}}function $m(e){return function(){var t=e(this);this.textContent=t??""}}function xm(e){return this.tween("text",typeof e=="function"?$m(Zi(this,"text",e)):bm(e==null?"":e+""))}function Em(e){return function(t){this.textContent=e.call(this,t)}}function Nm(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Em(i)),t}return o._value=e,o}function Sm(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Nm(e))}function Cm(){for(var e=this._name,t=this._id,n=Fa(),o=this._groups,i=o.length,s=0;s<i;++s)for(var r=o[s],a=r.length,l,u=0;u<a;++u)if(l=r[u]){var c=Ge(l,t);Ro(l,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ut(o,this._parents,e,n)}function km(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(s,r){var a={value:r},l={value:function(){--i===0&&s()}};n.each(function(){var u=Qe(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var Mm=0;function ut(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Fa(){return++Mm}var et=kn.prototype;ut.prototype={constructor:ut,select:um,selectAll:cm,selectChild:et.selectChild,selectChildren:et.selectChildren,filter:nm,merge:om,selection:fm,transition:Cm,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:sm,attr:Hp,attrTween:Xp,style:mm,styleTween:_m,text:xm,textTween:Sm,remove:lm,tween:Ap,delay:jp,duration:Kp,ease:Jp,easeVarying:tm,end:km,[Symbol.iterator]:et[Symbol.iterator]};function Tm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dm={time:null,delay:0,duration:250,ease:Tm};function Im(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Am(e){var t,n;e instanceof ut?(t=e._id,e=e._name):(t=Fa(),(n=Dm).time=qi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,s=0;s<i;++s)for(var r=o[s],a=r.length,l,u=0;u<a;++u)(l=r[u])&&Ro(l,e,t,u,r,n||Im(l,t));return new ut(o,this._parents,e,t)}kn.prototype.interrupt=Tp;kn.prototype.transition=Am;const Fn=e=>()=>e;function zm(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function it(e,t,n){this.k=e,this.x=t,this.y=n}it.prototype={constructor:it,scale:function(e){return e===1?this:new it(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new it(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wi=new it(1,0,0);it.prototype;function ni(e){e.stopImmediatePropagation()}function on(e){e.preventDefault(),e.stopImmediatePropagation()}function Pm(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Om(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ss(){return this.__zoom||Wi}function Bm(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Rm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vm(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function Hm(){var e=Pm,t=Om,n=Vm,o=Bm,i=Rm,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],a=250,l=$p,u=Yi("start","zoom","end"),c,d,h,g=500,b=150,x=0,E=10;function $(f){f.property("__zoom",ss).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",j).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}$.transform=function(f,S,v,T){var N=f.selection?f.selection():f;N.property("__zoom",ss),f!==N?F(f,S,v,T):N.interrupt().each(function(){U(this,arguments).event(T).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},$.scaleBy=function(f,S,v,T){$.scaleTo(f,function(){var N=this.__zoom.k,A=typeof S=="function"?S.apply(this,arguments):S;return N*A},v,T)},$.scaleTo=function(f,S,v,T){$.transform(f,function(){var N=t.apply(this,arguments),A=this.__zoom,M=v==null?k(N):typeof v=="function"?v.apply(this,arguments):v,O=A.invert(M),Q=typeof S=="function"?S.apply(this,arguments):S;return n(w(D(A,Q),M,O),N,r)},v,T)},$.translateBy=function(f,S,v,T){$.transform(f,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),r)},null,T)},$.translateTo=function(f,S,v,T,N){$.transform(f,function(){var A=t.apply(this,arguments),M=this.__zoom,O=T==null?k(A):typeof T=="function"?T.apply(this,arguments):T;return n(Wi.translate(O[0],O[1]).scale(M.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof v=="function"?-v.apply(this,arguments):-v),A,r)},T,N)};function D(f,S){return S=Math.max(s[0],Math.min(s[1],S)),S===f.k?f:new it(S,f.x,f.y)}function w(f,S,v){var T=S[0]-v[0]*f.k,N=S[1]-v[1]*f.k;return T===f.x&&N===f.y?f:new it(f.k,T,N)}function k(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function F(f,S,v,T){f.on("start.zoom",function(){U(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(T).end()}).tween("zoom",function(){var N=this,A=arguments,M=U(N,A).event(T),O=t.apply(N,A),Q=v==null?k(O):typeof v=="function"?v.apply(N,A):v,ae=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),V=N.__zoom,Z=typeof S=="function"?S.apply(N,A):S,te=l(V.invert(Q).concat(ae/V.k),Z.invert(Q).concat(ae/Z.k));return function(ce){if(ce===1)ce=Z;else{var fe=te(ce),de=ae/fe[2];ce=new it(de,Q[0]-fe[0]*de,Q[1]-fe[1]*de)}M.zoom(null,ce)}})}function U(f,S,v){return!v&&f.__zooming||new R(f,S)}function R(f,S){this.that=f,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,S),this.taps=0}R.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,S){return this.mouse&&f!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var S=mt(this.that).datum();u.call(f,this.that,new zm(f,{sourceEvent:this.sourceEvent,target:$,transform:this.that.__zoom,dispatch:u}),S)}};function Y(f,...S){if(!e.apply(this,arguments))return;var v=U(this,S).event(f),T=this.__zoom,N=Math.max(s[0],Math.min(s[1],T.k*Math.pow(2,o.apply(this,arguments)))),A=gt(f);if(v.wheel)(v.mouse[0][0]!==A[0]||v.mouse[0][1]!==A[1])&&(v.mouse[1]=T.invert(v.mouse[0]=A)),clearTimeout(v.wheel);else{if(T.k===N)return;v.mouse=[A,T.invert(A)],Jn(this),v.start()}on(f),v.wheel=setTimeout(M,b),v.zoom("mouse",n(w(D(T,N),v.mouse[0],v.mouse[1]),v.extent,r));function M(){v.wheel=null,v.end()}}function q(f,...S){if(h||!e.apply(this,arguments))return;var v=f.currentTarget,T=U(this,S,!0).event(f),N=mt(f.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",ae,!0),A=gt(f,v),M=f.clientX,O=f.clientY;Zv(f.view),ni(f),T.mouse=[A,this.__zoom.invert(A)],Jn(this),T.start();function Q(V){if(on(V),!T.moved){var Z=V.clientX-M,te=V.clientY-O;T.moved=Z*Z+te*te>x}T.event(V).zoom("mouse",n(w(T.that.__zoom,T.mouse[0]=gt(V,v),T.mouse[1]),T.extent,r))}function ae(V){N.on("mousemove.zoom mouseup.zoom",null),Wv(V.view,T.moved),on(V),T.event(V).end()}}function G(f,...S){if(e.apply(this,arguments)){var v=this.__zoom,T=gt(f.changedTouches?f.changedTouches[0]:f,this),N=v.invert(T),A=v.k*(f.shiftKey?.5:2),M=n(w(D(v,A),T,N),t.apply(this,S),r);on(f),a>0?mt(this).transition().duration(a).call(F,M,T,f):mt(this).call($.transform,M,T,f)}}function j(f,...S){if(e.apply(this,arguments)){var v=f.touches,T=v.length,N=U(this,S,f.changedTouches.length===T).event(f),A,M,O,Q;for(ni(f),M=0;M<T;++M)O=v[M],Q=gt(O,this),Q=[Q,this.__zoom.invert(Q),O.identifier],N.touch0?!N.touch1&&N.touch0[2]!==Q[2]&&(N.touch1=Q,N.taps=0):(N.touch0=Q,A=!0,N.taps=1+!!c);c&&(c=clearTimeout(c)),A&&(N.taps<2&&(d=Q[0],c=setTimeout(function(){c=null},g)),Jn(this),N.start())}}function C(f,...S){if(this.__zooming){var v=U(this,S).event(f),T=f.changedTouches,N=T.length,A,M,O,Q;for(on(f),A=0;A<N;++A)M=T[A],O=gt(M,this),v.touch0&&v.touch0[2]===M.identifier?v.touch0[0]=O:v.touch1&&v.touch1[2]===M.identifier&&(v.touch1[0]=O);if(M=v.that.__zoom,v.touch1){var ae=v.touch0[0],V=v.touch0[1],Z=v.touch1[0],te=v.touch1[1],ce=(ce=Z[0]-ae[0])*ce+(ce=Z[1]-ae[1])*ce,fe=(fe=te[0]-V[0])*fe+(fe=te[1]-V[1])*fe;M=D(M,Math.sqrt(ce/fe)),O=[(ae[0]+Z[0])/2,(ae[1]+Z[1])/2],Q=[(V[0]+te[0])/2,(V[1]+te[1])/2]}else if(v.touch0)O=v.touch0[0],Q=v.touch0[1];else return;v.zoom("touch",n(w(M,O,Q),v.extent,r))}}function ie(f,...S){if(this.__zooming){var v=U(this,S).event(f),T=f.changedTouches,N=T.length,A,M;for(ni(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),A=0;A<N;++A)M=T[A],v.touch0&&v.touch0[2]===M.identifier?delete v.touch0:v.touch1&&v.touch1[2]===M.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(M=gt(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<E)){var O=mt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return $.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:Fn(+f),$):o},$.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Fn(!!f),$):e},$.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:Fn(!!f),$):i},$.extent=function(f){return arguments.length?(t=typeof f=="function"?f:Fn([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),$):t},$.scaleExtent=function(f){return arguments.length?(s[0]=+f[0],s[1]=+f[1],$):[s[0],s[1]]},$.translateExtent=function(f){return arguments.length?(r[0][0]=+f[0][0],r[1][0]=+f[1][0],r[0][1]=+f[0][1],r[1][1]=+f[1][1],$):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},$.constrain=function(f){return arguments.length?(n=f,$):n},$.duration=function(f){return arguments.length?(a=+f,$):a},$.interpolate=function(f){return arguments.length?(l=f,$):l},$.on=function(){var f=u.on.apply(u,arguments);return f===u?$:f},$.clickDistance=function(f){return arguments.length?(x=(f=+f)*f,$):Math.sqrt(x)},$.tapDistance=function(f){return arguments.length?(E=+f,$):E},$}const Ya=Symbol("MiniMapSlots"),Lm=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],Fm={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},Ym=xe({...Fm,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=$t(Ya),i=Ti(),s=$e(()=>i.style??{});function r(d){t("click",d)}function a(d){t("dblclick",d)}function l(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,h)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(L(),K(ke,{key:0},[z(o)[`node-${n.type}`]?(L(),Ce(xt(z(o)[`node-${n.type}`]),tl(nt({key:0},{...n,...d.$attrs})),null,16)):(L(),K("rect",nt({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||s.value.background||s.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:r,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,Lm))],64)):ge("",!0)}}),Gm=["width","height","viewBox","aria-labelledby"],Xm=["id"],Um=["d","fill","stroke","stroke-width"],qm={name:"MiniMap",compatConfig:{MODE:3}},jm=xe({...qm,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=cs(),o=Ti(),i=200,s=150,{id:r,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:d,d3Selection:h,d3Zoom:g,getNodesInitialized:b}=be(),x=we();At(Ya,n);const E=$e(()=>{var N;return e.width??((N=o.style)==null?void 0:N.width)??i}),$=$e(()=>{var N;return e.height??((N=o.style)==null?void 0:N.height)??s}),D=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",w=oe(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),k=oe(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),F=oe(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),U=oe(()=>ko(b.value.filter(N=>!N.hidden))),R=oe(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),Y=oe(()=>b.value&&b.value.length?ff(U.value,R.value):R.value),q=oe(()=>{const N=Y.value.width/E.value,A=Y.value.height/$.value;return Math.max(N,A)}),G=oe(()=>{const N=q.value*E.value,A=q.value*$.value,M=e.offsetScale*q.value;return{offset:M,x:Y.value.x-(N-Y.value.width)/2-M,y:Y.value.y-(A-Y.value.height)/2-M,width:N+M*2,height:A+M*2}}),j=oe(()=>!G.value.x||!G.value.y?"":`
    M${G.value.x-G.value.offset},${G.value.y-G.value.offset}
    h${G.value.width+G.value.offset*2}
    v${G.value.height+G.value.offset*2}
    h${-G.value.width-G.value.offset*2}z
    M${R.value.x+e.maskBorderRadius},${R.value.y}
    h${R.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${R.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(R.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(R.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);el(N=>{if(x.value){const A=mt(x.value),M=ae=>{if(ae.sourceEvent.type!=="wheel"||!h.value||!g.value)return;const V=-ae.sourceEvent.deltaY*(ae.sourceEvent.deltaMode===1?.05:ae.sourceEvent.deltaMode?1:.002)*e.zoomStep,Z=l.value.zoom*2**V;g.value.scaleTo(h.value,Z)},O=ae=>{if(ae.sourceEvent.type!=="mousemove"||!h.value||!g.value)return;const V=q.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),Z={x:l.value.x-ae.sourceEvent.movementX*V,y:l.value.y-ae.sourceEvent.movementY*V},te=[[0,0],[c.value.width,c.value.height]],ce=Wi.translate(Z.x,Z.y).scale(l.value.zoom),fe=g.value.constrain()(ce,te,u.value);g.value.transform(h.value,fe)},Q=Hm().on("zoom",e.pannable?O:()=>{}).on("zoom.wheel",e.zoomable?M:()=>{});A.call(Q),N(()=>{A.on("zoom",null)})}},{flush:"post"});function C(N){const[A,M]=gt(N);t("click",{event:N,position:{x:A,y:M}})}function ie(N,A){const M={event:N,node:A,connectedEdges:Nt([A],a.value)};d.miniMapNodeClick(M),t("nodeClick",M)}function f(N,A){const M={event:N,node:A,connectedEdges:Nt([A],a.value)};d.miniMapNodeDoubleClick(M),t("nodeDblclick",M)}function S(N,A){const M={event:N,node:A,connectedEdges:Nt([A],a.value)};d.miniMapNodeMouseEnter(M),t("nodeMouseenter",M)}function v(N,A){const M={event:N,node:A,connectedEdges:Nt([A],a.value)};d.miniMapNodeMouseMove(M),t("nodeMousemove",M)}function T(N,A){const M={event:N,node:A,connectedEdges:Nt([A],a.value)};d.miniMapNodeMouseLeave(M),t("nodeMouseleave",M)}return(N,A)=>(L(),Ce(z(ma),{position:N.position,class:Ee(["vue-flow__minimap",{pannable:N.pannable,zoomable:N.zoomable}])},{default:pe(()=>[(L(),K("svg",{ref_key:"el",ref:x,width:E.value,height:$.value,viewBox:[G.value.x,G.value.y,G.value.width,G.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${z(r)}`,onClick:C},[N.ariaLabel?(L(),K("title",{key:0,id:`vue-flow__minimap-${z(r)}`},Fe(N.ariaLabel),9,Xm)):ge("",!0),(L(!0),K(ke,null,It(z(b),M=>(L(),Ce(Ym,{id:M.id,key:M.id,position:M.computedPosition,dimensions:M.dimensions,selected:M.selected,dragging:M.dragging,style:Le(M.style),class:Ee(F.value(M)),color:w.value(M),"border-radius":N.nodeBorderRadius,"stroke-color":k.value(M),"stroke-width":N.nodeStrokeWidth,"shape-rendering":z(D),type:M.type,hidden:M.hidden,onClick:O=>ie(O,M),onDblclick:O=>f(O,M),onMouseenter:O=>S(O,M),onMousemove:O=>v(O,M),onMouseleave:O=>T(O,M)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),re("path",{class:"vue-flow__minimap-mask",d:j.value,fill:N.maskColor,stroke:N.maskStrokeColor,"stroke-width":N.maskStrokeWidth,"fill-rule":"evenodd"},null,8,Um)],8,Gm))]),_:1},8,["position","class"]))}}),Zm={name:"ControlButton",compatConfig:{MODE:3}},Wm=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},Km={type:"button",class:"vue-flow__controls-button"};function Qm(e,t,n,o,i,s){return L(),K("button",Km,[Se(e.$slots,"default")])}const cn=Wm(Zm,[["render",Qm]]),Jm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e0=re("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),t0=[e0];function n0(e,t){return L(),K("svg",Jm,t0)}const o0={render:n0},i0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},r0=re("path",{d:"M0 0h32v4.2H0z"},null,-1),s0=[r0];function a0(e,t){return L(),K("svg",i0,s0)}const l0={render:a0},u0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},c0=re("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),d0=[c0];function f0(e,t){return L(),K("svg",u0,d0)}const h0={render:f0},g0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},v0=re("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),p0=[v0];function m0(e,t){return L(),K("svg",g0,p0)}const y0={render:m0},w0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_0=re("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),b0=[_0];function $0(e,t){return L(),K("svg",w0,b0)}const x0={render:$0},E0={name:"Controls",compatConfig:{MODE:3}},N0=xe({...E0,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Gs.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:s,zoomIn:r,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:d}=be(),h=$e(()=>n.value||o.value||i.value),g=$e(()=>u.value.zoom<=c.value),b=$e(()=>u.value.zoom>=d.value);function x(){r(),t("zoomIn")}function E(){a(),t("zoomOut")}function $(){l(e.fitViewParams),t("fitView")}function D(){s(!h.value),t("interactionChange",!h.value)}return(w,k)=>(L(),Ce(z(ma),{class:"vue-flow__controls",position:w.position},{default:pe(()=>[Se(w.$slots,"top"),w.showZoom?(L(),K(ke,{key:0},[Se(w.$slots,"control-zoom-in",{},()=>[le(cn,{class:"vue-flow__controls-zoomin",disabled:b.value,onClick:x},{default:pe(()=>[Se(w.$slots,"icon-zoom-in",{},()=>[(L(),Ce(xt(z(o0))))])]),_:3},8,["disabled"])]),Se(w.$slots,"control-zoom-out",{},()=>[le(cn,{class:"vue-flow__controls-zoomout",disabled:g.value,onClick:E},{default:pe(()=>[Se(w.$slots,"icon-zoom-out",{},()=>[(L(),Ce(xt(z(l0))))])]),_:3},8,["disabled"])])],64)):ge("",!0),w.showFitView?Se(w.$slots,"control-fit-view",{key:1},()=>[le(cn,{class:"vue-flow__controls-fitview",onClick:$},{default:pe(()=>[Se(w.$slots,"icon-fit-view",{},()=>[(L(),Ce(xt(z(h0))))])]),_:3})]):ge("",!0),w.showInteractive?Se(w.$slots,"control-interactive",{key:2},()=>[w.showInteractive?(L(),Ce(cn,{key:0,class:"vue-flow__controls-interactive",onClick:D},{default:pe(()=>[h.value?Se(w.$slots,"icon-unlock",{key:0},()=>[(L(),Ce(xt(z(x0))))]):ge("",!0),h.value?ge("",!0):Se(w.$slots,"icon-lock",{key:1},()=>[(L(),Ce(xt(z(y0))))])]),_:3})):ge("",!0)]):ge("",!0),Se(w.$slots,"default")]),_:3},8,["position"]))}});let S0=0;function C0(){return`dndnode_${S0++}`}const k0={draggedType:we(null),isDragOver:we(!1),isDragging:we(!1)};function M0(){const{draggedType:e,isDragOver:t,isDragging:n}=k0,{addNodes:o,screenToFlowCoordinate:i,onNodesInitialized:s,updateNode:r}=be();ye(n,h=>{document.body.style.userSelect=h?"none":""});function a(h,g){h.dataTransfer&&(h.dataTransfer.setData("application/vueflow",g),h.dataTransfer.effectAllowed="move"),e.value=g,n.value=!0,document.addEventListener("drop",c)}function l(h){h.preventDefault(),e.value&&(t.value=!0,h.dataTransfer&&(h.dataTransfer.dropEffect="move"))}function u(){t.value=!1}function c(){n.value=!1,t.value=!1,e.value=null,document.removeEventListener("drop",c)}function d(h){const g=i({x:h.clientX,y:h.clientY}),b=C0(),x={id:b,type:e.value,position:g,data:{label:b}},{off:E}=s(()=>{r(b,$=>({position:{x:$.position.x-$.dimensions.width/2,y:$.position.y-$.dimensions.height/2}})),E()});o(x)}return{draggedType:e,isDragOver:t,isDragging:n,onDragStart:a,onDragLeave:u,onDragOver:l,onDrop:d}}const T0={class:"w-[250px] bg-white shadow-md p-4 overflow-y-auto"},D0={class:"space-y-2"},I0=["onDragstart"],A0={class:"flex items-center gap-2"},z0={key:0,class:"mt-2 text-xs text-gray-600"},P0={__name:"Actions",props:{nodeTypes:{type:Array,required:!0}},emits:["drag-start"],setup(e){return(t,n)=>(L(),K("div",T0,[n[1]||(n[1]=re("h2",{class:"text-lg font-semibold mb-4"},"",-1)),re("div",D0,[(L(!0),K(ke,null,It(e.nodeTypes,o=>(L(),K("div",{key:o.type+o.label,class:Ee(["p-3 rounded shadow cursor-pointer hover:opacity-90",[z(yt)(o.subject.object_type),z(at)(o.subject.object_type)]]),draggable:!0,onDragstart:i=>t.$emit("drag-start",i,o)},[re("div",A0,[le(z(_o),{icon:o.icon,class:"text-lg"},null,8,["icon"]),re("span",null,Fe(o.label),1)]),o.triggers?(L(),K("div",z0,[n[0]||(n[0]=Ae(" : ")),(L(!0),K(ke,null,It(o.triggers,i=>(L(),K("span",{key:i,class:"block ml-4"}," - "+Fe(i),1))),128))])):ge("",!0)],42,I0))),128))])]))}},O0={class:"w-[300px] bg-white p-4 overflow-y-auto shadow-md"},B0={key:0},R0={class:"mb-4"},V0={key:0,class:"mb-4"},H0={key:1,class:"mb-4"},L0={key:2,class:"mb-4"},F0={key:3,class:"mb-4"},Y0={key:4,class:"mb-4"},G0={key:5,class:"mb-4"},X0={key:6,class:"mb-4"},U0={key:7,class:"mb-4"},q0={key:8,class:"mb-4"},j0={class:"space-y-2"},Z0={key:1,class:"text-gray-500"},W0={__name:"Options",props:{selectedNode:{type:Object,default:null},getTriggerNodes:{type:Function,required:!0}},emits:["update-node-label","update-node-description","update-trigger-node","add-trigger","delete-trigger","delete-node","update-subject"],setup(e,{emit:t}){const n=e,o=t,i=()=>{n.selectedNode&&n.selectedNode.data.subject&&o("update-subject",n.selectedNode.id)};return(s,r)=>{const a=Rt("a-popconfirm");return L(),K("div",O0,[r[46]||(r[46]=re("h2",{class:"text-lg font-semibold mb-4"},"",-1)),e.selectedNode?(L(),K("div",B0,[re("div",R0,[r[29]||(r[29]=re("label",{class:"block text-sm font-medium mb-1"},"",-1)),le(z(Ki),{value:e.selectedNode.data.label,"onUpdate:value":r[0]||(r[0]=l=>e.selectedNode.data.label=l),placeholder:"",class:"w-full",onChange:r[1]||(r[1]=l=>s.$emit("update-node-label"))},null,8,["value"])]),e.selectedNode.type!=="trigger"?(L(),K("div",V0,[r[30]||(r[30]=re("label",{class:"block text-sm font-medium mb-1"},"",-1)),le(z(nl),{value:e.selectedNode.data.description,"onUpdate:value":r[2]||(r[2]=l=>e.selectedNode.data.description=l),placeholder:"  ",rows:2,"show-count":"",onChange:r[3]||(r[3]=l=>s.$emit("update-node-description"))},null,8,["value"])])):ge("",!0),e.selectedNode.type!=="trigger"&&e.selectedNode.data.subject?(L(),K("div",H0,[r[39]||(r[39]=re("label",{class:"block text-sm font-medium mb-1"}," ",-1)),le(z(ol),{value:e.selectedNode.data.subject.subject_type,"onUpdate:value":r[4]||(r[4]=l=>e.selectedNode.data.subject.subject_type=l),onChange:i},{default:pe(()=>[le(z(dt),{value:"ANY_EMP"},{default:pe(()=>r[31]||(r[31]=[Ae(" ")])),_:1,__:[31]}),le(z(dt),{value:"VOTERS"},{default:pe(()=>r[32]||(r[32]=[Ae(" ")])),_:1,__:[32]}),le(z(dt),{value:"TO_ORG_STRUCT"},{default:pe(()=>r[33]||(r[33]=[Ae(",  ")])),_:1,__:[33]}),le(z(dt),{value:"TO_ORG_JOB"},{default:pe(()=>r[34]||(r[34]=[Ae("  ")])),_:1,__:[34]}),le(z(dt),{value:"TO_ORG_EMPLOYEE"},{default:pe(()=>r[35]||(r[35]=[Ae(" ")])),_:1,__:[35]}),le(z(dt),{value:"TO_ROLE"},{default:pe(()=>r[36]||(r[36]=[Ae("  ")])),_:1,__:[36]}),le(z(dt),{value:"DIRECT"},{default:pe(()=>r[37]||(r[37]=[Ae("")])),_:1,__:[37]}),le(z(dt),{value:"CREATOR"},{default:pe(()=>r[38]||(r[38]=[Ae(" ")])),_:1,__:[38]})]),_:1},8,["value"])])):ge("",!0),e.selectedNode.data.subject&&e.selectedNode.data.subject.subject_type==="TO_ROLE"?(L(),K("div",L0,[le(tr,{role_id:e.selectedNode.data.subject.role_id,"onUpdate:role_id":r[5]||(r[5]=l=>e.selectedNode.data.subject.role_id=l),user_id:e.selectedNode.data.subject.user_id,"onUpdate:user_id":r[6]||(r[6]=l=>e.selectedNode.data.subject.user_id=l),"hide-user-select":!0,onChange:i},null,8,["role_id","user_id"])])):ge("",!0),e.selectedNode.data.subject&&e.selectedNode.data.subject.subject_type==="DIRECT"?(L(),K("div",F0,[le(tr,{role_id:e.selectedNode.data.subject.role_id,"onUpdate:role_id":r[7]||(r[7]=l=>e.selectedNode.data.subject.role_id=l),user_id:e.selectedNode.data.subject.user_id,"onUpdate:user_id":r[8]||(r[8]=l=>e.selectedNode.data.subject.user_id=l),onChange:i},null,8,["role_id","user_id"])])):ge("",!0),e.selectedNode.data.subject&&e.selectedNode.data.subject.subject_type==="TO_ORG_STRUCT"?(L(),K("div",Y0,[le(Lo,{org_role_id:e.selectedNode.data.subject.org_role_id,"onUpdate:org_role_id":r[9]||(r[9]=l=>e.selectedNode.data.subject.org_role_id=l),org_id:e.selectedNode.data.subject.org_id,"onUpdate:org_id":r[10]||(r[10]=l=>e.selectedNode.data.subject.org_id=l),struct_id:e.selectedNode.data.subject.struct_id,"onUpdate:struct_id":r[11]||(r[11]=l=>e.selectedNode.data.subject.struct_id=l),job_id:e.selectedNode.data.subject.job_id,"onUpdate:job_id":r[12]||(r[12]=l=>e.selectedNode.data.subject.job_id=l),emp_id:e.selectedNode.data.subject.emp_id,"onUpdate:emp_id":r[13]||(r[13]=l=>e.selectedNode.data.subject.emp_id=l),onChange:i,mode:"TO_ORG_STRUCT"},null,8,["org_role_id","org_id","struct_id","job_id","emp_id"])])):ge("",!0),e.selectedNode.data.subject&&e.selectedNode.data.subject.subject_type==="TO_ORG_JOB"?(L(),K("div",G0,[le(Lo,{org_role_id:e.selectedNode.data.subject.org_role_id,"onUpdate:org_role_id":r[14]||(r[14]=l=>e.selectedNode.data.subject.org_role_id=l),org_id:e.selectedNode.data.subject.org_id,"onUpdate:org_id":r[15]||(r[15]=l=>e.selectedNode.data.subject.org_id=l),struct_id:e.selectedNode.data.subject.struct_id,"onUpdate:struct_id":r[16]||(r[16]=l=>e.selectedNode.data.subject.struct_id=l),job_id:e.selectedNode.data.subject.job_id,"onUpdate:job_id":r[17]||(r[17]=l=>e.selectedNode.data.subject.job_id=l),emp_id:e.selectedNode.data.subject.emp_id,"onUpdate:emp_id":r[18]||(r[18]=l=>e.selectedNode.data.subject.emp_id=l),onChange:i,mode:"TO_ORG_JOB"},null,8,["org_role_id","org_id","struct_id","job_id","emp_id"])])):ge("",!0),e.selectedNode.data.subject&&e.selectedNode.data.subject.subject_type==="TO_ORG_EMPLOYEE"?(L(),K("div",X0,[le(Lo,{org_role_id:e.selectedNode.data.subject.org_role_id,"onUpdate:org_role_id":r[19]||(r[19]=l=>e.selectedNode.data.subject.org_role_id=l),org_id:e.selectedNode.data.subject.org_id,"onUpdate:org_id":r[20]||(r[20]=l=>e.selectedNode.data.subject.org_id=l),struct_id:e.selectedNode.data.subject.struct_id,"onUpdate:struct_id":r[21]||(r[21]=l=>e.selectedNode.data.subject.struct_id=l),job_id:e.selectedNode.data.subject.job_id,"onUpdate:job_id":r[22]||(r[22]=l=>e.selectedNode.data.subject.job_id=l),emp_id:e.selectedNode.data.subject.emp_id,"onUpdate:emp_id":r[23]||(r[23]=l=>e.selectedNode.data.subject.emp_id=l),onChange:i,mode:"TO_ORG_EMPLOYEE"},null,8,["org_role_id","org_id","struct_id","job_id","emp_id"])])):ge("",!0),e.selectedNode.data.subject&&e.selectedNode.type!=="trigger"?(L(),K("div",U0,[le(z(Ho),{checked:e.selectedNode.data.subject.is_read_only,"onUpdate:checked":r[24]||(r[24]=l=>e.selectedNode.data.subject.is_read_only=l),onChange:i},{default:pe(()=>r[40]||(r[40]=[Ae("   ")])),_:1,__:[40]},8,["checked"]),le(z(Ho),{checked:e.selectedNode.data.subject.is_signature_needed,"onUpdate:checked":r[25]||(r[25]=l=>e.selectedNode.data.subject.is_signature_needed=l),onChange:i},{default:pe(()=>r[41]||(r[41]=[Ae("     ")])),_:1,__:[41]},8,["checked"]),le(z(Ho),{checked:e.selectedNode.data.subject.is_subject_changeable,"onUpdate:checked":r[26]||(r[26]=l=>e.selectedNode.data.subject.is_subject_changeable=l),onChange:i},{default:pe(()=>r[42]||(r[42]=[Ae("    ")])),_:1,__:[42]},8,["checked"])])):ge("",!0),e.selectedNode.type==="action"?(L(),K("div",q0,[r[44]||(r[44]=re("h3",{class:"text-sm font-medium mb-2"},"",-1)),re("div",j0,[(L(!0),K(ke,null,It(e.getTriggerNodes(e.selectedNode.id),l=>(L(),K("div",{key:l.id,class:"flex items-center"},[le(z(Ki),{value:l.data.label,"onUpdate:value":u=>l.data.label=u,placeholder:" ",class:"flex-1",onChange:u=>s.$emit("update-trigger-node",l.id)},null,8,["value","onUpdate:value","onChange"]),le(a,{title:"     ?","ok-text":"","cancel-text":"",onConfirm:u=>s.$emit("delete-trigger",l.id)},{default:pe(()=>r[43]||(r[43]=[re("button",{class:"ml-2 text-red-500 hover:text-red-700 w-4 h-4 flex items-center justify-center"},[re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:"w-3 h-3 fill-current"},[re("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 10.793a.5.5 0 0 1-.707.707L8 8.707 5.207 11.5a.5.5 0 0 1-.707-.707L7.293 8 4.5 5.207a.5.5 0 0 1 .707-.707L8 7.293l2.793-2.793a.5.5 0 0 1 .707.707L8.707 8l2.793 2.793z"})])],-1)])),_:2,__:[43]},1032,["onConfirm"])]))),128))]),re("button",{class:"mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",onClick:r[27]||(r[27]=il(l=>s.$emit("add-trigger",e.selectedNode.id),["prevent"]))},"   ")])):ge("",!0),le(a,{title:"   ?","ok-text":"","cancel-text":"",onConfirm:r[28]||(r[28]=l=>s.$emit("delete-node",e.selectedNode.id))},{default:pe(()=>r[45]||(r[45]=[re("button",{class:"mt-4 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 w-full flex items-center justify-center"},[re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:"w-4 h-4 fill-current mr-2"},[re("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 10.793a.5.5 0 0 1-.707.707L8 8.707 5.207 11.5a.5.5 0 0 1-.707-.707L7.293 8 4.5 5.207a.5.5 0 0 1 .707-.707L8 7.293l2.793-2.793a.5.5 0 0 1 .707.707L8.707 8l2.793 2.793z"})]),Ae("  ")],-1)])),_:1,__:[45]})])):(L(),K("div",Z0,"    "))])}}};var rt=(e=>(e.Lines="lines",e.Dots="dots",e))(rt||{});const Ga=function({dimensions:e,size:t,color:n}){return _e("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},Xa=function({radius:e,color:t}){return _e("circle",{cx:e,cy:e,r:e,fill:t})};rt.Lines+"",rt.Dots+"";const K0={[rt.Dots]:"#81818a",[rt.Lines]:"#eee"},Q0=["id","x","y","width","height","patternTransform"],J0={key:2,height:"100",width:"100"},e1=["fill"],t1=["x","y","fill"],n1={name:"Background",compatConfig:{MODE:3}},o1=xe({...n1,props:{id:{},variant:{default:()=>rt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=be(),o=oe(()=>{const r=n.value.zoom,[a,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*r||1,l*r||1],c=e.size*r,[d,h]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],g=[d*r||1+u[0]/2,h*r||1+u[1]/2];return{scaledGap:u,offset:g,size:c}}),i=$e(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),s=$e(()=>e.color||e.patternColor||K0[e.variant||rt.Dots]);return(r,a)=>(L(),K("svg",{class:"vue-flow__background vue-flow__container",style:Le({height:`${r.height>100?100:r.height}%`,width:`${r.width>100?100:r.width}%`})},[Se(r.$slots,"pattern-container",{id:i.value},()=>[re("pattern",{id:i.value,x:z(n).x%o.value.scaledGap[0],y:z(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Se(r.$slots,"pattern",{},()=>[r.variant===z(rt).Lines?(L(),Ce(z(Ga),{key:0,size:r.lineWidth,color:s.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):r.variant===z(rt).Dots?(L(),Ce(z(Xa),{key:1,color:s.value,radius:o.value.size/2},null,8,["color","radius"])):ge("",!0),r.bgColor?(L(),K("svg",J0,[re("rect",{width:"100%",height:"100%",fill:r.bgColor},null,8,e1)])):ge("",!0)])],8,Q0)]),re("rect",{x:r.x,y:r.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,t1),Se(r.$slots,"default",{id:i.value})],4))}}),i1={class:"dropzone-background"},r1={key:0,class:"text-blue-600 font-semibold"},s1={__name:"DropzoneBackground",props:{isDragOver:Boolean},setup(e){return(t,n)=>(L(),K("div",i1,[le(z(o1),{size:2,gap:20,"pattern-color":"#BDBDBD"}),re("div",{class:Ee(["overlay",{"bg-blue-100":e.isDragOver}])},[e.isDragOver?(L(),K("p",r1,"")):ge("",!0)],2)]))}},a1=sl(s1,[["__scopeId","data-v-e6b5654e"]]),l1={name:"NodeToolbar",compatConfig:{MODE:3},inheritAttrs:!1},Vo=xe({...l1,props:{nodeId:{},isVisible:{type:Boolean,default:void 0},position:{default:se.Top},offset:{default:10},align:{default:"center"}},setup(e){const t=e,n=$t(Li,null),{viewportRef:o,viewport:i,getSelectedNodes:s,findNode:r}=be(),a=oe(()=>(Array.isArray(t.nodeId)?t.nodeId:[t.nodeId||n||""]).reduce((b,x)=>{const E=r(x);return E&&b.push(E),b},[])),l=oe(()=>typeof t.isVisible=="boolean"?t.isVisible:a.value.length===1&&a.value[0].selected&&s.value.length===1),u=oe(()=>ko(a.value)),c=oe(()=>Math.max(...a.value.map(g=>(g.computedPosition.z||1)+1))),d=oe(()=>({position:"absolute",transform:h(u.value,i.value,t.position,t.offset,t.align),zIndex:c.value}));function h(g,b,x,E,$){let D=.5;$==="start"?D=0:$==="end"&&(D=1);let w=[(g.x+g.width*D)*b.zoom+b.x,g.y*b.zoom+b.y-E],k=[-100*D,-100];switch(x){case se.Right:w=[(g.x+g.width)*b.zoom+b.x+E,(g.y+g.height*D)*b.zoom+b.y],k=[0,-100*D];break;case se.Bottom:w[1]=(g.y+g.height)*b.zoom+b.y+E,k[1]=0;break;case se.Left:w=[g.x*b.zoom+b.x-E,(g.y+g.height*D)*b.zoom+b.y],k=[-100,-100*D];break}return`translate(${w[0]}px, ${w[1]}px) translate(${k[0]}%, ${k[1]}%)`}return(g,b)=>(L(),Ce(rl,{to:z(o),disabled:!z(o)},[l.value&&a.value.length?(L(),K("div",nt({key:0},g.$attrs,{style:d.value,class:"vue-flow__node-toolbar"}),[Se(g.$slots,"default")],16)):ge("",!0)],8,["to","disabled"]))}}),u1={class:"p-3 min-w-[80px]"},c1={class:"flex items-center gap-1"},d1={__name:"Start",props:{id:String,data:{type:Object,default:()=>({label:"",toolbarPosition:"top",icon:"fa-solid fa-play",color:"blue",subject:{object_type:"START"}})},position:Object,selected:Boolean},emits:["delete-node"],setup(e){const t=e,n=oe(()=>{const s=yt(t.data.subject.object_type),r=at(t.data.subject.object_type);return`${s} ${r} ${t.selected?"brightness-110":""}`}),o=oe(()=>at(t.data.subject.object_type).split(" ").find(r=>r.startsWith("text-"))||"text-gray-700"),i=oe(()=>{const s=bo(t.data.subject.object_type),r=yt(t.data.subject.object_type);return`${s} ${r} ${t.selected?"brightness-110":""}`});return(s,r)=>{var l;const a=Rt("a-popconfirm");return L(),K(ke,null,[le(z(Vo),{"is-visible":e.selected,position:e.data.toolbarPosition},{default:pe(()=>[le(a,{title:"   ?","ok-text":"","cancel-text":"",onConfirm:r[0]||(r[0]=u=>s.$emit("delete-node",e.id))},{default:pe(()=>r[1]||(r[1]=[re("button",{type:"button",class:"-translate-y-12 p-1 bg-red-500 rounded-full text-white hover:bg-red-600"},[re("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[re("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)])),_:1,__:[1]})]),_:1},8,["is-visible","position"]),re("div",{class:Ee(["border-2 rounded-full start-node node-container bg-white",n.value])},[re("div",u1,[re("div",c1,[le(z(_o),{icon:e.data.icon||"fa-solid fa-play",class:Ee(o.value)},null,8,["icon","class"]),re("div",{class:Ee(["text-sm text-center",o.value])},Fe(((l=e.data)==null?void 0:l.label)||""),3)])]),le(z(bt),{type:"source",position:"bottom",class:Ee(["output-handle",i.value])},null,8,["class"])],2)],64)}}},f1={class:"p-3 min-w-[100px]"},h1={class:"flex flex-col items-center gap-1"},g1={__name:"End",props:{id:String,data:{type:Object,default:()=>({label:"",toolbarPosition:"top",icon:"fa-solid fa-stop",color:"green",subject:{object_type:"END"}})},position:Object,selected:Boolean},emits:["delete-node"],setup(e){const t=e,n=oe(()=>{const s="bg-white",r=at(t.data.subject.object_type);return`${s} ${r} ${t.selected?"brightness-110":""}`}),o=oe(()=>at(t.data.subject.object_type).split(" ").find(r=>r.startsWith("text-"))||"text-gray-700"),i=oe(()=>{const s=bo(t.data.subject.object_type),r=yt(t.data.subject.object_type);return`${s} ${r} ${t.selected?"brightness-110":""}`});return(s,r)=>{var l;const a=Rt("a-popconfirm");return L(),K(ke,null,[le(z(Vo),{"is-visible":e.selected,position:e.data.toolbarPosition},{default:pe(()=>[le(a,{title:"   ?","ok-text":"","cancel-text":"",onConfirm:r[0]||(r[0]=u=>s.$emit("delete-node",e.id))},{default:pe(()=>r[1]||(r[1]=[re("button",{type:"button",class:"-translate-y-12 p-1 bg-red-500 rounded-full text-white hover:bg-red-600"},[re("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[re("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)])),_:1,__:[1]})]),_:1},8,["is-visible","position"]),re("div",{class:Ee(["border-2 rounded node-end node-container",n.value])},[le(z(bt),{type:"target",position:"top",class:Ee(["input-handle",i.value])},null,8,["class"]),re("div",f1,[re("div",h1,[le(z(_o),{icon:e.data.icon||"fa-solid fa-stop",class:Ee(o.value)},null,8,["icon","class"]),re("div",{class:Ee(["text-center text-sm",o.value])},Fe(((l=e.data)==null?void 0:l.label)||""),3)])])],2)],64)}}},v1={class:"flex items-center gap-1"},p1={key:0,class:"node-description"},m1={__name:"Action",props:{id:String,data:{type:Object,default:()=>({label:"",toolbarPosition:"top",icon:"fa-solid fa-check",color:"teal",triggers:[],subject:{object_type:"CHECK"}})},position:Object,selected:Boolean},emits:["add-trigger","delete-trigger","delete-node"],setup(e){const t=e,n=oe(()=>{const s=yt(t.data.subject.object_type),r=at(t.data.subject.object_type);return`${s} ${r} ${t.selected?"brightness-110":""}`}),o=oe(()=>{const s=bo(t.data.subject.object_type),r=yt(t.data.subject.object_type);return`${s} ${r} ${t.selected?"brightness-110":""}`}),i=oe(()=>at(t.data.subject.object_type).split(" ").find(r=>r.startsWith("text-"))||"text-gray-700");return(s,r)=>{var l;const a=Rt("a-popconfirm");return L(),K(ke,null,[le(z(Vo),{"is-visible":e.selected,position:e.data.toolbarPosition},{default:pe(()=>[le(a,{title:"   ?","ok-text":"","cancel-text":"",onConfirm:r[0]||(r[0]=u=>s.$emit("delete-node",e.id))},{default:pe(()=>r[1]||(r[1]=[re("button",{type:"button",class:"-translate-y-16 p-1 bg-red-500 rounded-full text-white hover:bg-red-600"},[re("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[re("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)])),_:1,__:[1]})]),_:1},8,["is-visible","position"]),re("div",{class:Ee(["border-2 rounded shadow-sm p-3 bg-white node-container",n.value])},[le(z(bt),{type:"target",position:"top",class:Ee(["input-handle",o.value])},null,8,["class"]),re("div",v1,[le(z(_o),{icon:e.data.icon||"fa-solid fa-check",class:Ee(i.value)},null,8,["icon","class"]),re("div",{class:Ee(["text-center text-sm","whitespace-nowrap",i.value])},Fe(((l=e.data)==null?void 0:l.label)||""),3)]),t.data.description?(L(),K("div",p1,Fe(t.data.description),1)):ge("",!0)],2)],64)}}},y1={__name:"Trigger",props:{id:String,data:{type:Object,default:()=>({label:"",toolbarPosition:"top",parentSubject:Object})},parentSubject:Object,position:Object,selected:Boolean,parentNode:String},emits:["delete-node"],setup(e){const t=e,n=oe(()=>{var r;return((r=t.data)==null?void 0:r.parentSubject)||null}),o=oe(()=>{var u;const r=((u=n.value)==null?void 0:u.object_type)||"CHECK",a=yt(r),l=at(r);return`${a} ${l} ${t.selected?"brightness-110":""}`}),i=oe(()=>{var l;const r=((l=n.value)==null?void 0:l.object_type)||"CHECK";return at(r).split(" ").find(u=>u.startsWith("text-"))||"text-gray-700"}),s=oe(()=>{var u;const r=((u=n.value)==null?void 0:u.object_type)||"CHECK",a=bo(r),l=yt(r);return`${a} ${l}`});return(r,a)=>{var u;const l=Rt("a-popconfirm");return L(),K(ke,null,[le(z(Vo),{"is-visible":e.selected,position:e.data.toolbarPosition},{default:pe(()=>[le(l,{title:"   ?","ok-text":"","cancel-text":"",onConfirm:a[0]||(a[0]=c=>r.$emit("delete-node",e.id))},{default:pe(()=>a[1]||(a[1]=[re("button",{type:"button",class:"p-1 bg-red-500 rounded-full text-white hover:bg-red-600"},[re("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[re("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)])),_:1,__:[1]})]),_:1},8,["is-visible","position"]),re("div",{class:Ee(["flex items-center border rounded-lg px-1 py-1 text-xs text-center bg-white node-container",o.value])},[re("span",{class:Ee(["flex-1 text-center trigger-label",i.value])},Fe(((u=e.data)==null?void 0:u.label)||""),3),le(z(bt),{id:e.id,type:"source",position:"bottom",class:Ee(["output-handle",s.value])},null,8,["id","class"])],2)],64)}}},w1={key:0,width:"16",height:"16",viewBox:"0 0 32 32"},_1={key:1,width:"16",height:"16",viewBox:"0 0 24 24"},b1={key:2,width:"16",height:"16",viewBox:"0 0 24 24"},$1={key:3,width:"16",height:"16",viewBox:"0 0 24 24"},x1={key:4,width:"16",height:"16",viewBox:"0 0 24 24"},E1={key:5,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},oi={__name:"Icon",props:{name:{type:String,required:!0}},setup(e){return(t,n)=>(L(),K(ke,null,[e.name==="reset"?(L(),K("svg",w1,n[0]||(n[0]=[re("path",{d:"M18 28A12 12 0 1 0 6 16v6.2l-3.6-3.6L1 20l6 6l6-6l-1.4-1.4L8 22.2V16a10 10 0 1 1 10 10Z"},null,-1)]))):ge("",!0),e.name==="update"?(L(),K("svg",_1,n[1]||(n[1]=[re("path",{d:"M14 20v-2h2.6l-3.2-3.2l1.425-1.425L18 16.55V14h2v6Zm-8.6 0L4 18.6L16.6 6H14V4h6v6h-2V7.4Zm3.775-9.425L4 5.4L5.4 4l5.175 5.175Z"},null,-1)]))):ge("",!0),e.name==="sun"?(L(),K("svg",b1,n[2]||(n[2]=[re("path",{d:"M12 17q-2.075 0-3.537-1.463Q7 14.075 7 12t1.463-3.538Q9.925 7 12 7t3.538 1.462Q17 9.925 17 12q0 2.075-1.462 3.537Q14.075 17 12 17ZM2 13q-.425 0-.712-.288Q1 12.425 1 12t.288-.713Q1.575 11 2 11h2q.425 0 .713.287Q5 11.575 5 12t-.287.712Q4.425 13 4 13Zm18 0q-.425 0-.712-.288Q19 12.425 19 12t.288-.713Q19.575 11 20 11h2q.425 0 .712.287q.288.288.288.713t-.288.712Q22.425 13 22 13Zm-8-8q-.425 0-.712-.288Q11 4.425 11 4V2q0-.425.288-.713Q11.575 1 12 1t.713.287Q13 1.575 13 2v2q0 .425-.287.712Q12.425 5 12 5Zm0 18q-.425 0-.712-.288Q11 22.425 11 22v-2q0-.425.288-.712Q11.575 19 12 19t.713.288Q13 19.575 13 20v2q0 .425-.287.712Q12.425 23 12 23ZM5.65 7.05L4.575 6q-.3-.275-.288-.7q.013-.425.288-.725q.3-.3.725-.3t.7.3L7.05 5.65q.275.3.275.7q0 .4-.275.7q-.275.3-.687.287q-.413-.012-.713-.287ZM18 19.425l-1.05-1.075q-.275-.3-.275-.712q0-.413.275-.688q.275-.3.688-.287q.412.012.712.287L19.425 18q.3.275.288.7q-.013.425-.288.725q-.3.3-.725.3t-.7-.3ZM16.95 7.05q-.3-.275-.287-.688q.012-.412.287-.712L18 4.575q.275-.3.7-.288q.425.013.725.288q.3.3.3.725t-.3.7L18.35 7.05q-.3.275-.7.275q-.4 0-.7-.275ZM4.575 19.425q-.3-.3-.3-.725t.3-.7l1.075-1.05q.3-.275.713-.275q.412 0 .687.275q.3.275.288.688q-.013.412-.288.712L6 19.425q-.275.3-.7.287q-.425-.012-.725-.287Z"},null,-1)]))):ge("",!0),e.name==="moon"?(L(),K("svg",$1,n[3]||(n[3]=[re("path",{d:"M12 21q-3.75 0-6.375-2.625T3 12q0-3.75 2.625-6.375T12 3q.35 0 .688.025q.337.025.662.075q-1.025.725-1.637 1.887Q11.1 6.15 11.1 7.5q0 2.25 1.575 3.825Q14.25 12.9 16.5 12.9q1.375 0 2.525-.613q1.15-.612 1.875-1.637q.05.325.075.662Q21 11.65 21 12q0 3.75-2.625 6.375T12 21Z"},null,-1)]))):ge("",!0),e.name==="log"?(L(),K("svg",x1,n[4]||(n[4]=[re("path",{d:"M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59l3.99-4Z"},null,-1)]))):ge("",!0),e.name==="plus"?(L(),K("svg",E1,n[5]||(n[5]=[re("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)]))):ge("",!0)],64))}};var Yn,N1=new Uint8Array(16);function S1(){if(!Yn&&(Yn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Yn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yn(N1)}const C1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function k1(e){return typeof e=="string"&&C1.test(e)}var Ie=[];for(var ii=0;ii<256;++ii)Ie.push((ii+256).toString(16).substr(1));function M1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ie[e[t+0]]+Ie[e[t+1]]+Ie[e[t+2]]+Ie[e[t+3]]+"-"+Ie[e[t+4]]+Ie[e[t+5]]+"-"+Ie[e[t+6]]+Ie[e[t+7]]+"-"+Ie[e[t+8]]+Ie[e[t+9]]+"-"+Ie[e[t+10]]+Ie[e[t+11]]+Ie[e[t+12]]+Ie[e[t+13]]+Ie[e[t+14]]+Ie[e[t+15]]).toLowerCase();if(!k1(n))throw TypeError("Stringified UUID is invalid");return n}function T1(e,t,n){e=e||{};var o=e.random||(e.rng||S1)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,M1(o)}const as=()=>T1(),D1={class:"flex khan-workflow-wrapper"},I1={key:0,class:"absolute top-14 left-4 z-10"},O1={__name:"Workflow",props:{flowData:{type:String,default:""}},emits:["changed"],setup(e,{emit:t}){const n=e,o=t,{addNodes:i,zoomOnScroll:s,addEdges:r,fitView:a,updateNode:l,removeNodes:u,screenToFlowCoordinate:c,onNodesInitialized:d,setViewport:h,toObject:g,removeEdges:b,updateNodeData:x,getNodes:E}=be(),{onDragStart:$,onDragOver:D,onDragLeave:w,isDragOver:k,draggedType:F}=M0(),U=we(!1),R=we([]),Y=we([]),q=we(null),G=we(!1),j=()=>{G.value=!G.value},C=H=>{H.key==="Escape"&&A()};ct(()=>{s.value=!1;const{onConnect:H}=be();H(S),window.addEventListener("keydown",C);const B=document.querySelector(".vue-flow__controls");B&&B.querySelectorAll("button").forEach(J=>{J.type="button"})}),ye(()=>n.flowData,(H,B)=>{if(B===null&&H){const P=JSON.parse(n.flowData);R.value=P.nodes||Qi,Y.value=P.edges||Ji}},{deep:!1}),ds(()=>{window.removeEventListener("keydown",C)}),ye([R,Y],()=>{const H=g();o("changed",{nodes:H.nodes.map(B=>({...B})),edges:H.edges})},{deep:!0});const ie=H=>{var P;const B=E.value.find(J=>J.id===H);return((P=B==null?void 0:B.data)==null?void 0:P.subject)||null},f=H=>{if(H.preventDefault(),!F.value)return;const B=c({x:H.clientX,y:H.clientY}),P=as(),J=F.value,p=er.find(I=>I.type===J.type&&I.label===J.label);let m=[];const _={id:P,type:J.type,position:B,data:{label:p.label,toolbarPosition:se.Right,icon:p.icon,color:p.color,description:p.description,subject:{...p.subject},...p.triggers?{triggers:p.triggers}:{}}};if(J.type==="action"){const I=p.triggers||[];let ee=10;const X=I.map((W,ue)=>{const he=Vt(W),ve={id:`${P}-${ue+1}`,type:"trigger",parentNode:P,position:{x:ee,y:Qt},data:{label:W,toolbarPosition:se.Right,parentSubject:{...p.subject}},extent:"parent",expandParent:!0,draggable:!1,style:{width:`${he}px`}};return ee+=he+Tn,ve});m=[{..._,style:{width:`${Jt(p.label,I)}px`,height:"90px"}},...X]}else m=[_];const{off:y}=d(()=>{l(P,I=>({position:{x:I.position.x-I.dimensions.width/2,y:I.position.y-I.dimensions.height/2}})),y()});i(m)},S=H=>{r([{...H,id:`e${H.source}-${H.target}`,type:"smoothstep",animated:!1,markerEnd:{type:lo.ArrowClosed}}])},v=H=>{const{node:B}=H;B.parentNode||(R.value=R.value.map(P=>P.id===B.id?{...P,position:B.position}:P))},T=()=>{if(a(),n.flowData&&R.value.length===0){const H=JSON.parse(n.flowData);R.value=H.nodes||Qi,Y.value=H.edges||Ji,R.value.length===0&&(G.value=!0)}else G.value=!0},N=()=>{A()},A=()=>{q.value&&(q.value=null),G.value=!1},M=H=>{var B,P,J,p,m,_,y;q.value=fs({...H.node,data:{label:((B=H.node.data)==null?void 0:B.label)||"",toolbarPosition:((P=H.node.data)==null?void 0:P.toolbarPosition)||se.Right,icon:(J=H.node.data)==null?void 0:J.icon,color:(p=H.node.data)==null?void 0:p.color,description:((m=H.node.data)==null?void 0:m.description)||"",subject:(_=H.node.data)!=null&&_.subject?{...H.node.data.subject}:null,...(y=H.node.data)!=null&&y.triggers?{triggers:H.node.data.triggers}:{},...H.node.parentNode?{parentSubject:ie(H.node.parentNode)}:{}}})},O=()=>{if(q.value){const B=[...V(q.value.id).map(P=>P.data.label)];l(q.value.id,P=>({...P,data:{...P.data,label:q.value.data.label},style:{width:`${Jt(q.value.data.label,B)}px`,height:"90px"}}))}},Q=()=>{q.value&&l(q.value.id,H=>({...H,data:{...H.data,description:q.value.data.description}}))},ae=H=>{q.value&&q.value.id===H&&l(H,B=>({...B,data:{...B.data,subject:{...q.value.data.subject}}}))},V=H=>R.value.filter(B=>B.parentNode===H&&B.type==="trigger"),Z=H=>{var X;const B=as(),P=V(H),p=` ${P.length+1}`,m=Vt(p);let _=10;P.forEach((W,ue)=>{const he=Vt(W.data.label);l(W.id,ve=>({...ve,position:{x:_,y:Qt}})),_+=he+Tn});const y=E.value.find(W=>W.id===H),I={id:B,type:"trigger",parentNode:H,position:{x:_,y:Qt},data:{label:p,toolbarPosition:se.Right,parentSubject:(X=y==null?void 0:y.data)!=null&&X.subject?{...y.data.subject}:null},extent:"parent",expandParent:!0,draggable:!1,style:{width:`${m}px`}};i([I]);const ee=[...P.map(W=>W.data.label),p];l(H,W=>{var ue;return{...W,style:{width:`${Jt((ue=y==null?void 0:y.data)==null?void 0:ue.label,ee)}px`,height:"90px"}}})},te=H=>{var P;const B=R.value.find(J=>J.id===H);if(B&&B.parentNode){const J=Y.value.filter(X=>X.source===H||X.target===H);b(J.map(X=>X.id)),u([H]);const p=B.parentNode,m=V(p).filter(X=>X.id!==H),_=R.value.find(X=>X.id===p),y=((P=_==null?void 0:_.data)==null?void 0:P.label)||"";let I=10;m.forEach((X,W)=>{const ue=Vt(X.data.label);l(X.id,he=>({...he,position:{x:I,y:Qt}})),I+=ue+Tn});const ee=m.map(X=>X.data.label);l(p,X=>({...X,style:{width:`${Jt(y,ee)}px`,height:"90px"}}))}},ce=H=>{const B=R.value.find(p=>p.id===H);if(!B)return;const P=[H];if(B.type==="action"){const p=R.value.filter(m=>m.parentNode===H);P.push(...p.map(m=>m.id))}const J=Y.value.filter(p=>P.includes(p.source)||P.includes(p.target));b(J.map(p=>p.id)),u(P),q.value=null},fe=H=>{const B=R.value.find(I=>I.id===H);if(B){const I=Vt(B.data.label);l(H,ee=>({...ee,data:{...ee.data,label:B.data.label},style:{...ee.style,width:`${I}px`}}))}const P=B.parentNode,J=V(P);let p=10;J.forEach(I=>{const ee=Vt(I.data.label);l(I.id,X=>({...X,position:{x:p,y:Qt}})),p+=ee+Tn});const m=E.value.find(I=>I.id===P),_=J.map(I=>I.data.label),y=Jt(m.data.label,_);l(P,I=>({...I,style:{...I.style,width:`${y}px`}}))};function de(){U.value=!U.value}return(H,B)=>(L(),K("div",D1,[G.value?ge("",!0):(L(),K("div",I1,[re("button",{class:"flex items-center justify-center p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600",title:"Toggle Actions",onClick:j},[le(oi,{name:"plus",class:"w-6 h-6"})])])),G.value?(L(),Ce(P0,{key:1,"node-types":z(er),onDragStart:z($),class:"border-r border-gray-200 bg-white dark:bg-gray-800"},null,8,["node-types","onDragStart"])):ge("",!0),re("div",{class:"flex-1",onDrop:f,onDragover:B[2]||(B[2]=(...P)=>z(D)&&z(D)(...P)),onDragleave:B[3]||(B[3]=(...P)=>z(w)&&z(w)(...P))},[le(z(dg),{nodes:R.value,"onUpdate:nodes":B[0]||(B[0]=P=>R.value=P),edges:Y.value,"onUpdate:edges":B[1]||(B[1]=P=>Y.value=P),onNodeDragStop:v,onPaneReady:T,onNodeClick:M,onPaneClick:N,"fit-view-on-init":"","elevate-edges-on-select":"",class:Ee([{dark:U.value},"khan-workflow"])},{"node-start":pe(P=>{var J;return[le(d1,nt(P,{selected:((J=q.value)==null?void 0:J.id)===P.id,onDeleteNode:ce}),null,16,["selected"])]}),"node-end":pe(P=>{var J;return[le(g1,nt(P,{selected:((J=q.value)==null?void 0:J.id)===P.id,onDeleteNode:ce}),null,16,["selected"])]}),"node-action":pe(P=>{var J;return[le(m1,nt(P,{onAddTrigger:Z,onDeleteTrigger:te,selected:((J=q.value)==null?void 0:J.id)===P.id,onDeleteNode:ce}),null,16,["selected"])]}),"node-trigger":pe(P=>{var J;return[le(y1,nt(P,{"parent-node":P.parentNode,selected:((J=q.value)==null?void 0:J.id)===P.id,onDeleteNode:te}),null,16,["parent-node","selected"])]}),default:pe(()=>[le(a1,{"is-drag-over":z(k)},null,8,["is-drag-over"]),le(z(jm)),le(z(N0),{position:"top-left"},{default:pe(()=>[le(z(cn),{title:"Toggle Dark Mode",onClick:de},{default:pe(()=>[U.value?(L(),Ce(oi,{key:0,name:"sun"})):(L(),Ce(oi,{key:1,name:"moon"}))]),_:1})]),_:1})]),_:1},8,["nodes","edges","class"])],32),q.value?(L(),Ce(W0,{key:2,"selected-node":q.value,"get-trigger-nodes":V,onUpdateNodeLabel:O,onUpdateNodeDescription:Q,onUpdateTriggerNode:fe,onAddTrigger:Z,onUpdateSubject:ae,onDeleteTrigger:te,onDeleteNode:ce},null,8,["selected-node"])):ge("",!0)]))}};export{O1 as _};
