import{m as w,c as S,K as g}from"./mixin.5459f8a5.js";import{a as E}from"./entry.7857a8b1.js";import{U as n,Y as r,Z as d,c as a,a4 as C,_ as s,aa as l,a8 as y,a7 as p,a6 as R,F as k,aj as I,ak as U}from"./vue.9a5b07a3.js";import"./cryptoJs.12d0d048.js";import"./ant.9c0b679d.js";import"./common.a3ab4f3b.js";import"./moment.8b5e7d95.js";import"./ag.16cfe0bb.js";import"./lodash.2101602c.js";import"./numeral.08866ac3.js";const L={inheritAttrs:!1,name:"Canvas",mixins:[w],data(){return{form_width:800,openSlidePanel:!1,exportLoading:!1,isResizing:!1,m_pos:0}},components:{common:S,Krudtools:g},methods:{hideSide(){this.openSlidePanel=!1,this.editMode=!1,this.$refs.panel.style.width="0px",this.$refs.panel.style.flex="0 0 0px"},openSide(){if(!this.openSlidePanel){this.openSlidePanel=!0;let e=(window.innerWidth-300)/100,o=parseInt(e*40);this.$refs.panel.style.width=o+"px",this.$refs.panel.style.flex=`0 0 ${o+"px"}`}},resize(e){window.getSelection().removeAllRanges();const o=this.m_pos-e.x;this.m_pos=e.x,this.$refs.panel.style.width=parseInt(getComputedStyle(this.$refs.panel,"").width)+o+"px",this.$refs.panel.style.flex=`0 0 ${parseInt(getComputedStyle(this.$refs.panel,"").width)+o+"px"}`},handleResize(){this.$refs.panel.addEventListener("mousedown",o=>{o.offsetX<4&&(this.m_pos=o.x,document.addEventListener("mousemove",this.resize,!1))},!1),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",this.resize,!1)},!1)},templateEdit(){this.openSide()},templateOnSuccess(){this.hideSide()}},mounted(){this.handleResize()}},c=e=>(I("data-v-d5e90905"),e=e(),U(),e),P={class:"krud-drawer"},$={class:"offcanvas-template"},b={class:"crud-page"},z={class:"crud-page-body"},M={id:"drawer-container"},B={id:"left_panel"},D=c(()=>s("div",{class:"resizer"},null,-1)),A={class:"ant-drawer-content-wrapper"},V={class:"ant-drawer-content"},K={class:"ant-drawer-wrapper-body"},N={class:"ant-drawer-header"},O={key:0,class:"ant-drawer-header-title"},Z={class:"ant-drawer-title"},F=c(()=>s("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[s("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[s("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1)),Q=[F],j={class:"ant-drawer-body"};function q(e,o,x,H,i,t){const m=n("common"),h=n("Krudtools"),u=n("portal"),f=n("datagrid"),_=n("dataform");return r(),d(k,null,[a(m,{parent:e.parent,title:e.title,addAction:t.openSide,permissions:e.permissions},null,8,["parent","title","addAction","permissions"]),a(u,{to:"header-right"},{default:C(()=>[a(h,{search:e.search,refresh:e.refresh,exportExcel:e.exportExcel,exportLoading:i.exportLoading,print:e.print,save:e.save,isPrint:e.isPrint,isExcel:e.isExcel,isExcelUpload:e.isExcelUpload,excelUploadCustomUrl:e.excelUploadCustomUrl,excelUploadMethod:e.excelUploadMethod,isRefresh:e.isRefresh,isSave:e.isSave},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),s("div",P,[s("section",$,[s("div",b,[s("div",z,[s("div",M,[s("div",B,[s("div",{class:l(i.openSlidePanel?"dg-flex open-drawer":"dg-flex")},[e.permissions&&e.permissions.r?(r(),y(f,{key:0,ref:"grid",url:e.url,schemaID:e.grid,paginate:50,fnClone:e.clone,fnEdit:e.edit,fnQuickEdit:e.quickEdit,fnView:e.view,actions:e.$props.actions,dblClick:e.$props.dbClickAction,onRowSelect:e.$props.onRowSelect,permissions:e.permissions,page_id:e.page_id,custom_condition:e.$props.custom_condition?e.$props.custom_condition:null,user_condition:e.user_condition?e.user_condition.gridCondition:null},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition"])):p("",!0)],2)]),s("div",{id:"right_panel",class:l(["ant-drawer",i.openSlidePanel?"show-panel":"hide-panel"]),ref:"panel"},[D,s("div",A,[s("div",V,[s("div",K,[s("div",N,[i.openSlidePanel?(r(),d("div",O,[s("div",Z,R(e.title),1),s("button",{"aria-label":"Close",onClick:o[0]||(o[0]=(...v)=>t.hideSide&&t.hideSide(...v)),class:"ant-drawer-close"},Q)])):p("",!0)]),s("div",j,[a(_,{ref:"form",hideTitle:!0,schemaID:e.form,title:e.title,url:e.url,editMode:e.editMode,onSuccess:e.onSuccess,onReady:e.onReady,do_render:i.openSlidePanel,permissions:e.permissions,page_id:e.page_id,user_condition:e.user_condition?e.user_condition.formCondition:null,onError:e.onError,close:t.hideSide},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError","close"])])])])])],2)])])])])])],64)}const ne=E(L,[["render",q],["__scopeId","data-v-d5e90905"]]);export{ne as default};
