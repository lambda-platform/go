import{_ as oe,aX as te}from"./Dp5pR5g4.js";import{u as ie,_ as ne}from"./C-OLPXjV.js";import{K as se,c as re}from"./C3fYg2Lc.js";import{c as a,I as ae,o as f,q as l,x as C,z as c,u as e,A as de,y as t,O as h,B as b,C as p,D as le,F as ce,G as ue,H as me}from"./Bb3cLOD_.js";import"./DTdGTy9U.js";import"./BYTvHWBW.js";import"./CU0CZyNU.js";import"./BscJb5-W.js";import"./CByKS65z.js";const E=o=>(ue("data-v-fbd3dfb5"),o=o(),me(),o),fe={class:"krud-drawer"},he={class:"offcanvas-template"},pe={class:"crud-page"},ge={class:"crud-page-body"},ve={id:"drawer-container"},we={id:"left_panel"},_e=E(()=>t("div",{class:"resizer"},null,-1)),Se={class:"ant-drawer-content-wrapper"},xe={class:"ant-drawer-content"},Ce={class:"ant-drawer-wrapper-body"},be={class:"ant-drawer-header"},Ee={key:0,class:"ant-drawer-header-title flex p-4 border-b"},ye={class:"ant-drawer-title flex-grow"},Ie=E(()=>t("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[t("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[t("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1)),Re=[Ie],De={class:"ant-drawer-body"},ke={__name:"drawer",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(o){const{t:y}=te(),g=o,v=a(null),w=a(null),n=a(!1),r=a(!1),u=a(0);function m(){r.value=!1,d.value=!1,n.value.style.width="0px",n.value.style.flex="0 0 0px"}function _(){if(!r.value){r.value=!0;let i=(window.innerWidth-300)/100,s=parseInt(i*40);n.value.style.width=s+"px",n.value.style.flex=`0 0 ${s}px`}}function I(){_()}function R(){m()}function D(){}const{closeByBtn:Ue,gridSrc:Le,formSrc:Be,editMode:d,searchModel:Ne,form_width:Fe,exportLoading:k,isPrint:U,isExcel:L,isRefresh:B,isSave:N,rowId:F,cloneID:Me,visibleDataForm:Oe,isExcelUpload:M,excelUploadCustomUrl:O,showID:$e,hasVNavSlot:ze,hasNavSlot:Ae,hasLeftSlot:Pe,url:S,lang:Ve,view:$,edit:z,clone:A,quickEdit:P,refresh:V,search:j,stopLoading:je,exportExcel:K,print:H,excelUploadMethod:T,save:G,onReady:q,onSuccess:Q,onError:X,mediaRecorder:Ke,recordedChunks:He,showScreenRecordConfirm:Te,startRecording:Ge,stopRecording:qe,changeKrudTool:Z}=ie(g,v,w,I,R,D,y,g.CRUD_ID);function x(i){window.getSelection().removeAllRanges();const s=u.value-i.x;u.value=i.x,n.value.style.width=parseInt(getComputedStyle(n.value,"").width)+s+"px",n.value.style.flex=`0 0 ${parseInt(getComputedStyle(n.value,"").width)+s}px`}function W(){n.value.addEventListener("mousedown",s=>{s.offsetX<4&&(u.value=s.x,document.addEventListener("mousemove",x,!1))},!1),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",x,!1)},!1)}return ae(()=>{W()}),(i,s)=>{const J=f("portal"),Y=f("datagrid"),ee=f("dataform");return l(),C(ce,null,[c(e(ne),{parent:o.parent,title:o.title,addAction:_,permissions:o.permissions,CRUD_ID:o.CRUD_ID},null,8,["parent","title","permissions","CRUD_ID"]),c(J,{to:"header-right"},{default:de(()=>[c(e(se),{search:e(j),refresh:e(V),exportExcel:e(K),exportLoading:e(k),print:e(H),save:e(G),isPrint:e(U),isExcel:e(L),isExcelUpload:e(M),excelUploadCustomUrl:e(O),excelUploadMethod:e(T),isRefresh:e(B),isSave:e(N)},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1}),t("div",fe,[t("section",he,[t("div",pe,[t("div",ge,[t("div",ve,[t("div",we,[t("div",{class:h(r.value?"dg-flex open-drawer":"dg-flex")},[o.permissions&&o.permissions.r?(l(),b(Y,{key:0,ref_key:"dataGrid",ref:w,url:e(S),schemaID:o.grid,paginate:50,fnClone:e(A),fnEdit:e(z),fnQuickEdit:e(P),fnView:e($),actions:i.$props.actions,dblClick:i.$props.dbClickAction,onRowSelect:i.$props.onRowSelect,permissions:o.permissions,page_id:o.page_id,custom_condition:i.$props.custom_condition?i.$props.custom_condition:null,user_condition:o.user_condition?o.user_condition.gridCondition:null,changeKrudTool:e(Z)},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition","changeKrudTool"])):p("",!0)],2)]),t("div",{id:"right_panel",class:h(["ant-drawer",r.value?"show-panel":"hide-panel"]),ref_key:"panel",ref:n},[_e,t("div",Se,[t("div",xe,[t("div",Ce,[t("div",be,[r.value?(l(),C("div",Ee,[t("div",ye,le(o.title),1),t("button",{"aria-label":"Close",onClick:m,class:"ant-drawer-close"},Re)])):p("",!0)]),t("div",De,[t("div",{class:h(o.withCrudLog&&e(d)?"with-crud-log":"crud-form")},[c(ee,{ref_key:"dataForm",ref:v,hideTitle:!0,schemaID:o.form,title:o.title,url:e(S),editMode:e(d),onSuccess:e(Q),onReady:e(q),do_render:r.value,permissions:o.permissions,page_id:o.page_id,user_condition:o.user_condition?o.user_condition.formCondition:null,onError:e(X),close:m},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError"]),o.withCrudLog&&e(d)?(l(),b(e(re),{key:0,form:o.form,rowId:e(F),grid:o.grid},null,8,["form","rowId","grid"])):p("",!0)],2)])])])])],2)])])])])])],64)}}},io=oe(ke,[["__scopeId","data-v-fbd3dfb5"]]);export{io as default};
