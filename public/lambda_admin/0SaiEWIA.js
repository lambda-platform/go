import{aV as ee,a as te,aZ as re}from"./3ncfVO38.js";import{u as oe,_ as ie}from"./Bv4EkHaP.js";import{K as ae,c as ne}from"./Cv2D29o5.js";import{j as g,p as se,v as le,R as de,D as v,E as w,F as d,H as y,J as S,L as u,G as a,u as e,I as ce,N as ue,V as R}from"./DXHvmmg6.js";import"./BYTvHWBW.js";import"./CYxtEuKL.js";import"./B4FiMg9Z.js";import"./CByKS65z.js";const me={class:"card drawer-wrappper window-crud"},he={class:"offcanvas-template"},pe={class:"crud-page"},fe={class:"crud-page-body"},ge={key:0,class:"ant-drawer"},ve={class:"ant-drawer-content"},we={class:"ant-drawer-wrapper-body"},ye={class:"ant-drawer-header"},Se={class:"ant-drawer-header-title flex p-4 border-b"},Ce={class:"ant-drawer-title flex-grow"},_e={class:"ant-drawer-body"},be={key:1,id:"drawer-container"},Le={__name:"window",props:{title:String,icon:String,main_tab_title:String,grid:Number,form:Number,projects_id:Number,hideHeader:Boolean,hasSelection:Boolean,actions:String,dbClickAction:Function,onRowSelect:Function,rowCurrentChange:Function,permissions:Object,user_condition:Object,custom_condition:Object,view_url:String,mode:String,onPropertySuccess:Function,onPropertyError:Function,page_id:String,withoutHeader:Boolean,withCrudLog:Boolean,base_url:String,form_width:[Number,String],edit_id:[Number,String],CRUD_ID:[Number,String],template:String,parent:Object},setup(t){const{t:D}=ee(),C=t,_=g(null),b=g(null),n=g(!1),l=te(),o=re();function U(){}const I=se(()=>o.fullPath),f=()=>{n.value=!1,s.value=!1,l.push({query:m()})},L=()=>{let r=m();r.add=!0,l.push({query:r}),n.value=!0},x=r=>{let i=m();i.edit=!0,i.id=r,o.params.id&&o.query.edit?o.params.id.toString()!==r.toString()&&l.push({query:i}):l.push({query:i})},B=r=>{let i=m();i.clone=!0,i.id=r,o.params.id&&o.query.edit?o.params.id.toString()!==r.toString()&&l.push({query:i}):l.push({query:i})},E=()=>{f()},q=()=>{let r=o.query.add,i=o.query.edit,p=o.query.clone,c=o.query.id;r==="true"||r===!0?n.value=!0:i==="true"||i===!0?(h.value=c,s.value=!0,n.value=!0):p==="true"||p===!0?(h.value=c,j.value=c,s.value=!0,n.value=!0):(h.value=0,s.value=!1,n.value=!1)},m=()=>{let r={};return o.query.sort&&(r.sort=o.query.sort),o.query.order&&(r.order=o.query.order),o.query.paginate&&(r.paginate=o.query.paginate),o.query.currentPage&&(r.currentPage=o.query.currentPage),r},{editMode:s,exportLoading:N,isPrint:P,isExcel:F,isRefresh:M,isSave:V,rowId:h,cloneID:j,isExcelUpload:O,excelUploadCustomUrl:$,url:k,view:K,quickEdit:A,refresh:H,search:T,exportExcel:G,print:Q,excelUploadMethod:z,save:J,onReady:Z,onError:W,changeKrudTool:X}=oe(C,_,b,x,E,U,D,C.CRUD_ID);return le(I,()=>{q()}),de(()=>{q()}),(r,i)=>{const p=v("portal"),c=v("dataform"),Y=v("datagrid");return d(),w("div",me,[y(e(ie),{parent:t.parent,title:t.title,addAction:L,"hide-action":n.value,permissions:t.permissions,CRUD_ID:t.CRUD_ID},null,8,["parent","title","hide-action","permissions","CRUD_ID"]),n.value?u("",!0):(d(),S(p,{key:0,to:"header-right"},{default:ce(()=>[y(e(ae),{search:e(T),refresh:e(H),exportExcel:e(G),exportLoading:e(N),print:e(Q),save:e(J),isPrint:e(P),isExcel:e(F),isExcelUpload:e(O),excelUploadCustomUrl:e($),excelUploadMethod:e(z),isRefresh:e(M),isSave:e(V),isSearch:!1},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1})),a("section",he,[a("div",pe,[a("div",fe,[n.value?(d(),w("div",ge,[a("div",ve,[a("div",we,[a("div",ye,[a("div",Se,[a("div",Ce,ue(t.title),1),a("button",{"aria-label":"Close",onClick:f,class:"ant-drawer-close"},i[0]||(i[0]=[a("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[a("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[a("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1)]))])]),a("div",_e,[a("div",{class:R(t.withCrudLog&&e(s)?"with-crud-log":"crud-form")},[y(c,{ref_key:"dataForm",ref:_,hideTitle:!0,schemaID:t.form,title:t.title,url:e(k),editMode:e(s),onSuccess:E,onReady:e(Z),do_render:n.value,permissions:t.permissions,page_id:t.page_id,user_condition:t.user_condition?t.user_condition.formCondition:null,onError:e(W),close:f,changeKrudTool:e(X)},null,8,["schemaID","title","url","editMode","onReady","do_render","permissions","page_id","user_condition","onError","changeKrudTool"]),t.withCrudLog&&e(s)?(d(),S(e(ne),{key:0,form:t.form,rowId:e(h),grid:t.grid},null,8,["form","rowId","grid"])):u("",!0)],2)])])])])):u("",!0),n.value?u("",!0):(d(),w("div",be,[a("div",{class:R(n.value?"dg-flex open-drawer":"dg-flex")},[t.permissions&&t.permissions.r?(d(),S(Y,{key:0,ref_key:"dataGrid",ref:b,url:e(k),schemaID:t.grid,paginate:50,fnClone:B,fnEdit:x,fnQuickEdit:e(A),fnView:e(K),actions:r.$props.actions,dblClick:r.$props.dbClickAction,onRowSelect:r.$props.onRowSelect,permissions:t.permissions,page_id:t.page_id,custom_condition:r.$props.custom_condition?r.$props.custom_condition:null,user_condition:t.user_condition?t.user_condition.gridCondition:null},null,8,["url","schemaID","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition"])):u("",!0)],2)]))])])])])}}};export{Le as default};
