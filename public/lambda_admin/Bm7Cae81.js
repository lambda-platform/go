import{_ as S}from"./BuMMHCAU.js";import{_ as M,h as m}from"./BNUQ0oDs.js";import{o as i,q as d,x as u,y as e,D as r,z as l,A as a,E as x,C as g}from"./Bb3cLOD_.js";import"./DTdGTy9U.js";import"./BYTvHWBW.js";import"./CU0CZyNU.js";const C={props:["lambda","onSuccess","selectedLang","onError"],name:"aside-login",data(){return{loading:!1,isSuccess:!1,isError:!1,errorMessage:null,rememberMe:!1,credentials:{login:null,password:null}}},computed:{lang(){const t=["loginTitle","username","password","remember","login","forgot","loginSuccess","loginError"];return t.reduce((n,c,h)=>(n[c]=this.$t("user."+t[h]),n),{})}},methods:{onSubmit(){this.isSuccess=!1,this.isError=!1,this.loading||(this.loading=!0,m.defaults.headers.common.Authorization="",m.defaults.withCredentials=!0,m.post("/auth/login",this.credentials).then(({data:t})=>{t.status?this.onSuccess(t):(this.isError=!0,this.loading=!1),this.errorMessage=null}).catch(t=>{this.loading=!1,this.isError=!0,this.onError&&this.onError(),t.response&&t.response.data.error&&(this.errorMessage=t.response.data.error)}))}}},N={class:"form-content"},T={key:0,class:"logo with-text"},U=["src"],V={key:1,class:"logo"},q=["src"],B={class:"space-y-6"},L={class:"loginInput"},z={class:"pb-2 text-slate-700"},A={class:"svg-icon"},D={class:"pb-2 text-slate-700"},G={class:"svg-icon"},I={class:"flex flex-row justify-between space-x-4"},j={class:"text-slate-700"},F={class:""},H={id:"msg"},J={key:0,class:"success"},K={key:1,class:"error"},O={key:2,class:"error"};function P(t,n,c,h,s,o){const p=i("inline-svg"),v=i("a-input"),f=i("a-form-item"),b=i("a-input-password"),w=i("a-checkbox"),k=S,y=i("a-button"),E=i("a-form");return d(),u("div",N,[c.lambda.logoText!=""?(d(),u("div",T,[e("img",{src:c.lambda.logo,alt:""},null,8,U),e("span",null,r(c.lambda.logoText),1)])):(d(),u("div",V,[e("img",{src:c.lambda.logo,alt:""},null,8,q)])),e("h2",null,r(o.lang.loginTitle),1),l(E,{class:"mx-auto",model:s.credentials,layout:"vertical",autocomplete:"off"},{default:a(()=>[e("div",B,[e("div",L,[l(f,{name:"login",rules:[{required:!0,message:o.lang.username}]},{default:a(()=>[e("div",z,r(o.lang.username),1),l(v,{type:"text",placeholder:o.lang.username,value:s.credentials.login,"onUpdate:value":n[0]||(n[0]=_=>s.credentials.login=_)},{prefix:a(()=>[e("span",A,[l(p,{class:"w-4 h-4 mr-1",src:"/assets/icons/duotone/General/User.svg"})])]),_:1},8,["placeholder","value"])]),_:1},8,["rules"]),l(f,{name:"password",rules:[{required:!0,message:o.lang.password}]},{default:a(()=>[e("div",D,r(o.lang.password),1),l(b,{placeholder:o.lang.password,value:s.credentials.password,"onUpdate:value":n[1]||(n[1]=_=>s.credentials.password=_)},{prefix:a(()=>[e("span",G,[l(p,{class:"w-4 h-4 mr-1",src:"/assets/icons/duotone/General/Lock.svg"})])]),_:1},8,["placeholder","value"])]),_:1},8,["rules"]),e("div",I,[l(w,{checked:s.rememberMe,"onUpdate:checked":n[2]||(n[2]=_=>s.rememberMe=_),id:"remember_me"},{default:a(()=>[e("span",j,r(o.lang.remember),1)]),_:1},8,["checked"]),l(k,{class:"forgot",to:"/auth/forgot"},{default:a(()=>[x(r(o.lang.forgot),1)]),_:1})])]),e("div",F,[l(y,{type:"primary",class:"w-full",loading:s.loading,style:{"border-radius":"8px",height:"38px"},onClick:o.onSubmit,"html-type":"submit"},{default:a(()=>[x(r(o.lang.login),1)]),_:1},8,["loading","onClick"])]),e("div",H,[s.isSuccess?(d(),u("span",J,r(o.lang.loginSuccess),1)):g("",!0),s.isError?(d(),u("span",K,r(o.lang.loginError),1)):g("",!0),s.errorMessage&&s.errorMessage!=="Нэвтрэх нэр эсвэл нууц үг буруу байна"?(d(),u("p",O,r(s.errorMessage),1)):g("",!0)])])]),_:1},8,["model"])])}const $=M(C,[["render",P]]);export{$ as default};
