"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2193],{25028:(e,t,l)=>{l.r(t),l.d(t,{default:()=>o});var i=l(20494);const s={props:["model","rule","label","meta","disabled","relation_data","do_render"],computed:{lang(){const e=["dataNotFound","all"];return e.reduce(((t,l,i)=>(t[l]=this.$t("dataForm."+e[i]),t)),{})},options(){return this.checkedItemsCount=0,(0,i.fn)(this.meta)&&(0,i.fn)(this.meta.options)&&this.meta.options.length>=1?this.searchval?this.filterOption(this.meta.options).filter((e=>e.label.toLowerCase().includes(this.searchval.toLowerCase()))):this.filterOption(this.meta.options):this.searchval?this.filterOption(this.relation_data).filter((e=>e.label.toLowerCase().includes(this.searchval.toLowerCase()))):this.filterOption(this.relation_data)}},data:()=>({value:null,addAble:!1,searchval:null,indeterminate:!0,checkAll:!1,checkAllGroup:null,checkedItemsCount:0}),watch:{do_render(e){if(null==e)this.value=null,Vue.set(this.model.form,this.model.component,this.meta.default?this.meta.default:void 0);else if(null!=this.model.form[this.model.component]&&null!=this.model.form[this.model.component]){let e=this.model.form[this.model.component];if(1==this.meta.relation.multiple){let t=e.toString().split(",");this.value=this.options.filter((e=>t.includes(e.value.toString())))}else{let t=this.options.filter((t=>t.value==e));this.value=t.length>=1?t[0]:null}}},value(e){if(e){Vue.set(this.model.form,this.model.component,e.map((e=>e.value)).join(","));let t=[];e.forEach((e=>{let l=e.label;t.push(l)})),this.checkAllGroup=t,this.checkedItemsCount=t.length}}},created(){this.meta.relation.addAble&&this.meta.relation.addFrom&&(this.addAble=!0)},methods:{isValid:i.fn,filterOption(e){if(e){if(this.$props.meta.relation.parentFieldOfForm||null!=this.$props.model.form[this.$props.meta.relation.parentFieldOfForm]){let t=e.filter((e=>e.parent_value==this.$props.model.form[this.$props.meta.relation.parentFieldOfForm]));return this.initialValue(t),t}return e||[]}return[]},initialValue(e){if(null!=this.model.form[this.model.component]||""!=this.model.form[this.model.component]||null!=this.model.form[this.model.component])if(1==this.meta.relation.multiple&&null!=this.model.form[this.model.component]){let t=this.model.form[this.model.component].toString().split(","),l=e.filter((e=>t.includes(e.value.toString())));l.length>=1&&(this.value=l)}else{let t=e.filter((e=>e.value==this.model.form[this.model.component]));this.value=t.length>=1?t[0]:null}else this.value=null},onSuccess(e){let t=[];e.forEach((e=>{let l=this.options.filter((t=>t.label===e));t.push(l[0].value)}));let l=t.join(",");this.model.form[this.model.component]=l},handleCheckAll(){if(this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll){let e=[];this.options.forEach((t=>{let l=t.label;e.push(l)})),this.checkAllGroup=e}else this.checkAllGroup=[];this.checkedItemsCount=this.checkAllGroup.length,this.onSuccess(this.checkAllGroup)},checkAllGroupChange(e){this.checkedItemsCount=0,this.checkedItemsCount=e.length,e.length===this.options.length?(this.indeterminate=!1,this.checkAll=!0):e.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1),this.onSuccess(e)}}};const o=(0,l(14486).A)(s,(function(){var e=this,t=e._self._c;return t("FormItem",{staticClass:"select-item",attrs:{label:e.label,prop:e.rule}},[t("div",{staticClass:"multi-checkbox"},[t("div",{staticClass:"checkbox-header"},[t("Checkbox",{attrs:{disabled:!(!e.meta||!e.meta.disabled)&&e.meta.disabled,indeterminate:e.indeterminate,value:e.checkAll},nativeOn:{click:function(t){return t.preventDefault(),e.handleCheckAll.apply(null,arguments)}}},[e._v(e._s(e.lang.all)+" /"+e._s(e.checkedItemsCount)+"/")])],1),e._v(" "),t("CheckboxGroup",{on:{"on-change":e.checkAllGroupChange},model:{value:e.checkAllGroup,callback:function(t){e.checkAllGroup=t},expression:"checkAllGroup"}},e._l(e.options,(function(l){return t("Checkbox",{key:l.index,attrs:{label:l.label,disabled:!(!e.meta||!e.meta.disabled)&&e.meta.disabled}})})),1)],1)])}),[],!1,null,null,null).exports}}]);