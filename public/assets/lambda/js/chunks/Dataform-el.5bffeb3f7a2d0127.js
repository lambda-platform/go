/*! For license information please see Dataform-el.5bffeb3f7a2d0127.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[4517],{34078:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=34078,e.exports=t},83110:(e,t,n)=>{"use strict";n.d(t,{ND:()=>s,ZF:()=>o});var r=[{element:"Text",component:function(){return n.e(6090).then(n.bind(n,75843))}},{element:"Select",component:function(){return n.e(3239).then(n.bind(n,42126))}},{element:"Number",component:function(){return n.e(4032).then(n.bind(n,70897))}},{element:"Date",component:function(){return n.e(2236).then(n.bind(n,42236))}},{element:"DateTime",component:function(){return n.e(4870).then(n.bind(n,54870))}},{element:"Textarea",component:function(){return n.e(6881).then(n.bind(n,73892))}},{element:"Checkbox",component:function(){return n.e(5688).then(n.bind(n,37759))}},{element:"CheckboxMulti",component:function(){return n.e(2193).then(n.bind(n,29119))}},{element:"CheckboxSmall",component:function(){return n.e(5688).then(n.bind(n,50998))}},{element:"Image",component:function(){return n.e(286).then(n.bind(n,14039))}},{element:"ImageSubform",component:function(){return n.e(1242).then(n.bind(n,29712))}},{element:"File",component:function(){return n.e(601).then(n.bind(n,21490))}},{element:"FileSubform",component:function(){return n.e(1242).then(n.bind(n,29712))}},{element:"Radio",component:function(){return n.e(4332).then(n.bind(n,58673))}},{element:"subform/Grid",component:function(){return n.e(7775).then(n.bind(n,12475))}},{element:"subform/Form",component:function(){return n.e(8714).then(n.bind(n,14193))}},{element:"ImageDrag",component:function(){return n.e(8348).then(n.bind(n,63428))}},{element:"Divider",component:function(){return n.e(4514).then(n.bind(n,2062))}},{element:"CK",component:function(){return n.e(5569).then(n.bind(n,19992))}},{element:"CkOld",component:function(){return n.e(5569).then(n.bind(n,51154))}},{element:"CkOldPhp7",component:function(){return n.e(5569).then(n.bind(n,97490))}},{element:"Password",component:function(){return n.e(7160).then(n.bind(n,57893))}},{element:"Money",component:function(){return n.e(1613).then(n.bind(n,64989))}},{element:"ColorPicker",component:function(){return n.e(9470).then(n.bind(n,1184))}},{element:"Email",component:function(){return n.e(7685).then(n.bind(n,85982))}},{element:"TreeSelect",component:function(){return n.e(5623).then(n.bind(n,62116))}},{element:"Download",component:function(){return n.e(3323).then(n.bind(n,30697))}},{element:"Geographic",component:function(){return Promise.all([n.e(6597),n.e(5290)]).then(n.bind(n,18414))}},{element:"Hidden",component:function(){return n.e(779).then(n.bind(n,94018))}},{element:"Map",component:function(){return n.e(1904).then(n.bind(n,61904))}},{element:"MoneyWithoutCurrency",component:function(){return n.e(1613).then(n.bind(n,44718))}},{element:"NumberGenerate",component:function(){return n.e(5629).then(n.bind(n,3295))}},{element:"PasswordGenerate",component:function(){return n.e(5269).then(n.bind(n,70756))}},{element:"RadioWithThumb",component:function(){return n.e(4332).then(n.bind(n,62650))}},{element:"RadioWithTextInput",component:function(){return n.e(2635).then(n.bind(n,94780))}},{element:"Register",component:function(){return n.e(1341).then(n.bind(n,91341))}},{element:"ISelect",component:function(){return Promise.all([n.e(6597),n.e(8740)]).then(n.bind(n,10598))}},{element:"Search",component:function(){return n.e(6459).then(n.bind(n,75653))}},{element:"Switch",component:function(){return n.e(8819).then(n.bind(n,45437))}},{element:"Time",component:function(){return n.e(92).then(n.bind(n,88492))}},{element:"QGis",component:function(){return n.e(1427).then(n.bind(n,18485))}},{element:"HTML",component:function(){return n.e(6e3).then(n.bind(n,95806))}},{element:"JsonEditor",component:function(){return n.e(209).then(n.bind(n,77422))}},{element:"AdminMenu",component:function(){return n.e(209).then(n.bind(n,15599))}},{element:"GridSelector",component:function(){return n.e(4784).then(n.bind(n,39986))}},{element:"FooterButton",component:function(){return n.e(8574).then(n.bind(n,97496))}},{element:"TimeMask",component:function(){return n.e(860).then(n.bind(n,72453))}},{element:"TextHidden",component:function(){return n.e(860).then(n.bind(n,26195))}},{element:"Label",component:function(){return n.e(7431).then(n.bind(n,76861))}},{element:"TextareaByte",component:function(){return n.e(7431).then(n.bind(n,73892))}},{element:"CKByte",component:function(){return n.e(5569).then(n.bind(n,19992))}}],o=r.map((function(e){return e.element})),i=function(){return n.e(9549).then(n.bind(n,82285))},a=function(){return n.e(4482).then(n.bind(n,2316))},s=function(e){if(null!=e){var t=r.findIndex((function(t){return t.element==e}));if(t>=0)return r[t].component}return function(e){if(!window.init.data_form_custom_elements)return i;if(!window.init.data_form_custom_elements.find((function(t){return t.element==e})))return i;try{return n(34078)("./".concat(e,".vue")).default}catch(e){return console.log(e),a}}(e)}},19670:(e,t,n)=>{"use strict";n.d(t,{RQ:()=>s,aO:()=>l,iS:()=>a,rF:()=>f});var r=null,o=null,i=null,a=function(e){r=e},s=function(e,t){i=t,o=e},l=[{type:"required",msg:"Талбарыг бөглөнө үү!"},{type:"email",msg:"Имэйл хаягаа зөв оруулна уу!"},{type:"number",msg:"Тоон утга оруулна уу!"},{type:"numeric",msg:"Тоон утга оруулна уу!"},{type:"register",msg:"Регистрийн дугаар!"},{type:"mongolianMobileNumber",msg:"8 оронтой утасны дугаар оруулна уу!"},{type:"englishAlphabet",msg:"Зөвхөн латин үсэг оруулна уу!"},{type:"mongolianCyrillic",msg:"Зөвхөн кирилл үсэг оруулна уу!"},{type:"unique",msg:"Давхацсан утга оруулсан байна!"},{type:"lambda-account",msg:"Давхацсан утга оруулсан байна!"}],c=function(e,t,n){t.match(/^[a-zA-Z!@#\$%\^\&*\s*)\(+=._-]+$/)?n():n(new Error("Зөвхөн латин үсэг оруулна уу"))},u=function(e,t,n){t.match(/^[а-яөүёА-ЯӨҮЁ0-9!@#\$%\^\&*\s*)\(+=._-]+$/)?n():n(new Error("Зөвхөн кирилл үсэг оруулна уу!"))},d=function(e,t,n){t.toString().match(/^[0-9]{8}$/)?n():n(new Error("8 оронтой утасны дугаар оруулна уу!"))},m=function(e,t,n){t.toString().substring(0,2).match(/^[а-яөүёА-ЯӨҮЁ0-9!@#\$%\^\&*\s*)\(+=._-]+$/)&&t.toString().substring(2,10).match(/^[0-9]{8}$/)?n():n(new Error("Регистрээ зөв оруулна уу!"))},f=function(e,t){switch(t||(t=""),e.type){case"required":return{required:!0,message:e.msg};case"array":return{type:"array",required:e.required,message:e.message};case"min":return{type:"string",min:parseInt(e.val,10),message:e.msg};case"max":return{type:"string",max:parseInt(e.val,10),message:e.msg};case"email":return{type:"email",trigger:"blur",message:e.msg};case"number":return{type:"number",message:e.msg};case"mongolianMobileNumber":return{validator:d,trigger:"blur"};case"unique":return{validator:function(e,n,a){return function(e,t,n,a){axios.post("".concat(a,"/lambda/krud/unique"),{table:r,identityColumn:o,identity:i,field:e.field,val:t}).then((function(e){e.data.status?n():n(new Error(e.data.msg))}))}(e,n,a,t)},trigger:"blur"};case"lambda-account":return{validator:function(e,n,r){return function(e,t,n,r){axios.post("".concat(r,"/lambda/check"),{value:t}).then((function(e){e.data.status?n():n(new Error("'".concat(t," Давхацсан утга оруулсан байна!'")))}))}(0,n,r,t)},trigger:"blur"};case"englishAlphabet":return{validator:c,trigger:"blur",message:e.msg};case"mongolianCyrillic":return{validator:u,trigger:"blur"};case"check_current_password":return{validator:function(e,n,r){return function(e,t,n,r){axios.post("".concat(r,"/lambda/krud/check_current_password"),{password:t}).then((function(e){e.data.status?n():n(new Error(e.data.msg))}))}(0,n,r,t)},trigger:"blur"};case"register":return{validator:m,trigger:"blur"};default:return null}}},89407:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{EY:()=>c,QL:()=>d});var s=/\{ *([\w_-]+) *\}/g,l=null;function c(e,t,n,r,o,i){if(e.length>=1){var a=e.findIndex((function(e){return e.model==t}));a<=-1?e.map((function(e){e.template.includes(t)&&u(e,t,n,r,o,i)})):u(e[a],t,n,r,o,i)}}function u(e,t,n,r,o,i){var a,l,c=!1;if(e.form&&("main"==e.form||i&&e.form==i)&&(c=!0),c){var u=(a=e.template,l=n,a.replace(s,(function(e,t){var n=l[t];return void 0===n?"":("function"==typeof n&&(n=n(l)),n)})));if(u){var d=new Function("return "+u)();e.targets.map((function(e){var t=f(r,e.field);t>=0&&("value"==e.prop?n[e.field]=d:("hidden"==e.prop&&o&&o[e.field]&&o[e.field].length>0&&o[e.field][0].hasOwnProperty("required")&&(o[e.field][0].required=!d),Vue.set(r[t],e.prop,d)))}))}}}function d(e,t,n,r,o,a,s){if(t){var c=f(r,e);c>=0&&r[c].trigger&&(l&&clearTimeout(l),l=setTimeout((function(){!function(e,t,n,r,o,a){e.split(",").forEach((function(e){axios.post(e,{model:i({},t),editMode:a}).then((function(e){var i=e.data;i.schema&&i.schema.forEach((function(e){m(e,t,n,r)})),i.schema_sub&&i.schema_sub.forEach((function(e){e.schema.forEach((function(o){m(o,t,n,r,e.model)}))})),i.message&&("success"==i.message.type?o.success({duration:3,desc:i.message.message}):o.error({duration:3,desc:i.message.message})),i.info&&i.info.forEach((function(e){document.getElementById(e.target).innerHTML=e.html}))}))}))}(r[c].trigger,n,r,o,a,s)}),null!=r[c].triggerTimeout&&null!==r[c].triggerTimeout&&""!=r[c].triggerTimeout?r[c].triggerTimeout:0))}}function m(e,t,n,r,o){if(o){var i=f(n,o);if(i>=0){var a=f(n[i].schema,e.field);a>=0&&Object.keys(e.props).forEach((function(t){n[i].schema[a][t]=e.props[t]}))}}else{var s=f(n,e.field);if(s>=0){if("value"in e)Vue.set(t,e.field,e.value),"SubForm"==n[s].formType&&r["sf".concat(e.field)][0].fillData();e.props&&Object.keys(e.props).forEach((function(t){Vue.set(n[s],t,e.props[t])}))}}}function f(e,t){return e.findIndex((function(e){return e.model==t}))}},45705:(e,t,n)=>{"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Jx:()=>s,Ku:()=>a,nT:()=>i});var i=function(e,t){var n=t.removedIndex,o=t.addedIndex,i=t.payload;if(null===n&&null===o)return e;var a=r(e),s=i;return null!==n&&(s=a.splice(n,1)[0]),null!==o&&a.splice(o,0,s),a},a=function(e){return e&&(e=e.split(".").pop(),window.init.dbSchema.tableMeta[e])?window.init.dbSchema.tableMeta[e]:[]},s=function(e,t){return""==e.relation.filter||void 0===e.relation.filter?t[e.relation.table]?t[e.relation.table].data:e.relation.filterWithUser&&t[e.model]?t[e.model].data:[]:t[e.model]?t[e.model].data:[]}},88798:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZM:()=>idGenerator,fn:()=>isValid,sq:()=>evalstr});var idGenerator=function(e){var t=Math.random().toString(36).substr(3,9);return"".concat(e,"-").concat(t)},evalstr=function evalstr(str){return void 0===str||null==str||""==str||eval(str.toString())},isValid=function(e){return void 0!==e&&null!=e&&""!=e}},84514:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});const r={props:["step","currentStep","editIndex","onSuccess","onError"]};var o=n(14486);const i=(0,o.A)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"step-form"},[t("div",{staticClass:"step-form-header"},[t("Steps",{attrs:{current:0,size:"small"}},e._l(e.step.list,(function(e){return t("Step",{key:e.id,attrs:{title:e.name}})})),1)],1),e._v(" "),e._l(e.step.list,(function(n,r){return r===e.currentStep?t("div",{key:n.id,staticClass:"step-form-body"},[t("dataform",{ref:"form",refInFor:!0,attrs:{schemaID:n.formId,do_render:e.currentStep,editMode:e.editIndex>=0,isSubForm:!0,onSuccess:e.onSuccess,step:!0,onError:e.onError}})],1):e._e()}))],2)}),[],!1,null,null,null).exports;var a=n(83110),s=n(19670),l=/\{ *([\w_-]+) *\}/g;var c=n(89407),u=n(88798),d=n(45705);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function _(){}function w(){}var S={};c(S,a,(function(){return this}));var x=Object.getPrototypeOf,M=x&&x(x(O([])));M&&M!==n&&r.call(M,a)&&(S=M);var I=w.prototype=g.prototype=Object.create(S);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==m(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=E(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?y:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=y,r.method="throw",r.arg=c.arg)}}}function E(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(m(t)+" is not iterable")}return _.prototype=w,o(I,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},k(F.prototype),c(F.prototype,s,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new F(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(I),c(I,l,"Generator"),c(I,a,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function y(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,s,"next",e)}function s(e){y(i,r,o,a,s,"throw",e)}a(void 0)}))}}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const S={mixins:[{name:"dataform",props:["projectID","schemaID","editMode","onReady","onSuccess","onError","onClose","beforeSubmit","permissions","user_condition","formCustomData","do_render","isSubForm","url","page_id","public","title","close","template","step"],data:function(){return{isIos:!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),formTitle:"",loadConfig:!0,viewMode:!1,asyncMode:!1,save_btn_text:"",formValidationCustomText:"",meta:{model:"",option:{}},model:{},schema:[],formType:"normal",ui:{},formula:[],rule:{},identity:null,dataID:null,relations:{},showInfo:!1,infoUrl:"",infoTitle:"",showID:window.init&&window.init.showID?window.init.showID:void 0,subFormValidations:[],extraButtons:[],disableReset:!1,withBackButton:!1,scrollOptions:{height:"100%"},currentStep:0,step:{}}},computed:{baseUrl:function(){return this.$props.url?this.$props.url:""},submitUrl:function(){return this.editMode?this.page_id?"".concat(this.baseUrl,"/lambda/krud/").concat(this.$props.schemaID,"/update/").concat(this.dataID,"?page_id=").concat(this.page_id):"".concat(this.baseUrl,"/lambda/krud/").concat(this.$props.schemaID,"/update/").concat(this.dataID):this.page_id?"".concat(this.baseUrl,"/lambda/krud/").concat(this.$props.schemaID,"/store?page_id=").concat(this.page_id):"".concat(this.baseUrl,"/lambda/krud").concat(this.optionUrl,"/").concat(this.$props.schemaID,"/store")},optionUrl:function(){return!0===this.public?"-public":""},lang:function(){var e=this,t=["save","pleaseWait","resetFrom","close","pleaseEnterPasswordYouUCurrentlyUsing","pleaseReEnterYourPassword","passwordConfirmError","informationIsIncomplete","trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder","successfullySaved","errorSaving"];return t.reduce((function(n,r,o){return n[r]=e.$t("dataForm."+t[o]),n}),{})}},created:function(){window.showInformationModal=this.showInformationModal,this.schemaID&&this.initForm()},watch:{src:function(e,t){this.initForm()},editMode:function(e){e||this.handleReset(this.meta.model+"-"+this.schemaID)},do_render:function(e){e||(this.viewMode=!1,this.handleReset(this.meta.model+"-"+this.schemaID))},schemaID:function(e){e&&this.initForm()},ui:function(e){e&&this.dataID&&this.editModel(this.dataID)}},methods:{createWithTemplate:function(e){return t=e,n=this.model,t.replace(l,(function(e,t){var r=n[t];return void 0===r?"":("function"==typeof r&&(r=r(n)),r)}));var t,n},isVisibleSection:function(e){var t=this.showAbleFields(e.children);return!("section"!=e.type||!t)&&(!e.visibleUserRoles||!t||(!Array.isArray(e.visibleUserRoles)||!t||(!(e.visibleUserRoles.length>=1&&window.init.user&&t)||!!(e.visibleUserRoles.findIndex((function(e){return e==window.init.user.role}))>=0&&t))))},showAbleFields:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("form"==r.type||"Form"==r.type)return!!this.isShow(r.model);if("SubForm"==r.formType)return!0;if("row"==r.type){var o,i=!1,a=g(r.children);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.showAbleFields(s.children)&&(i=!0)}}catch(e){a.e(e)}finally{a.f()}return i}return r.hasOwnProperty("children")?!!this.showAbleFields(r.children):!!this.isShow(r.model)}}catch(e){n.e(e)}finally{n.f()}},element:a.ND,evalstr:u.sq,isValid:u.fn,isShow:function(e){var t=this.schema.findIndex((function(t){return t.model==e}));return!(t>=0)||!this.schema[t].hidden},afterChange:function(e,t,n){(0,c.QL)(e,t,this.model,this.schema,this.$refs,this.$Notice,this.editMode),this.do_render&&t!=n&&(0,c.EY)(this.formula,e,this.model,this.schema,this.rule,!1)},clearConfig:function(){this.model={},this.schema=[],this.ui={},this.formula=[],this.rule={},this.dataID=null},initFromServerData:function(e){var t=this;return v(b().mark((function n(){var r,o,i;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.baseUrl+"/lambda/puzzle/schema".concat(t.optionUrl,"/form/").concat(t.$props.schemaID),t.projectID&&(r=t.baseUrl+"/lambda/puzzle/project/".concat(t.projectID,"/form/").concat(t.$props.schemaID)),r+=0==e.length?"":"/".concat(e),n.prev=3,n.next=6,axios.get(r);case 6:return o=n.sent,i=JSON.parse(o.data.data.schema),console.log("form schema: ",i),i.form_id=o.data.data.id,i.form_name=o.data.data.name,n.abrupt("return",i);case 14:return n.prev=14,n.t0=n.catch(3),console.error(n.t0.message),n.abrupt("return",void 0);case 18:case"end":return n.stop()}}),n,null,[[3,14]])})))()},initForm:function(){var e=this;return v(b().mark((function t(){var n,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],e.user_condition&&(n=JSON.stringify(e.user_condition)),r={},!window.init){t.next=19;break}if(!window.init.formSchemas){t.next=14;break}if(!window.init.formSchemas[e.$props.schemaID]){t.next=9;break}r=window.init.formSchemas[e.$props.schemaID],t.next=12;break;case 9:return t.next=11,e.initFromServerData(n);case 11:r=t.sent;case 12:t.next=17;break;case 14:return t.next=16,e.initFromServerData(n);case 16:r=t.sent;case 17:t.next=22;break;case 19:return t.next=21,e.initFromServerData(n);case 21:r=t.sent;case 22:e.identity=r.identity,e.schema=r.schema,e.formType=r.formType,r.step&&(e.step=r.step),e.ui=r.ui,r.save_btn_text&&(e.save_btn_text=r.save_btn_text),r.formValidationCustomText&&(e.formValidationCustomText=r.formValidationCustomText),r.formula&&(e.formula=r.formula),r.extraButtons&&(e.extraButtons=r.extraButtons),r.disableReset&&(e.disableReset=r.disableReset),r.withBackButton&&(e.withBackButton=r.withBackButton),e.formTitle=r.form_name,e.meta={model:r.model,option:{labelPosition:r.labelPosition,labelWidth:r.labelWidth}},e.getOptionsData(r.schema),e.setUiSchemaFormItem(r.ui.schema),e.setHiddenItemModel(r.schema),(0,s.iS)(r.model),e.setUserConditionValues(!0),e.setCustomData(),e.loadConfig=!1,e.$props.onReady&&e.$props.onReady(r,e.schema);case 43:case"end":return t.stop()}}),t)})))()},setHiddenItemModel:function(e){var t=this;e.forEach((function(e){if((e.hidden||e.disabled)&&(t.isValid(e.default)&&t.setModel(e.model,e.default,e.formType),e.hasUserId&&t.setModel(e.model,1*window.init.user.id,e.formType),null!==e.fillByUserField&&""!==e.fillByUserField&&void 0!==e.fillByUserField&&t.setModel(e.model,window.init.user[e.fillByUserField],e.formType),t.isValid(e.param)&&e.param in t.$route.params)){var n=t.$route.params[e.param];"null"!=n&&Vue.set(t.$data.model,e.model,n)}e.source_hidden=e.hidden,e.source_disabled=e.disabled}))},validatePassCheck:function(e,t,n,r){var o=n||"",i=this.model[e]?this.model[e]:"";""!==n||this.editMode?o!==i?r(new Error(this.lang.passwordConfirmError)):r():r(new Error(this.lang.pleaseReEnterYourPassword))},setUiSchemaFormItem:function(e){var t=this;e.forEach((function(e){if("form"==e.type){if(t.setModel(e.model,e.default,e.formType),t.$watch("model."+e.model,{handler:function(n,r){t.do_render&&n!==r&&t.afterChange(e.model,n,r)},deep:!0}),e.rules&&t.setRule(e.model,e.rules),"Password"==e.formType&&e.passwordOption&&(e.passwordOption.confirm&&(t.setModel("password_confirm","","password"),t.$data.rule.password_confirm=[{validator:function(n,r,o){return t.validatePassCheck(e.model,n,r,o)},trigger:"blur"}]),e.passwordOption.edit_with_old_password)){t.setModel("current_password","","password");var n=[];[{type:"required",msg:t.lang.pleaseEnterPasswordYouUCurrentlyUsing},{type:"check_current_password",msg:null}].forEach((function(e){var r=(0,s.rF)(e,t.url);n.push(r)})),t.$data.rule.current_password=n}}else"SubForm"==e.formType?(t.setModel(e.model,[],"SubForm"),e.checkEmpty&&t.subFormValidations.push({model:e.model,emptyErrorMsg:e.EmptyErrorMsg?e.EmptyErrorMsg:"".concat(e.name,"-д мэдээлэл бүртгэнэ үү")}),""!=e.trigger&&t.$watch("model."+e.model,{handler:function(n,r){t.do_render&&t.afterChange(e.model,n,r)},deep:!0})):_.isArray(e.children)&&t.setUiSchemaFormItem(e.children)}))},setModel:function(e,t,n){switch(n){case"Switch":var r=!1;"true"!=t&&1!=t||(r=!0),Vue.set(this.$data.model,e,r);break;case"Checkbox":var o=0;"true"!=t&&1!=t||(o=1),Vue.set(this.$data.model,e,o);break;case"CK":var i="";""!=t&&null!==t&&(i=t),Vue.set(this.$data.model,e,i);break;case"SubForm":Vue.set(this.$data.model,e,[]);break;case"Select":""==t||null===t?Vue.set(this.$data.model,e,null):isNaN(t)?Vue.set(this.$data.model,e,t):Vue.set(this.$data.model,e,1*t);break;case"Number":null!==t&&Vue.set(this.$data.model,e,1*t);break;case"ISelect":Vue.set(this.$data.model,e,t);case"TreeSelect":Vue.set(this.$data.model,e,t);break;case"CheckboxMulti":""==t||null===t?Vue.set(this.$data.model,e,null):isNaN(t)?Vue.set(this.$data.model,e,t):Vue.set(this.$data.model,e,1*t);break;default:Vue.set(this.$data.model,e,t)}},setRule:function(e,t){var n=this;this.$data.rule[e]=[],t.forEach((function(t){var r=(0,s.rF)(t,n.url);n.$data.rule[e].push(r)}))},setPlaceholderLabel:function(e){window.lambda&&window.lambda.has_language&&null!=e.trKeyPlaceholder&&""!==e.trKeyPlaceholder&&(e.placeHolder=this.$t(e.trKeyPlaceholder))},setMeta:function(e,t){var n=this.schema.findIndex((function(t){return t.id==e.id})),r=n>=0?this.schema[n]:e;return t||(delete r.table,delete r.extra,r.schemaID=this.$props.schemaID),this.setPlaceholderLabel(r),r},setDataManually:function(e,t){this.model[e]=t},getSchemaByModel:function(e){var t=this.schema.findIndex((function(t){return t.model==e}));return t>=0?this.schema[t]:null},getSchemaRelationByModel:function(e){var t=this.schema.findIndex((function(t){return t.model==e}));return t>=0?(0,d.Jx)(this.schema[t],this.relations):null},setSchemaByModel:function(e,t,n,r){if("value"==t)Vue.set(this.$data.model,e,n);else if("sub-value"==t)Vue.set(this.$data.model,e,n),this.subFormFillData(e);else{var o=this.schema.findIndex((function(t){return t.model==e}));if(o>=0)if(void 0!==r){if("SubForm"==this.schema[o].formType){var i=this.schema[o].schema.findIndex((function(e){return e.model==r}));i>=0&&Vue.set(this.schema[o].schema[i],t,n)}}else Vue.set(this.schema[o],t,n)}},getSubFormData:function(e){var t=[];this.model[e].forEach((function(e){t.push(e.data)}))},closeForm:function(){"modal"===this.template&&this.$modal.hide("krud-modal"),"window"===this.template&&this.$router.push({path:this.$route.path,query:{window:"list"}}),this.onClose&&this.onClose()},handleSubmit:function(e){var t=this;this.setIdentityManual(),_.isEmpty(this.$data.rule)?this.subFormValidations.length>=1?this.validateWithSubForm():this.postData():this.$refs[e].validate((function(e){e?t.subFormValidations.length>=1?t.validateWithSubForm():t.postData():t.$Notice.error({title:t.lang.informationIsIncomplete,desc:""!=t.formValidationCustomText?t.formValidationCustomText:t.lang.trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder,duration:5})}))},validateWithSubForm:function(){var e=this,t=!0;this.subFormValidations.forEach((function(n){var r=_.isArray(e.model[n.model]);(void 0===e.model[n.model]||null===e.model[n.model]||r)&&(r?0==e.model[n.model].length&&(e.$Notice.error({title:e.lang.informationIsIncomplete,desc:n.emptyErrorMsg,duration:0}),t=!1):(e.$Notice.error({title:e.lang.informationIsIncomplete,desc:n.emptyErrorMsg,duration:0}),t=!1))})),t&&this.postData()},postData:function(){var e=this;this.beforeSubmit&&this.$props.beforeSubmit(),this.isSubForm?this.$props.onSuccess(this.$data.model):(this.asyncMode=!0,axios.post(this.submitUrl,this.$data.model).then((function(t){var n=t.data;n.status?(e.$Notice.success({title:e.lang.successfullySaved}),e.editMode?e.$props.onSuccess&&e.$props.onSuccess(n.data):(e.$data.model[e.identity]=n[e.identity],e.$props.onSuccess&&e.$props.onSuccess(n.data),e.handleReset(e.meta.model+"-"+e.schemaID)),"modal"===e.template&&e.$modal.hide("krud-modal")):(console.log(n),e.$Notice.error({title:n.msg?n.msg:e.lang.errorSaving}),e.$props.onError&&e.$props.onError()),e.asyncMode=!1})).catch((function(t){var n="";t.response?(t.response.data.hasOwnProperty("error")&&("string"==typeof t.response.data.error||t.response.data.error instanceof String?n=t.response.data.error:t.response.data.error instanceof Object&&Object.keys(t.response.data.error).forEach((function(e){var r=e+": "+t.response.data.error[e].map((function(e){return e+" "}));n=""!=n?n+"<br/>"+r:r}))),e.$Notice.error({title:e.lang.errorSaving,duration:3,desc:n})):e.$Notice.error({title:e.lang.errorSaving,duration:3,desc:t}),e.asyncMode=!1,e.$props.onError&&e.$props.onError()})))},handleReset:function(e){var t=this;this.model={},this.$refs[e].resetFields(),(0,s.RQ)(this.identity,null),this.schema.forEach((function(e){"SubForm"==e.formType&&void 0!==t.$refs["sf".concat(e.model)]&&(console.log(t.$refs["sf".concat(e.model)]),t.$refs["sf".concat(e.model)][0].reset()),t.setModel(e.model,e.default,e.formType),e.hidden=e.source_hidden,e.disabled=e.source_disabled})),this.setHiddenItemModel(this.schema),this.setCustomData()},setIdentityManual:function(){(0,s.RQ)(this.identity,this.model[this.identity])},setUserConditionValues:function(e){var t=this;this.user_condition&&this.user_condition.forEach((function(n){var r=t.getSchemaByModel(n.form_field);r&&(""!=r.default&&null!==r.default&&0!=r.default||e)&&(""!=t.model[r.model]&&null!==t.model[r.model]&&0!=t.model[r.model]||(e?(t.model[r.model]=window.init.user[n.user_field],r.default=window.init.user[n.user_field]):t.setModel(r.model,r.default,r.formType)))}))},setCustomData:function(){var e=this;this.formCustomData&&Object.keys(this.formCustomData).forEach((function(t){var n=e.schema.findIndex((function(e){return e.model==t}));n>=0&&(Vue.set(e.schema[n],"disabled",!0),Vue.set(e.schema[n],"default",e.formCustomData[t]),Vue.set(e.$data.model,t,e.formCustomData[t]))}))},editModel:function(e,t){var n=this;t?(this.model=h(h({},this.model),t),this.ui&&this.ui.hasOwnProperty("schema")&&(this.setEditModel(this.ui.schema),this.setUserConditionValues(!1),this.setCustomData())):(this.dataID=e,(0,s.RQ)(this.identity,e),axios.post(this.page_id?"".concat(this.baseUrl,"/lambda/krud/").concat(this.$props.schemaID,"/edit/").concat(e,"?page_id=").concat(this.page_id):"".concat(this.baseUrl,"/lambda/krud/").concat(this.$props.schemaID,"/edit/").concat(e)).then((function(e){var t=e.data;t.status&&(n.model=h(h({},n.model),t.data),n.ui&&n.ui.hasOwnProperty("schema")&&n.setEditModel(n.ui.schema),n.setUserConditionValues(!1),n.setCustomData())})))},setHiddenValues:function(e){var t=this;e.map((function(e){t.model[e.key]=e.val}))},subFormFillData:function(e){var t=this;this.$refs["sf".concat(e)]&&this.$refs["sf".concat(e)].length>=1?this.$refs["sf".concat(e)][0].fillData():setTimeout((function(){t.subFormFillData(e)}),100)},setEditModel:function(e){var t=this;e.forEach((function(e){if("form"==e.type||"Form"==e.type||"SubForm"==e.formType)switch(e.formType){case"SubForm":t.subFormFillData(e.id);break;case"Switch":case"Checkbox":1===t.model[e.model]||"true"===t.model[e.model]||"1"===t.model[e.model]||!0===t.model[e.model]?t.model[e.model]=!0:t.model[e.model]=!1;break;case"Password":case"PasswordGenerate":t.model[e.model]="",delete t.$data.rule[e.model]}else _.isArray(e.children)&&t.setEditModel(e.children)}))},cloneModel:function(e){var t=this;axios.post("/lambda/krud/".concat(this.$props.schemaID,"/edit/").concat(e)).then((function(e){var n=e.data;n.status&&(t.model=h(h({},t.model),n.data),delete t.model[t.identity],t.setEditModel(t.ui.schema),t.setUserConditionValues(!1),t.setCustomData())}))},getOptionsByRelations:function(e,t){var n=this;Object.keys(t).length>=1&&axios.post("".concat(e,"/lambda/puzzle/get_options").concat(this.optionUrl),{relations:t}).then((function(e){var t=e.data;Object.keys(t).map((function(e){var r=h(h({},n.relations[e]),{},{data:t[e]});Vue.set(n.$data.relations,e,r)}))}))},getOptionsData:function(e){var t=this;this.relations=this.getSelects(e,void 0),window.init.microserviceSettings&&window.init.microserviceSettings.length>=1?window.init.microserviceSettings.forEach((function(n){var r=t.getSelects(e,n.project_id);t.getOptionsByRelations(n.production_url,r)})):this.getOptionsByRelations("",this.relations)},getSelectItem:function(e,t){if(e.relation.filterWithUser){if(e.relation.filterWithUser&&e.relation.filterWithUser.constructor===Array){var n="";e.relation.filterWithUser.forEach((function(e){var t="".concat(e.tableField," = '").concat(window.init.user[e.userField],"'");n=""==n?t:n+" AND "+t})),""==e.relation.filter||void 0===e.relation.filter?(e.relation.filter=n,this.setSchemaByModel(e.model,"relation",e.relation)):e.relation.filter="(".concat(e.relation.filter,") AND (").concat(n,")")}else{var r="".concat(e.relation.filterWithUser.tableField," = '").concat(window.init.user[e.relation.filterWithUser.userField],"'");""==e.relation.filter||void 0===e.relation.filter?e.relation.filter=r:e.relation.filter=e.relation.filter+" AND "+r}e.relation.filterWithUser=void 0}return""==e.relation.filter||void 0===e.relation.filter?t[e.relation.table]=e.relation:t[e.model]=e.relation,t},getSelects:function(e,t){var n=this,r={};return e.map((function(e){if("Radio"!=e.formType&&"Select"!=e.formType&&"ISelect"!=e.formType&&"TreeSelect"!=e.formType&&"CheckboxMulti"!=e.formType||e.relation.table&&void 0===r[e.relation.table]&&(void 0!==t?e.relation.microservice_id==t&&(r=n.getSelectItem(e,r)):r=n.getSelectItem(e,r)),"AdminMenu"==e.formType&&e.relation.table&&(r[e.relation.table]=e.relation),"SubForm"==e.formType&&e.schema){var o=n.getSelects(e.schema,t);o&&(r=h(h({},r),o))}})),console.log("selects: ",r),r},showInformationModal:function(e,t){this.infoTitle=t,this.infoUrl=e,this.showInfo=!0},getRelation:function(e){var t=this.schema.findIndex((function(t){return t.model==e.model})),n=t>=0?this.schema[t]:e;return(0,d.Jx)(n,this.relations)},getFooterButtons:function(){var e=[];return this.schema.forEach((function(t){"FooterButton"==t.formType&&e.push(h({},t))})),e},setAndSend:function(e,t){var n=this,r=this.meta.model+"-"+this.schemaID;this.setIdentityManual(),_.isEmpty(this.$data.rule)?this.subFormValidations.length>=1?this.validateWithSubForm():(this.asyncMode=!0,Vue.set(this.$data.model,e,t),this.postData()):this.$refs[r].validate((function(r){r?n.subFormValidations.length>=1?n.validateWithSubForm():(n.asyncMode=!0,Vue.set(n.$data.model,e,t),n.postData()):n.$Notice.error({title:n.lang.informationIsIncomplete,desc:""!=n.formValidationCustomText?n.formValidationCustomText:n.lang.trRMandatoryFieldsFillInformationLookFormAFillRequiredFieldsWithRedBorder,duration:0})}))},moveStep:function(e){this.currentStep=e},onStepSuccess:function(){},onStepError:function(){}}}],components:{StepForm:i},computed:{hasLang:function(){return!(!window.lambda||!window.lambda.has_language)&&window.lambda.has_language}},methods:{getLabel:function(e){return this.hasLang&&null!=e.trKey&&""!==e.trKey?this.$t(e.trKey):e.label?e.label:"[".concat(e.model,"]")}}};const x=(0,o.A)(S,(function(){var e=this,t=e._self._c;return t("div",{class:"".concat(e.template," ").concat(e.viewMode?"dataform view-mode":"dataform")},["step"===e.formType?t("div",{staticClass:"step-mode"},[e.loadConfig?t("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),t("div",{staticClass:"dataform-header"},[t("h3",[e._v("\n                "+e._s(e.title?e.title:e.formTitle)+"\n                "),e.showID?t("b",[e.model[e.identity]?t("span",[e._v(": "+e._s(e.model[e.identity]))]):e._e()]):e._e()]),e._v(" "),"window"==e.template||"modal"==e.template?t("div",{staticClass:"dataform-header-actions"},[e.currentStep>0?t("a",{staticClass:"nav-btn",on:{click:function(t){return e.moveStep(e.currentStep-1)}}},[t("i",{staticClass:"ti-arrow-left"})]):e._e(),e._v(" "),e.currentStep<=e.step.list.length?t("a",{staticClass:"nav-btn",on:{click:function(t){return e.moveStep(e.currentStep+1)}}},[t("i",{staticClass:"ti-arrow-right"})]):e._e(),e._v(" "),t("Button",{staticClass:"save",attrs:{loading:e.asyncMode,type:"text"},on:{click:function(t){return e.handleSubmit(e.meta.model+"-"+e.schemaID)}}},[e.asyncMode?t("span",[e._v("\n                            "+e._s(e.lang.pleaseWait)+"\n                        ")]):t("span",[t("i",{staticClass:"ti-save"}),e._v("\n                            "+e._s("Хадгалах"!==e.save_btn_text&&""!=e.save_btn_text?e.save_btn_text:e.lang.save)+"\n                        ")])]),e._v(" "),t("a",{staticClass:"action-btn",attrs:{href:"javascript:void(0)"},on:{click:e.closeForm}},[t("i",{staticClass:"ti-close"})])],1):e._e()]),e._v(" "),t("step-form",{attrs:{step:e.step,"current-step":e.currentStep,"on-success":"onStepSuccess","on-error":"onStepError"}})],1):t("div",{staticClass:"single-mode"},[t("Form",{ref:e.meta.model+"-"+e.schemaID,attrs:{model:e.model,rules:e.rule,"label-position":e.meta.option.labelPosition,"label-width":"top"===e.meta.option.labelPosition?void 0:e.meta.option.labelWidth}},[t("div",{staticClass:"dataform-header"},[t("h3",[e._v(e._s(e.title?e.title:e.formTitle)),e.showID?t("b",[e.model[e.identity]?t("span",[e._v(": "+e._s(e.model[e.identity]))]):e._e()]):e._e()]),e._v(" "),"window"==e.template||"modal"==e.template?t("div",{staticClass:"dataform-header-actions"},[t("div",{staticClass:"action-wrapper"},[t("Button",{staticClass:"save",attrs:{loading:e.asyncMode,type:"text"},on:{click:function(t){return e.handleSubmit(e.meta.model+"-"+e.schemaID)}}},[e.asyncMode?t("span",[e._v("\n                            "+e._s(e.lang.pleaseWait)+"\n                        ")]):t("span",[t("i",{staticClass:"ti-save"}),e._v("\n                            "+e._s("Хадгалах"!==e.save_btn_text&&""!=e.save_btn_text?e.save_btn_text:e.lang.save)+"\n                        ")])])],1),e._v(" "),t("a",{staticClass:"action-btn",attrs:{href:"javascript:void(0)"},on:{click:e.closeForm}},[t("i",{staticClass:"ti-close"})])]):e._e()]),e._v(" "),t("div",{staticClass:"dataform-body"},[e.loadConfig?t("Spin",{attrs:{fix:""}}):t("div",e._l(e.ui.schema,(function(n){return t("Row",{key:n.index},[e._l(n.children,(function(r){return e.isVisibleSection(r)&&!n.sectionRenderByTab?t("Col",{key:r.index,attrs:{xs:r.span.xs,sm:r.span.sm,md:r.span.md,lg:r.span.lg}},[t("div",{class:""!==r.name&&null!==r.name&&void 0!==r.name?"fieldset":""},[""!=r.name?t("legend",[e._v(e._s(r.name))]):e._e(),e._v(" "),e._l(r.children,(function(n){return t("Row",{key:n.index},e._l(n.children,(function(n){return t("Col",{key:n.index,attrs:{id:n.id,xs:24,sm:24,md:n.span.md,lg:n.span.lg}},[n.name?t("Divider",{staticClass:"form-divider",attrs:{orientation:"left"}},[e._v("\n                                            "+e._s(n.name)+"\n                                        ")]):e._e(),e._v(" "),e._l(n.children,(function(n){return t("div",{key:n.index},[e.isShow(n.model)&&"SubForm"==n.formType&&n.subtype?t(e.element("subform/".concat(n.subtype)),{key:n.id,ref:"sf"+n.id,refInFor:!0,tag:"component",attrs:{url:e.url,model:{form:e.model,component:n.model},form:e.setMeta(n,!0),formula:e.formula,relations:e.relations,asyncMode:e.asyncMode,editMode:e.editMode}}):e._e(),e._v(" "),e.isShow(n.model)&&"SubForm"!=n.formType?t(e.element(n.formType),{key:n.model,tag:"component",attrs:{do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:n.model},disabled:!!n.disabled&&n.disabled,label:e.getLabel(n),rule:n.model,meta:e.setMeta(n),identity:e.identity,url:e.url,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,relation_data:e.getRelation(n)}}):e._e()],1)}))],2)})),1)}))],2)]):e._e()})),e._v(" "),n.sectionRenderByTab?t("Tabs",{attrs:{value:0}},e._l(n.children,(function(n){return e.isVisibleSection(n)?t("TabPane",{key:n.index,attrs:{label:n.name,name:n.index}},e._l(n.children,(function(n){return t("Row",{key:n.index},e._l(n.children,(function(n){return t("Col",{key:n.index,attrs:{id:n.id,xs:24,sm:24,md:n.span.md,lg:n.span.lg}},[n.name?t("Divider",{staticClass:"form-divider",attrs:{orientation:"left"}},[e._v("\n                                            "+e._s(n.name)+"\n                                        ")]):e._e(),e._v(" "),e._l(n.children,(function(n){return t("span",{key:n.index},[e.isShow(n.model)&&"SubForm"==n.formType&&n.subtype?t(e.element("subform/".concat(n.subtype)),{ref:"sf"+n.id,refInFor:!0,tag:"component",attrs:{model:{form:e.model,component:n.model},form:e.setMeta(n,!0),formula:e.formula,url:e.url,relations:e.relations,asyncMode:e.asyncMode,editMode:e.editMode}}):e._e(),e._v(" "),e.isShow(n.model)&&"SubForm"!=n.formType?t(e.element(n.formType),{key:e.model,tag:"component",attrs:{do_render:e.do_render,asyncMode:e.asyncMode,editMode:e.editMode,model:{form:e.model,component:n.model},url:e.url,disabled:!!n.disabled&&n.disabled,label:e.getLabel(n),rule:n.model,meta:e.setMeta(n),identity:e.identity,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,relation_data:e.getRelation(n)}}):e._e()],1)}))],2)})),1)})),1):e._e()})),1):e._e(),e._v(" "),e._l(n.children,(function(n){return"col"==n.type?t("Col",{key:n.index,attrs:{xs:n.span.xs,sm:n.span.sm,md:n.span.md,lg:n.span.lg}},[n.name?t("Divider",{staticClass:"form-divider",attrs:{orientation:"left"}},[e._v("\n                                "+e._s(n.name)+"\n                            ")]):e._e(),e._v(" "),e._l(n.children,(function(n){return t("div",{key:n.index},[e.isShow(n.model)&&"SubForm"==n.formType&&n.subtype?t(e.element("subform/".concat(n.subtype)),{key:n.model,ref:"sf"+n.id,refInFor:!0,tag:"component",attrs:{label:e.getLabel(n),model:{form:e.model,component:n.model},form:e.setMeta(n,!0),relations:e.relations,asyncMode:e.asyncMode,formula:e.formula,schemaID:e.schemaID,url:e.url,editMode:e.editMode}}):e._e(),e._v(" "),e.isShow(n.model)&&"SubForm"!=n.formType?t(e.element(n.formType),{key:n.model,tag:"component",attrs:{do_render:e.do_render,editMode:e.editMode,disabled:!!n.disabled&&n.disabled,model:{form:e.model,component:n.model},label:e.getLabel(n),rule:n.model,meta:e.setMeta(n),identity:e.identity,asyncMode:e.asyncMode,getSchemaByModel:e.getSchemaByModel,getSchemaRelationByModel:e.getSchemaRelationByModel,setSchemaByModel:e.setSchemaByModel,relation_data:e.getRelation(n)}}):e._e()],1)}))],2):e._e()}))],2)})),1)],1),e._v(" "),e.viewMode||"window"===e.template||"modal"===e.template?e._e():t("div",{staticClass:"dataform-footer"},[e.withBackButton?t("Button",{staticStyle:{"margin-right":"8px"},on:{click:e.close}},[e._v("\n                    Буцах\n                ")]):e._e(),e._v(" "),e._l(e.extraButtons,(function(n){return t("Button",{key:n.index,style:e.editMode?"margin-right: 8px; color:".concat(n.color,"; border-color:").concat(n.color):"margin-right: 8px;",attrs:{disabled:!e.editMode,to:e.createWithTemplate(n.url),target:"_blank"}},[t("i",{class:n.icon,style:e.editMode?"color:".concat(n.color):""}),e._v("\n                    "+e._s(n.title)+"\n                ")])})),e._v(" "),t("Button",{attrs:{type:"info",loading:e.asyncMode},on:{click:function(t){return e.handleSubmit(e.meta.model+"-"+e.schemaID)}}},[e.asyncMode?t("span",[e._v("\n                        "+e._s(e.lang.pleaseWait)+"\n                    ")]):t("span",[e._v("\n                        "+e._s("Хадгалах"!==e.save_btn_text&&""!=e.save_btn_text?e.save_btn_text:e.lang.save)+"\n                    ")])]),e._v(" "),e.editMode||e.disableReset?e._e():t("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset(e.meta.model+"-"+e.schemaID)}}},[e._v("\n                    "+e._s(e.lang.resetFrom)+"\n                ")]),e._v(" "),e._l(e.getFooterButtons(),(function(n){return t("span",{staticClass:"extra-buttons"},e._l(n.options,(function(r){return t("Button",{key:n.inex,attrs:{type:"info",loading:e.asyncMode},on:{click:function(t){return e.setAndSend(n.model,r.value)}}},[e._v("\n                 "+e._s(r.label)+"\n                ")])})),1)}))],2)])],1),e._v(" "),t("Drawer",{staticClass:"info-modal",attrs:{title:e.infoTitle,width:"860px"},model:{value:e.showInfo,callback:function(t){e.showInfo=t},expression:"showInfo"}},[t("iframe",{attrs:{src:e.infoUrl,frameborder:"0"}}),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.showInfo=!1}}},[e._v("\n                "+e._s(e.lang.close)+"\n            ")])],1)])],1)}),[],!1,null,null,null).exports},14486:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,{A:()=>r})}}]);