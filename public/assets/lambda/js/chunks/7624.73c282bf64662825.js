"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7624],{57624:(t,e,a)=>{a.r(e),a.d(e,{default:()=>l});const n={props:["model","rule","label","meta"],data:()=>({map:null,center:{lat:47.9197668,lng:106.9183483},zoom:11,marker:null,fromCityCenter:0,isRender:!1}),computed:{coordinate(){return this.model.form[this.model.component]},lang(){const t=["fromCityCenter","latitude","longitude"];return t.reduce(((e,a,n)=>(e[a]=this.$t("dataGrid."+t[n]),e)),{})}},watch:{coordinate(t,e){if((e&&!t||t&&!e)&&t){let e=JSON.parse(t);this.center={lat:parseFloat(e.lat),lng:parseFloat(e.lng)},this.init()}}},mounted(){this.init()},methods:{init(){this.map=new google.maps.Map(this.$el.getElementsByClassName("lambda-map")[0],{zoom:this.zoom,center:this.center}),this.marker=new google.maps.Marker({map:this.map,draggable:!0,animation:google.maps.Animation.DROP,position:this.center}),google.maps.event.addListener(this.map,"click",(t=>{this.model.form[this.model.component]=JSON.stringify(t.latLng),this.marker.setPosition(t.latLng)})),this.marker.addListener("position_changed",this.moveEvent.bind(this))},calcDistance(t,e){let a=47.91854,n=.017453292519943295,l=Math.cos,s=.5-l((t-a)*n)/2+l(a*n)*l(t*n)*(1-l((e-106.917658)*n))/2;this.fromCityCenter=(12742*Math.asin(Math.sqrt(s))).toFixed(2)},moveEvent(){this.center={lat:this.marker.getPosition().lat().toFixed(10),lng:this.marker.getPosition().lng().toFixed(10)},this.calcDistance(this.center.lat,this.center.lng);new google.maps.LatLng(this.center.lat,this.center.lng);this.model.form[this.model.component]=JSON.stringify(this.center)},updateLat(t){this.center.lat=parseFloat(t.target.value).toFixed(10);let e=new google.maps.LatLng(this.center.lat,this.center.lng);this.marker.setPosition(e)},updateLng(t){this.center.lng=parseFloat(t.target.value).toFixed(10);let e=new google.maps.LatLng(this.center.lat,this.center.lng);this.marker.setPosition(e)}}};const l=(0,a(14486).A)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"lambda-map-wrapper"},[e("FormItem",{attrs:{label:t.label,prop:t.rule}},[e("div",{staticClass:"lambda-lat-lng"},[e("Input",{attrs:{placeholder:t.lang.latitude},on:{"on-blur":t.updateLat},model:{value:t.center.lat,callback:function(e){t.$set(t.center,"lat",e)},expression:"center.lat"}}),t._v(" "),e("Input",{attrs:{placeholder:t.lang.longitude},model:{value:t.center.lng,callback:function(e){t.$set(t.center,"lng",e)},expression:"center.lng"}})],1),t._v(" "),e("span",[t._v("Хотын төвөөс: "+t._s(t.fromCityCenter)+" км")]),t._v(" "),e("div",{staticClass:"lambda-map"})])],1)}),[],!1,null,null,null).exports}}]);